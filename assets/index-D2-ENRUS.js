(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function S0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zm={exports:{}},gl={},eg={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wo=Symbol.for("react.element"),I0=Symbol.for("react.portal"),k0=Symbol.for("react.fragment"),A0=Symbol.for("react.strict_mode"),C0=Symbol.for("react.profiler"),R0=Symbol.for("react.provider"),P0=Symbol.for("react.context"),N0=Symbol.for("react.forward_ref"),x0=Symbol.for("react.suspense"),V0=Symbol.for("react.memo"),D0=Symbol.for("react.lazy"),Pf=Symbol.iterator;function M0(t){return t===null||typeof t!="object"?null:(t=Pf&&t[Pf]||t["@@iterator"],typeof t=="function"?t:null)}var tg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ng=Object.assign,rg={};function Ui(t,e,n){this.props=t,this.context=e,this.refs=rg,this.updater=n||tg}Ui.prototype.isReactComponent={};Ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ig(){}ig.prototype=Ui.prototype;function oh(t,e,n){this.props=t,this.context=e,this.refs=rg,this.updater=n||tg}var ah=oh.prototype=new ig;ah.constructor=oh;ng(ah,Ui.prototype);ah.isPureReactComponent=!0;var Nf=Array.isArray,sg=Object.prototype.hasOwnProperty,lh={current:null},og={key:!0,ref:!0,__self:!0,__source:!0};function ag(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)sg.call(e,r)&&!og.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:wo,type:t,key:s,ref:a,props:i,_owner:lh.current}}function O0(t,e){return{$$typeof:wo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uh(t){return typeof t=="object"&&t!==null&&t.$$typeof===wo}function b0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xf=/\/+/g;function au(t,e){return typeof t=="object"&&t!==null&&t.key!=null?b0(""+t.key):e.toString(36)}function da(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case wo:case I0:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+au(a,0):r,Nf(i)?(n="",t!=null&&(n=t.replace(xf,"$&/")+"/"),da(i,e,n,"",function(h){return h})):i!=null&&(uh(i)&&(i=O0(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(xf,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Nf(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+au(s,l);a+=da(s,e,n,c,i)}else if(c=M0(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+au(s,l++),a+=da(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function qo(t,e,n){if(t==null)return t;var r=[],i=0;return da(t,r,"","",function(s){return e.call(n,s,i++)}),r}function L0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mt={current:null},fa={transition:null},j0={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:fa,ReactCurrentOwner:lh};function lg(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:qo,forEach:function(t,e,n){qo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qo(t,function(){e++}),e},toArray:function(t){return qo(t,function(e){return e})||[]},only:function(t){if(!uh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Ui;te.Fragment=k0;te.Profiler=C0;te.PureComponent=oh;te.StrictMode=A0;te.Suspense=x0;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j0;te.act=lg;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ng({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=lh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)sg.call(e,c)&&!og.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:wo,type:t.type,key:i,ref:s,props:r,_owner:a}};te.createContext=function(t){return t={$$typeof:P0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:R0,_context:t},t.Consumer=t};te.createElement=ag;te.createFactory=function(t){var e=ag.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:N0,render:t}};te.isValidElement=uh;te.lazy=function(t){return{$$typeof:D0,_payload:{_status:-1,_result:t},_init:L0}};te.memo=function(t,e){return{$$typeof:V0,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=fa.transition;fa.transition={};try{t()}finally{fa.transition=e}};te.unstable_act=lg;te.useCallback=function(t,e){return mt.current.useCallback(t,e)};te.useContext=function(t){return mt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return mt.current.useDeferredValue(t)};te.useEffect=function(t,e){return mt.current.useEffect(t,e)};te.useId=function(){return mt.current.useId()};te.useImperativeHandle=function(t,e,n){return mt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return mt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return mt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return mt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return mt.current.useReducer(t,e,n)};te.useRef=function(t){return mt.current.useRef(t)};te.useState=function(t){return mt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return mt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return mt.current.useTransition()};te.version="18.3.1";eg.exports=te;var ae=eg.exports;const F0=S0(ae);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0=ae,B0=Symbol.for("react.element"),z0=Symbol.for("react.fragment"),$0=Object.prototype.hasOwnProperty,q0=U0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W0={key:!0,ref:!0,__self:!0,__source:!0};function ug(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)$0.call(e,r)&&!W0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:B0,type:t,key:s,ref:a,props:i,_owner:q0.current}}gl.Fragment=z0;gl.jsx=ug;gl.jsxs=ug;Zm.exports=gl;var w=Zm.exports,Wu={},cg={exports:{}},xt={},hg={exports:{}},dg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Y){var Z=q.length;q.push(Y);e:for(;0<Z;){var de=Z-1>>>1,Ee=q[de];if(0<i(Ee,Y))q[de]=Y,q[Z]=Ee,Z=de;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Y=q[0],Z=q.pop();if(Z!==Y){q[0]=Z;e:for(var de=0,Ee=q.length,Fe=Ee>>>1;de<Fe;){var ht=2*(de+1)-1,yn=q[ht],It=ht+1,tn=q[It];if(0>i(yn,Z))It<Ee&&0>i(tn,yn)?(q[de]=tn,q[It]=Z,de=It):(q[de]=yn,q[ht]=Z,de=ht);else if(It<Ee&&0>i(tn,Z))q[de]=tn,q[It]=Z,de=It;else break e}}return Y}function i(q,Y){var Z=q.sortIndex-Y.sortIndex;return Z!==0?Z:q.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],h=[],f=1,m=null,y=3,C=!1,x=!1,M=!1,L=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(q){for(var Y=n(h);Y!==null;){if(Y.callback===null)r(h);else if(Y.startTime<=q)r(h),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(h)}}function D(q){if(M=!1,A(q),!x)if(n(c)!==null)x=!0,Er(B);else{var Y=n(h);Y!==null&&en(D,Y.startTime-q)}}function B(q,Y){x=!1,M&&(M=!1,k(g),g=-1),C=!0;var Z=y;try{for(A(Y),m=n(c);m!==null&&(!(m.expirationTime>Y)||q&&!I());){var de=m.callback;if(typeof de=="function"){m.callback=null,y=m.priorityLevel;var Ee=de(m.expirationTime<=Y);Y=t.unstable_now(),typeof Ee=="function"?m.callback=Ee:m===n(c)&&r(c),A(Y)}else r(c);m=n(c)}if(m!==null)var Fe=!0;else{var ht=n(h);ht!==null&&en(D,ht.startTime-Y),Fe=!1}return Fe}finally{m=null,y=Z,C=!1}}var z=!1,_=null,g=-1,v=5,S=-1;function I(){return!(t.unstable_now()-S<v)}function R(){if(_!==null){var q=t.unstable_now();S=q;var Y=!0;try{Y=_(!0,q)}finally{Y?T():(z=!1,_=null)}}else z=!1}var T;if(typeof E=="function")T=function(){E(R)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,zt=xe.port2;xe.port1.onmessage=R,T=function(){zt.postMessage(null)}}else T=function(){L(R,0)};function Er(q){_=q,z||(z=!0,T())}function en(q,Y){g=L(function(){q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){x||C||(x=!0,Er(B))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(q){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var Z=y;y=Y;try{return q()}finally{y=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Z=y;y=q;try{return Y()}finally{y=Z}},t.unstable_scheduleCallback=function(q,Y,Z){var de=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?de+Z:de):Z=de,q){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=Z+Ee,q={id:f++,callback:Y,priorityLevel:q,startTime:Z,expirationTime:Ee,sortIndex:-1},Z>de?(q.sortIndex=Z,e(h,q),n(c)===null&&q===n(h)&&(M?(k(g),g=-1):M=!0,en(D,Z-de))):(q.sortIndex=Ee,e(c,q),x||C||(x=!0,Er(B))),q},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(q){var Y=y;return function(){var Z=y;y=Y;try{return q.apply(this,arguments)}finally{y=Z}}}})(dg);hg.exports=dg;var H0=hg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0=ae,Nt=H0;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fg=new Set,Hs={};function qr(t,e){Ci(t,e),Ci(t+"Capture",e)}function Ci(t,e){for(Hs[t]=e,t=0;t<e.length;t++)fg.add(e[t])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hu=Object.prototype.hasOwnProperty,Q0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vf={},Df={};function K0(t){return Hu.call(Df,t)?!0:Hu.call(Vf,t)?!1:Q0.test(t)?Df[t]=!0:(Vf[t]=!0,!1)}function Y0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function X0(t,e,n,r){if(e===null||typeof e>"u"||Y0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ch=/[\-:]([a-z])/g;function hh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ch,hh);et[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ch,hh);et[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ch,hh);et[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function dh(t,e,n,r){var i=et.hasOwnProperty(e)?et[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(X0(e,n,i,r)&&(n=null),r||i===null?K0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Dn=G0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wo=Symbol.for("react.element"),si=Symbol.for("react.portal"),oi=Symbol.for("react.fragment"),fh=Symbol.for("react.strict_mode"),Gu=Symbol.for("react.profiler"),pg=Symbol.for("react.provider"),mg=Symbol.for("react.context"),ph=Symbol.for("react.forward_ref"),Qu=Symbol.for("react.suspense"),Ku=Symbol.for("react.suspense_list"),mh=Symbol.for("react.memo"),$n=Symbol.for("react.lazy"),gg=Symbol.for("react.offscreen"),Mf=Symbol.iterator;function ps(t){return t===null||typeof t!="object"?null:(t=Mf&&t[Mf]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,lu;function Ts(t){if(lu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lu=e&&e[1]||""}return`
`+lu+t}var uu=!1;function cu(t,e){if(!t||uu)return"";uu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{uu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ts(t):""}function J0(t){switch(t.tag){case 5:return Ts(t.type);case 16:return Ts("Lazy");case 13:return Ts("Suspense");case 19:return Ts("SuspenseList");case 0:case 2:case 15:return t=cu(t.type,!1),t;case 11:return t=cu(t.type.render,!1),t;case 1:return t=cu(t.type,!0),t;default:return""}}function Yu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oi:return"Fragment";case si:return"Portal";case Gu:return"Profiler";case fh:return"StrictMode";case Qu:return"Suspense";case Ku:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mg:return(t.displayName||"Context")+".Consumer";case pg:return(t._context.displayName||"Context")+".Provider";case ph:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mh:return e=t.displayName||null,e!==null?e:Yu(t.type)||"Memo";case $n:e=t._payload,t=t._init;try{return Yu(t(e))}catch{}}return null}function Z0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yu(e);case 8:return e===fh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eE(t){var e=yg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ho(t){t._valueTracker||(t._valueTracker=eE(t))}function _g(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Na(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xu(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Of(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=lr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vg(t,e){e=e.checked,e!=null&&dh(t,"checked",e,!1)}function Ju(t,e){vg(t,e);var n=lr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zu(t,e.type,lr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zu(t,e,n){(e!=="number"||Na(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ss=Array.isArray;function yi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+lr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ec(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Ss(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:lr(n)}}function Eg(t,e){var n=lr(e.value),r=lr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Go,Tg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Go=Go||document.createElement("div"),Go.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Go.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tE=["Webkit","ms","Moz","O"];Object.keys(Ns).forEach(function(t){tE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ns[e]=Ns[t]})});function Sg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ns.hasOwnProperty(t)&&Ns[t]?(""+e).trim():e+"px"}function Ig(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Sg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nE=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nc(t,e){if(e){if(nE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function rc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ic=null;function gh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sc=null,_i=null,vi=null;function Ff(t){if(t=Io(t)){if(typeof sc!="function")throw Error(F(280));var e=t.stateNode;e&&(e=wl(e),sc(t.stateNode,t.type,e))}}function kg(t){_i?vi?vi.push(t):vi=[t]:_i=t}function Ag(){if(_i){var t=_i,e=vi;if(vi=_i=null,Ff(t),e)for(t=0;t<e.length;t++)Ff(e[t])}}function Cg(t,e){return t(e)}function Rg(){}var hu=!1;function Pg(t,e,n){if(hu)return t(e,n);hu=!0;try{return Cg(t,e,n)}finally{hu=!1,(_i!==null||vi!==null)&&(Rg(),Ag())}}function Qs(t,e){var n=t.stateNode;if(n===null)return null;var r=wl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var oc=!1;if(An)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){oc=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{oc=!1}function rE(t,e,n,r,i,s,a,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var xs=!1,xa=null,Va=!1,ac=null,iE={onError:function(t){xs=!0,xa=t}};function sE(t,e,n,r,i,s,a,l,c){xs=!1,xa=null,rE.apply(iE,arguments)}function oE(t,e,n,r,i,s,a,l,c){if(sE.apply(this,arguments),xs){if(xs){var h=xa;xs=!1,xa=null}else throw Error(F(198));Va||(Va=!0,ac=h)}}function Wr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ng(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uf(t){if(Wr(t)!==t)throw Error(F(188))}function aE(t){var e=t.alternate;if(!e){if(e=Wr(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Uf(i),t;if(s===r)return Uf(i),e;s=s.sibling}throw Error(F(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function xg(t){return t=aE(t),t!==null?Vg(t):null}function Vg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vg(t);if(e!==null)return e;t=t.sibling}return null}var Dg=Nt.unstable_scheduleCallback,Bf=Nt.unstable_cancelCallback,lE=Nt.unstable_shouldYield,uE=Nt.unstable_requestPaint,De=Nt.unstable_now,cE=Nt.unstable_getCurrentPriorityLevel,yh=Nt.unstable_ImmediatePriority,Mg=Nt.unstable_UserBlockingPriority,Da=Nt.unstable_NormalPriority,hE=Nt.unstable_LowPriority,Og=Nt.unstable_IdlePriority,yl=null,cn=null;function dE(t){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(yl,t,void 0,(t.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:mE,fE=Math.log,pE=Math.LN2;function mE(t){return t>>>=0,t===0?32:31-(fE(t)/pE|0)|0}var Qo=64,Ko=4194304;function Is(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ma(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Is(l):(s&=a,s!==0&&(r=Is(s)))}else a=n&~i,a!==0?r=Is(a):s!==0&&(r=Is(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yt(e),i=1<<n,r|=t[n],e&=~i;return r}function gE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Yt(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=gE(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function lc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bg(){var t=Qo;return Qo<<=1,!(Qo&4194240)&&(Qo=64),t}function du(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function To(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yt(e),t[e]=n}function _E(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Yt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function _h(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var he=0;function Lg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jg,vh,Fg,Ug,Bg,uc=!1,Yo=[],Yn=null,Xn=null,Jn=null,Ks=new Map,Ys=new Map,Wn=[],vE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zf(t,e){switch(t){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":Ks.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ys.delete(e.pointerId)}}function gs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Io(e),e!==null&&vh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function EE(t,e,n,r,i){switch(e){case"focusin":return Yn=gs(Yn,t,e,n,r,i),!0;case"dragenter":return Xn=gs(Xn,t,e,n,r,i),!0;case"mouseover":return Jn=gs(Jn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ks.set(s,gs(Ks.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ys.set(s,gs(Ys.get(s)||null,t,e,n,r,i)),!0}return!1}function zg(t){var e=Rr(t.target);if(e!==null){var n=Wr(e);if(n!==null){if(e=n.tag,e===13){if(e=Ng(n),e!==null){t.blockedOn=e,Bg(t.priority,function(){Fg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ic=r,n.target.dispatchEvent(r),ic=null}else return e=Io(n),e!==null&&vh(e),t.blockedOn=n,!1;e.shift()}return!0}function $f(t,e,n){pa(t)&&n.delete(e)}function wE(){uc=!1,Yn!==null&&pa(Yn)&&(Yn=null),Xn!==null&&pa(Xn)&&(Xn=null),Jn!==null&&pa(Jn)&&(Jn=null),Ks.forEach($f),Ys.forEach($f)}function ys(t,e){t.blockedOn===e&&(t.blockedOn=null,uc||(uc=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,wE)))}function Xs(t){function e(i){return ys(i,t)}if(0<Yo.length){ys(Yo[0],t);for(var n=1;n<Yo.length;n++){var r=Yo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Yn!==null&&ys(Yn,t),Xn!==null&&ys(Xn,t),Jn!==null&&ys(Jn,t),Ks.forEach(e),Ys.forEach(e),n=0;n<Wn.length;n++)r=Wn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Wn.length&&(n=Wn[0],n.blockedOn===null);)zg(n),n.blockedOn===null&&Wn.shift()}var Ei=Dn.ReactCurrentBatchConfig,Oa=!0;function TE(t,e,n,r){var i=he,s=Ei.transition;Ei.transition=null;try{he=1,Eh(t,e,n,r)}finally{he=i,Ei.transition=s}}function SE(t,e,n,r){var i=he,s=Ei.transition;Ei.transition=null;try{he=4,Eh(t,e,n,r)}finally{he=i,Ei.transition=s}}function Eh(t,e,n,r){if(Oa){var i=cc(t,e,n,r);if(i===null)Tu(t,e,r,ba,n),zf(t,r);else if(EE(i,t,e,n,r))r.stopPropagation();else if(zf(t,r),e&4&&-1<vE.indexOf(t)){for(;i!==null;){var s=Io(i);if(s!==null&&jg(s),s=cc(t,e,n,r),s===null&&Tu(t,e,r,ba,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Tu(t,e,r,null,n)}}var ba=null;function cc(t,e,n,r){if(ba=null,t=gh(r),t=Rr(t),t!==null)if(e=Wr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ng(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ba=t,null}function $g(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cE()){case yh:return 1;case Mg:return 4;case Da:case hE:return 16;case Og:return 536870912;default:return 16}default:return 16}}var Gn=null,wh=null,ma=null;function qg(){if(ma)return ma;var t,e=wh,n=e.length,r,i="value"in Gn?Gn.value:Gn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return ma=i.slice(t,1<r?1-r:void 0)}function ga(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xo(){return!0}function qf(){return!1}function Vt(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xo:qf,this.isPropagationStopped=qf,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),e}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Th=Vt(Bi),So=ke({},Bi,{view:0,detail:0}),IE=Vt(So),fu,pu,_s,_l=ke({},So,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_s&&(_s&&t.type==="mousemove"?(fu=t.screenX-_s.screenX,pu=t.screenY-_s.screenY):pu=fu=0,_s=t),fu)},movementY:function(t){return"movementY"in t?t.movementY:pu}}),Wf=Vt(_l),kE=ke({},_l,{dataTransfer:0}),AE=Vt(kE),CE=ke({},So,{relatedTarget:0}),mu=Vt(CE),RE=ke({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),PE=Vt(RE),NE=ke({},Bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xE=Vt(NE),VE=ke({},Bi,{data:0}),Hf=Vt(VE),DE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ME={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OE[t])?!!e[t]:!1}function Sh(){return bE}var LE=ke({},So,{key:function(t){if(t.key){var e=DE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ga(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ME[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sh,charCode:function(t){return t.type==="keypress"?ga(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ga(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jE=Vt(LE),FE=ke({},_l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gf=Vt(FE),UE=ke({},So,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sh}),BE=Vt(UE),zE=ke({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),$E=Vt(zE),qE=ke({},_l,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WE=Vt(qE),HE=[9,13,27,32],Ih=An&&"CompositionEvent"in window,Vs=null;An&&"documentMode"in document&&(Vs=document.documentMode);var GE=An&&"TextEvent"in window&&!Vs,Wg=An&&(!Ih||Vs&&8<Vs&&11>=Vs),Qf=" ",Kf=!1;function Hg(t,e){switch(t){case"keyup":return HE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ai=!1;function QE(t,e){switch(t){case"compositionend":return Gg(e);case"keypress":return e.which!==32?null:(Kf=!0,Qf);case"textInput":return t=e.data,t===Qf&&Kf?null:t;default:return null}}function KE(t,e){if(ai)return t==="compositionend"||!Ih&&Hg(t,e)?(t=qg(),ma=wh=Gn=null,ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wg&&e.locale!=="ko"?null:e.data;default:return null}}var YE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YE[t.type]:e==="textarea"}function Qg(t,e,n,r){kg(r),e=La(e,"onChange"),0<e.length&&(n=new Th("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ds=null,Js=null;function XE(t){sy(t,0)}function vl(t){var e=ci(t);if(_g(e))return t}function JE(t,e){if(t==="change")return e}var Kg=!1;if(An){var gu;if(An){var yu="oninput"in document;if(!yu){var Xf=document.createElement("div");Xf.setAttribute("oninput","return;"),yu=typeof Xf.oninput=="function"}gu=yu}else gu=!1;Kg=gu&&(!document.documentMode||9<document.documentMode)}function Jf(){Ds&&(Ds.detachEvent("onpropertychange",Yg),Js=Ds=null)}function Yg(t){if(t.propertyName==="value"&&vl(Js)){var e=[];Qg(e,Js,t,gh(t)),Pg(XE,e)}}function ZE(t,e,n){t==="focusin"?(Jf(),Ds=e,Js=n,Ds.attachEvent("onpropertychange",Yg)):t==="focusout"&&Jf()}function ew(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vl(Js)}function tw(t,e){if(t==="click")return vl(e)}function nw(t,e){if(t==="input"||t==="change")return vl(e)}function rw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jt=typeof Object.is=="function"?Object.is:rw;function Zs(t,e){if(Jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Hu.call(e,i)||!Jt(t[i],e[i]))return!1}return!0}function Zf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ep(t,e){var n=Zf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zf(n)}}function Xg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Jg(){for(var t=window,e=Na();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Na(t.document)}return e}function kh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iw(t){var e=Jg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Xg(n.ownerDocument.documentElement,n)){if(r!==null&&kh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ep(n,s);var a=ep(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sw=An&&"documentMode"in document&&11>=document.documentMode,li=null,hc=null,Ms=null,dc=!1;function tp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dc||li==null||li!==Na(r)||(r=li,"selectionStart"in r&&kh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ms&&Zs(Ms,r)||(Ms=r,r=La(hc,"onSelect"),0<r.length&&(e=new Th("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=li)))}function Jo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ui={animationend:Jo("Animation","AnimationEnd"),animationiteration:Jo("Animation","AnimationIteration"),animationstart:Jo("Animation","AnimationStart"),transitionend:Jo("Transition","TransitionEnd")},_u={},Zg={};An&&(Zg=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function El(t){if(_u[t])return _u[t];if(!ui[t])return t;var e=ui[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zg)return _u[t]=e[n];return t}var ey=El("animationend"),ty=El("animationiteration"),ny=El("animationstart"),ry=El("transitionend"),iy=new Map,np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(t,e){iy.set(t,e),qr(e,[t])}for(var vu=0;vu<np.length;vu++){var Eu=np[vu],ow=Eu.toLowerCase(),aw=Eu[0].toUpperCase()+Eu.slice(1);gr(ow,"on"+aw)}gr(ey,"onAnimationEnd");gr(ty,"onAnimationIteration");gr(ny,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(ry,"onTransitionEnd");Ci("onMouseEnter",["mouseout","mouseover"]);Ci("onMouseLeave",["mouseout","mouseover"]);Ci("onPointerEnter",["pointerout","pointerover"]);Ci("onPointerLeave",["pointerout","pointerover"]);qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function rp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oE(r,e,void 0,t),t.currentTarget=null}function sy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;rp(i,l,h),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,h=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;rp(i,l,h),s=c}}}if(Va)throw t=ac,Va=!1,ac=null,t}function ye(t,e){var n=e[yc];n===void 0&&(n=e[yc]=new Set);var r=t+"__bubble";n.has(r)||(oy(e,t,2,!1),n.add(r))}function wu(t,e,n){var r=0;e&&(r|=4),oy(n,t,r,e)}var Zo="_reactListening"+Math.random().toString(36).slice(2);function eo(t){if(!t[Zo]){t[Zo]=!0,fg.forEach(function(n){n!=="selectionchange"&&(lw.has(n)||wu(n,!1,t),wu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zo]||(e[Zo]=!0,wu("selectionchange",!1,e))}}function oy(t,e,n,r){switch($g(e)){case 1:var i=TE;break;case 4:i=SE;break;default:i=Eh}n=i.bind(null,e,n,t),i=void 0,!oc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Tu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Rr(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}Pg(function(){var h=s,f=gh(n),m=[];e:{var y=iy.get(t);if(y!==void 0){var C=Th,x=t;switch(t){case"keypress":if(ga(n)===0)break e;case"keydown":case"keyup":C=jE;break;case"focusin":x="focus",C=mu;break;case"focusout":x="blur",C=mu;break;case"beforeblur":case"afterblur":C=mu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=Wf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=AE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=BE;break;case ey:case ty:case ny:C=PE;break;case ry:C=$E;break;case"scroll":C=IE;break;case"wheel":C=WE;break;case"copy":case"cut":case"paste":C=xE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=Gf}var M=(e&4)!==0,L=!M&&t==="scroll",k=M?y!==null?y+"Capture":null:y;M=[];for(var E=h,A;E!==null;){A=E;var D=A.stateNode;if(A.tag===5&&D!==null&&(A=D,k!==null&&(D=Qs(E,k),D!=null&&M.push(to(E,D,A)))),L)break;E=E.return}0<M.length&&(y=new C(y,x,null,n,f),m.push({event:y,listeners:M}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",y&&n!==ic&&(x=n.relatedTarget||n.fromElement)&&(Rr(x)||x[Cn]))break e;if((C||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,C?(x=n.relatedTarget||n.toElement,C=h,x=x?Rr(x):null,x!==null&&(L=Wr(x),x!==L||x.tag!==5&&x.tag!==6)&&(x=null)):(C=null,x=h),C!==x)){if(M=Wf,D="onMouseLeave",k="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(M=Gf,D="onPointerLeave",k="onPointerEnter",E="pointer"),L=C==null?y:ci(C),A=x==null?y:ci(x),y=new M(D,E+"leave",C,n,f),y.target=L,y.relatedTarget=A,D=null,Rr(f)===h&&(M=new M(k,E+"enter",x,n,f),M.target=A,M.relatedTarget=L,D=M),L=D,C&&x)t:{for(M=C,k=x,E=0,A=M;A;A=Zr(A))E++;for(A=0,D=k;D;D=Zr(D))A++;for(;0<E-A;)M=Zr(M),E--;for(;0<A-E;)k=Zr(k),A--;for(;E--;){if(M===k||k!==null&&M===k.alternate)break t;M=Zr(M),k=Zr(k)}M=null}else M=null;C!==null&&ip(m,y,C,M,!1),x!==null&&L!==null&&ip(m,L,x,M,!0)}}e:{if(y=h?ci(h):window,C=y.nodeName&&y.nodeName.toLowerCase(),C==="select"||C==="input"&&y.type==="file")var B=JE;else if(Yf(y))if(Kg)B=nw;else{B=ew;var z=ZE}else(C=y.nodeName)&&C.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(B=tw);if(B&&(B=B(t,h))){Qg(m,B,n,f);break e}z&&z(t,y,h),t==="focusout"&&(z=y._wrapperState)&&z.controlled&&y.type==="number"&&Zu(y,"number",y.value)}switch(z=h?ci(h):window,t){case"focusin":(Yf(z)||z.contentEditable==="true")&&(li=z,hc=h,Ms=null);break;case"focusout":Ms=hc=li=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,tp(m,n,f);break;case"selectionchange":if(sw)break;case"keydown":case"keyup":tp(m,n,f)}var _;if(Ih)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else ai?Hg(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Wg&&n.locale!=="ko"&&(ai||g!=="onCompositionStart"?g==="onCompositionEnd"&&ai&&(_=qg()):(Gn=f,wh="value"in Gn?Gn.value:Gn.textContent,ai=!0)),z=La(h,g),0<z.length&&(g=new Hf(g,t,null,n,f),m.push({event:g,listeners:z}),_?g.data=_:(_=Gg(n),_!==null&&(g.data=_)))),(_=GE?QE(t,n):KE(t,n))&&(h=La(h,"onBeforeInput"),0<h.length&&(f=new Hf("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:h}),f.data=_))}sy(m,e)})}function to(t,e,n){return{instance:t,listener:e,currentTarget:n}}function La(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Qs(t,n),s!=null&&r.unshift(to(t,s,i)),s=Qs(t,e),s!=null&&r.push(to(t,s,i))),t=t.return}return r}function Zr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ip(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,i?(c=Qs(n,s),c!=null&&a.unshift(to(n,c,l))):i||(c=Qs(n,s),c!=null&&a.push(to(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var uw=/\r\n?/g,cw=/\u0000|\uFFFD/g;function sp(t){return(typeof t=="string"?t:""+t).replace(uw,`
`).replace(cw,"")}function ea(t,e,n){if(e=sp(e),sp(t)!==e&&n)throw Error(F(425))}function ja(){}var fc=null,pc=null;function mc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gc=typeof setTimeout=="function"?setTimeout:void 0,hw=typeof clearTimeout=="function"?clearTimeout:void 0,op=typeof Promise=="function"?Promise:void 0,dw=typeof queueMicrotask=="function"?queueMicrotask:typeof op<"u"?function(t){return op.resolve(null).then(t).catch(fw)}:gc;function fw(t){setTimeout(function(){throw t})}function Su(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Xs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xs(e)}function Zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ap(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zi=Math.random().toString(36).slice(2),un="__reactFiber$"+zi,no="__reactProps$"+zi,Cn="__reactContainer$"+zi,yc="__reactEvents$"+zi,pw="__reactListeners$"+zi,mw="__reactHandles$"+zi;function Rr(t){var e=t[un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cn]||n[un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ap(t);t!==null;){if(n=t[un])return n;t=ap(t)}return e}t=n,n=t.parentNode}return null}function Io(t){return t=t[un]||t[Cn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ci(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function wl(t){return t[no]||null}var _c=[],hi=-1;function yr(t){return{current:t}}function ve(t){0>hi||(t.current=_c[hi],_c[hi]=null,hi--)}function me(t,e){hi++,_c[hi]=t.current,t.current=e}var ur={},ct=yr(ur),wt=yr(!1),br=ur;function Ri(t,e){var n=t.type.contextTypes;if(!n)return ur;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Tt(t){return t=t.childContextTypes,t!=null}function Fa(){ve(wt),ve(ct)}function lp(t,e,n){if(ct.current!==ur)throw Error(F(168));me(ct,e),me(wt,n)}function ay(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(F(108,Z0(t)||"Unknown",i));return ke({},n,r)}function Ua(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ur,br=ct.current,me(ct,t),me(wt,wt.current),!0}function up(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=ay(t,e,br),r.__reactInternalMemoizedMergedChildContext=t,ve(wt),ve(ct),me(ct,t)):ve(wt),me(wt,n)}var wn=null,Tl=!1,Iu=!1;function ly(t){wn===null?wn=[t]:wn.push(t)}function gw(t){Tl=!0,ly(t)}function _r(){if(!Iu&&wn!==null){Iu=!0;var t=0,e=he;try{var n=wn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wn=null,Tl=!1}catch(i){throw wn!==null&&(wn=wn.slice(t+1)),Dg(yh,_r),i}finally{he=e,Iu=!1}}return null}var di=[],fi=0,Ba=null,za=0,Mt=[],Ot=0,Lr=null,Tn=1,Sn="";function kr(t,e){di[fi++]=za,di[fi++]=Ba,Ba=t,za=e}function uy(t,e,n){Mt[Ot++]=Tn,Mt[Ot++]=Sn,Mt[Ot++]=Lr,Lr=t;var r=Tn;t=Sn;var i=32-Yt(r)-1;r&=~(1<<i),n+=1;var s=32-Yt(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Tn=1<<32-Yt(e)+i|n<<i|r,Sn=s+t}else Tn=1<<s|n<<i|r,Sn=t}function Ah(t){t.return!==null&&(kr(t,1),uy(t,1,0))}function Ch(t){for(;t===Ba;)Ba=di[--fi],di[fi]=null,za=di[--fi],di[fi]=null;for(;t===Lr;)Lr=Mt[--Ot],Mt[Ot]=null,Sn=Mt[--Ot],Mt[Ot]=null,Tn=Mt[--Ot],Mt[Ot]=null}var Pt=null,Rt=null,Te=!1,Qt=null;function cy(t,e){var n=jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pt=t,Rt=Zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pt=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Lr!==null?{id:Tn,overflow:Sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pt=t,Rt=null,!0):!1;default:return!1}}function vc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ec(t){if(Te){var e=Rt;if(e){var n=e;if(!cp(t,e)){if(vc(t))throw Error(F(418));e=Zn(n.nextSibling);var r=Pt;e&&cp(t,e)?cy(r,n):(t.flags=t.flags&-4097|2,Te=!1,Pt=t)}}else{if(vc(t))throw Error(F(418));t.flags=t.flags&-4097|2,Te=!1,Pt=t}}}function hp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function ta(t){if(t!==Pt)return!1;if(!Te)return hp(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mc(t.type,t.memoizedProps)),e&&(e=Rt)){if(vc(t))throw hy(),Error(F(418));for(;e;)cy(t,e),e=Zn(e.nextSibling)}if(hp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=Zn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=Pt?Zn(t.stateNode.nextSibling):null;return!0}function hy(){for(var t=Rt;t;)t=Zn(t.nextSibling)}function Pi(){Rt=Pt=null,Te=!1}function Rh(t){Qt===null?Qt=[t]:Qt.push(t)}var yw=Dn.ReactCurrentBatchConfig;function vs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function na(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dp(t){var e=t._init;return e(t._payload)}function dy(t){function e(k,E){if(t){var A=k.deletions;A===null?(k.deletions=[E],k.flags|=16):A.push(E)}}function n(k,E){if(!t)return null;for(;E!==null;)e(k,E),E=E.sibling;return null}function r(k,E){for(k=new Map;E!==null;)E.key!==null?k.set(E.key,E):k.set(E.index,E),E=E.sibling;return k}function i(k,E){return k=rr(k,E),k.index=0,k.sibling=null,k}function s(k,E,A){return k.index=A,t?(A=k.alternate,A!==null?(A=A.index,A<E?(k.flags|=2,E):A):(k.flags|=2,E)):(k.flags|=1048576,E)}function a(k){return t&&k.alternate===null&&(k.flags|=2),k}function l(k,E,A,D){return E===null||E.tag!==6?(E=xu(A,k.mode,D),E.return=k,E):(E=i(E,A),E.return=k,E)}function c(k,E,A,D){var B=A.type;return B===oi?f(k,E,A.props.children,D,A.key):E!==null&&(E.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===$n&&dp(B)===E.type)?(D=i(E,A.props),D.ref=vs(k,E,A),D.return=k,D):(D=Sa(A.type,A.key,A.props,null,k.mode,D),D.ref=vs(k,E,A),D.return=k,D)}function h(k,E,A,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==A.containerInfo||E.stateNode.implementation!==A.implementation?(E=Vu(A,k.mode,D),E.return=k,E):(E=i(E,A.children||[]),E.return=k,E)}function f(k,E,A,D,B){return E===null||E.tag!==7?(E=Dr(A,k.mode,D,B),E.return=k,E):(E=i(E,A),E.return=k,E)}function m(k,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return E=xu(""+E,k.mode,A),E.return=k,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wo:return A=Sa(E.type,E.key,E.props,null,k.mode,A),A.ref=vs(k,null,E),A.return=k,A;case si:return E=Vu(E,k.mode,A),E.return=k,E;case $n:var D=E._init;return m(k,D(E._payload),A)}if(Ss(E)||ps(E))return E=Dr(E,k.mode,A,null),E.return=k,E;na(k,E)}return null}function y(k,E,A,D){var B=E!==null?E.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return B!==null?null:l(k,E,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Wo:return A.key===B?c(k,E,A,D):null;case si:return A.key===B?h(k,E,A,D):null;case $n:return B=A._init,y(k,E,B(A._payload),D)}if(Ss(A)||ps(A))return B!==null?null:f(k,E,A,D,null);na(k,A)}return null}function C(k,E,A,D,B){if(typeof D=="string"&&D!==""||typeof D=="number")return k=k.get(A)||null,l(E,k,""+D,B);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Wo:return k=k.get(D.key===null?A:D.key)||null,c(E,k,D,B);case si:return k=k.get(D.key===null?A:D.key)||null,h(E,k,D,B);case $n:var z=D._init;return C(k,E,A,z(D._payload),B)}if(Ss(D)||ps(D))return k=k.get(A)||null,f(E,k,D,B,null);na(E,D)}return null}function x(k,E,A,D){for(var B=null,z=null,_=E,g=E=0,v=null;_!==null&&g<A.length;g++){_.index>g?(v=_,_=null):v=_.sibling;var S=y(k,_,A[g],D);if(S===null){_===null&&(_=v);break}t&&_&&S.alternate===null&&e(k,_),E=s(S,E,g),z===null?B=S:z.sibling=S,z=S,_=v}if(g===A.length)return n(k,_),Te&&kr(k,g),B;if(_===null){for(;g<A.length;g++)_=m(k,A[g],D),_!==null&&(E=s(_,E,g),z===null?B=_:z.sibling=_,z=_);return Te&&kr(k,g),B}for(_=r(k,_);g<A.length;g++)v=C(_,k,g,A[g],D),v!==null&&(t&&v.alternate!==null&&_.delete(v.key===null?g:v.key),E=s(v,E,g),z===null?B=v:z.sibling=v,z=v);return t&&_.forEach(function(I){return e(k,I)}),Te&&kr(k,g),B}function M(k,E,A,D){var B=ps(A);if(typeof B!="function")throw Error(F(150));if(A=B.call(A),A==null)throw Error(F(151));for(var z=B=null,_=E,g=E=0,v=null,S=A.next();_!==null&&!S.done;g++,S=A.next()){_.index>g?(v=_,_=null):v=_.sibling;var I=y(k,_,S.value,D);if(I===null){_===null&&(_=v);break}t&&_&&I.alternate===null&&e(k,_),E=s(I,E,g),z===null?B=I:z.sibling=I,z=I,_=v}if(S.done)return n(k,_),Te&&kr(k,g),B;if(_===null){for(;!S.done;g++,S=A.next())S=m(k,S.value,D),S!==null&&(E=s(S,E,g),z===null?B=S:z.sibling=S,z=S);return Te&&kr(k,g),B}for(_=r(k,_);!S.done;g++,S=A.next())S=C(_,k,g,S.value,D),S!==null&&(t&&S.alternate!==null&&_.delete(S.key===null?g:S.key),E=s(S,E,g),z===null?B=S:z.sibling=S,z=S);return t&&_.forEach(function(R){return e(k,R)}),Te&&kr(k,g),B}function L(k,E,A,D){if(typeof A=="object"&&A!==null&&A.type===oi&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Wo:e:{for(var B=A.key,z=E;z!==null;){if(z.key===B){if(B=A.type,B===oi){if(z.tag===7){n(k,z.sibling),E=i(z,A.props.children),E.return=k,k=E;break e}}else if(z.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===$n&&dp(B)===z.type){n(k,z.sibling),E=i(z,A.props),E.ref=vs(k,z,A),E.return=k,k=E;break e}n(k,z);break}else e(k,z);z=z.sibling}A.type===oi?(E=Dr(A.props.children,k.mode,D,A.key),E.return=k,k=E):(D=Sa(A.type,A.key,A.props,null,k.mode,D),D.ref=vs(k,E,A),D.return=k,k=D)}return a(k);case si:e:{for(z=A.key;E!==null;){if(E.key===z)if(E.tag===4&&E.stateNode.containerInfo===A.containerInfo&&E.stateNode.implementation===A.implementation){n(k,E.sibling),E=i(E,A.children||[]),E.return=k,k=E;break e}else{n(k,E);break}else e(k,E);E=E.sibling}E=Vu(A,k.mode,D),E.return=k,k=E}return a(k);case $n:return z=A._init,L(k,E,z(A._payload),D)}if(Ss(A))return x(k,E,A,D);if(ps(A))return M(k,E,A,D);na(k,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,E!==null&&E.tag===6?(n(k,E.sibling),E=i(E,A),E.return=k,k=E):(n(k,E),E=xu(A,k.mode,D),E.return=k,k=E),a(k)):n(k,E)}return L}var Ni=dy(!0),fy=dy(!1),$a=yr(null),qa=null,pi=null,Ph=null;function Nh(){Ph=pi=qa=null}function xh(t){var e=$a.current;ve($a),t._currentValue=e}function wc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wi(t,e){qa=t,Ph=pi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Ut(t){var e=t._currentValue;if(Ph!==t)if(t={context:t,memoizedValue:e,next:null},pi===null){if(qa===null)throw Error(F(308));pi=t,qa.dependencies={lanes:0,firstContext:t}}else pi=pi.next=t;return e}var Pr=null;function Vh(t){Pr===null?Pr=[t]:Pr.push(t)}function py(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Vh(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rn(t,r)}function Rn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qn=!1;function Dh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function my(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function In(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function er(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rn(t,n)}return i=r.interleaved,i===null?(e.next=e,Vh(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rn(t,n)}function ya(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_h(t,n)}}function fp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wa(t,e,n,r){var i=t.updateQueue;qn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,h=c.next;c.next=null,a===null?s=h:a.next=h,a=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;a=0,f=h=c=null,l=s;do{var y=l.lane,C=l.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,M=l;switch(y=e,C=n,M.tag){case 1:if(x=M.payload,typeof x=="function"){m=x.call(C,m,y);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=M.payload,y=typeof x=="function"?x.call(C,m,y):x,y==null)break e;m=ke({},m,y);break e;case 2:qn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else C={eventTime:C,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=C,c=m):f=f.next=C,a|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(f===null&&(c=m),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Fr|=a,t.lanes=a,t.memoizedState=m}}function pp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(F(191,i));i.call(r)}}}var ko={},hn=yr(ko),ro=yr(ko),io=yr(ko);function Nr(t){if(t===ko)throw Error(F(174));return t}function Mh(t,e){switch(me(io,e),me(ro,t),me(hn,ko),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tc(e,t)}ve(hn),me(hn,e)}function xi(){ve(hn),ve(ro),ve(io)}function gy(t){Nr(io.current);var e=Nr(hn.current),n=tc(e,t.type);e!==n&&(me(ro,t),me(hn,n))}function Oh(t){ro.current===t&&(ve(hn),ve(ro))}var Se=yr(0);function Ha(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ku=[];function bh(){for(var t=0;t<ku.length;t++)ku[t]._workInProgressVersionPrimary=null;ku.length=0}var _a=Dn.ReactCurrentDispatcher,Au=Dn.ReactCurrentBatchConfig,jr=0,Ie=null,Be=null,Qe=null,Ga=!1,Os=!1,so=0,_w=0;function it(){throw Error(F(321))}function Lh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jt(t[n],e[n]))return!1;return!0}function jh(t,e,n,r,i,s){if(jr=s,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_a.current=t===null||t.memoizedState===null?Tw:Sw,t=n(r,i),Os){s=0;do{if(Os=!1,so=0,25<=s)throw Error(F(301));s+=1,Qe=Be=null,e.updateQueue=null,_a.current=Iw,t=n(r,i)}while(Os)}if(_a.current=Qa,e=Be!==null&&Be.next!==null,jr=0,Qe=Be=Ie=null,Ga=!1,e)throw Error(F(300));return t}function Fh(){var t=so!==0;return so=0,t}function an(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Ie.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Bt(){if(Be===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=Qe===null?Ie.memoizedState:Qe.next;if(e!==null)Qe=e,Be=t;else{if(t===null)throw Error(F(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Qe===null?Ie.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function oo(t,e){return typeof e=="function"?e(t):e}function Cu(t){var e=Bt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Be,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,h=s;do{var f=h.lane;if((jr&f)===f)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,Ie.lanes|=f,Fr|=f}h=h.next}while(h!==null&&h!==s);c===null?a=r:c.next=l,Jt(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ie.lanes|=s,Fr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ru(t){var e=Bt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Jt(s,e.memoizedState)||(Et=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function yy(){}function _y(t,e){var n=Ie,r=Bt(),i=e(),s=!Jt(r.memoizedState,i);if(s&&(r.memoizedState=i,Et=!0),r=r.queue,Uh(wy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,ao(9,Ey.bind(null,n,r,i,e),void 0,null),Ke===null)throw Error(F(349));jr&30||vy(n,e,i)}return i}function vy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ey(t,e,n,r){e.value=n,e.getSnapshot=r,Ty(e)&&Sy(t)}function wy(t,e,n){return n(function(){Ty(e)&&Sy(t)})}function Ty(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jt(t,n)}catch{return!0}}function Sy(t){var e=Rn(t,1);e!==null&&Xt(e,t,1,-1)}function mp(t){var e=an();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:t},e.queue=t,t=t.dispatch=ww.bind(null,Ie,t),[e.memoizedState,t]}function ao(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Iy(){return Bt().memoizedState}function va(t,e,n,r){var i=an();Ie.flags|=t,i.memoizedState=ao(1|e,n,void 0,r===void 0?null:r)}function Sl(t,e,n,r){var i=Bt();r=r===void 0?null:r;var s=void 0;if(Be!==null){var a=Be.memoizedState;if(s=a.destroy,r!==null&&Lh(r,a.deps)){i.memoizedState=ao(e,n,s,r);return}}Ie.flags|=t,i.memoizedState=ao(1|e,n,s,r)}function gp(t,e){return va(8390656,8,t,e)}function Uh(t,e){return Sl(2048,8,t,e)}function ky(t,e){return Sl(4,2,t,e)}function Ay(t,e){return Sl(4,4,t,e)}function Cy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ry(t,e,n){return n=n!=null?n.concat([t]):null,Sl(4,4,Cy.bind(null,e,t),n)}function Bh(){}function Py(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ny(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xy(t,e,n){return jr&21?(Jt(n,e)||(n=bg(),Ie.lanes|=n,Fr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function vw(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=Au.transition;Au.transition={};try{t(!1),e()}finally{he=n,Au.transition=r}}function Vy(){return Bt().memoizedState}function Ew(t,e,n){var r=nr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dy(t))My(e,n);else if(n=py(t,e,n,r),n!==null){var i=pt();Xt(n,t,r,i),Oy(n,e,r)}}function ww(t,e,n){var r=nr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dy(t))My(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Jt(l,a)){var c=e.interleaved;c===null?(i.next=i,Vh(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=py(t,e,i,r),n!==null&&(i=pt(),Xt(n,t,r,i),Oy(n,e,r))}}function Dy(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function My(t,e){Os=Ga=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Oy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_h(t,n)}}var Qa={readContext:Ut,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},Tw={readContext:Ut,useCallback:function(t,e){return an().memoizedState=[t,e===void 0?null:e],t},useContext:Ut,useEffect:gp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,va(4194308,4,Cy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return va(4194308,4,t,e)},useInsertionEffect:function(t,e){return va(4,2,t,e)},useMemo:function(t,e){var n=an();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=an();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ew.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=an();return t={current:t},e.memoizedState=t},useState:mp,useDebugValue:Bh,useDeferredValue:function(t){return an().memoizedState=t},useTransition:function(){var t=mp(!1),e=t[0];return t=vw.bind(null,t[1]),an().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,i=an();if(Te){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Ke===null)throw Error(F(349));jr&30||vy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,gp(wy.bind(null,r,s,t),[t]),r.flags|=2048,ao(9,Ey.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=an(),e=Ke.identifierPrefix;if(Te){var n=Sn,r=Tn;n=(r&~(1<<32-Yt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=so++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_w++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Sw={readContext:Ut,useCallback:Py,useContext:Ut,useEffect:Uh,useImperativeHandle:Ry,useInsertionEffect:ky,useLayoutEffect:Ay,useMemo:Ny,useReducer:Cu,useRef:Iy,useState:function(){return Cu(oo)},useDebugValue:Bh,useDeferredValue:function(t){var e=Bt();return xy(e,Be.memoizedState,t)},useTransition:function(){var t=Cu(oo)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:yy,useSyncExternalStore:_y,useId:Vy,unstable_isNewReconciler:!1},Iw={readContext:Ut,useCallback:Py,useContext:Ut,useEffect:Uh,useImperativeHandle:Ry,useInsertionEffect:ky,useLayoutEffect:Ay,useMemo:Ny,useReducer:Ru,useRef:Iy,useState:function(){return Ru(oo)},useDebugValue:Bh,useDeferredValue:function(t){var e=Bt();return Be===null?e.memoizedState=t:xy(e,Be.memoizedState,t)},useTransition:function(){var t=Ru(oo)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:yy,useSyncExternalStore:_y,useId:Vy,unstable_isNewReconciler:!1};function Ht(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Tc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Il={isMounted:function(t){return(t=t._reactInternals)?Wr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),i=nr(t),s=In(r,i);s.payload=e,n!=null&&(s.callback=n),e=er(t,s,i),e!==null&&(Xt(e,t,i,r),ya(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),i=nr(t),s=In(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=er(t,s,i),e!==null&&(Xt(e,t,i,r),ya(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=nr(t),i=In(n,r);i.tag=2,e!=null&&(i.callback=e),e=er(t,i,r),e!==null&&(Xt(e,t,r,n),ya(e,t,r))}};function yp(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Zs(n,r)||!Zs(i,s):!0}function by(t,e,n){var r=!1,i=ur,s=e.contextType;return typeof s=="object"&&s!==null?s=Ut(s):(i=Tt(e)?br:ct.current,r=e.contextTypes,s=(r=r!=null)?Ri(t,i):ur),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Il,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function _p(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Il.enqueueReplaceState(e,e.state,null)}function Sc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Dh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ut(s):(s=Tt(e)?br:ct.current,i.context=Ri(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Tc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Il.enqueueReplaceState(i,i.state,null),Wa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Vi(t,e){try{var n="",r=e;do n+=J0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Pu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ic(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kw=typeof WeakMap=="function"?WeakMap:Map;function Ly(t,e,n){n=In(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ya||(Ya=!0,Mc=r),Ic(t,e)},n}function jy(t,e,n){n=In(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ic(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ic(t,e),typeof r!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function vp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new kw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Fw.bind(null,t,e,n),e.then(t,t))}function Ep(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=In(-1,1),e.tag=2,er(n,e,1))),n.lanes|=1),t)}var Aw=Dn.ReactCurrentOwner,Et=!1;function ft(t,e,n,r){e.child=t===null?fy(e,null,n,r):Ni(e,t.child,n,r)}function Tp(t,e,n,r,i){n=n.render;var s=e.ref;return wi(e,i),r=jh(t,e,n,r,s,i),n=Fh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pn(t,e,i)):(Te&&n&&Ah(e),e.flags|=1,ft(t,e,r,i),e.child)}function Sp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Kh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Fy(t,e,s,r,i)):(t=Sa(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Zs,n(a,r)&&t.ref===e.ref)return Pn(t,e,i)}return e.flags|=1,t=rr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Fy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Zs(s,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,Pn(t,e,i)}return kc(t,e,n,r,i)}function Uy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(gi,Ct),Ct|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(gi,Ct),Ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,me(gi,Ct),Ct|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,me(gi,Ct),Ct|=r;return ft(t,e,i,n),e.child}function By(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kc(t,e,n,r,i){var s=Tt(n)?br:ct.current;return s=Ri(e,s),wi(e,i),n=jh(t,e,n,r,s,i),r=Fh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pn(t,e,i)):(Te&&r&&Ah(e),e.flags|=1,ft(t,e,n,i),e.child)}function Ip(t,e,n,r,i){if(Tt(n)){var s=!0;Ua(e)}else s=!1;if(wi(e,i),e.stateNode===null)Ea(t,e),by(e,n,r),Sc(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ut(h):(h=Tt(n)?br:ct.current,h=Ri(e,h));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==h)&&_p(e,a,r,h),qn=!1;var y=e.memoizedState;a.state=y,Wa(e,r,a,i),c=e.memoizedState,l!==r||y!==c||wt.current||qn?(typeof f=="function"&&(Tc(e,n,f,r),c=e.memoizedState),(l=qn||yp(e,n,l,r,y,c,h))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,my(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Ht(e.type,l),a.props=h,m=e.pendingProps,y=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ut(c):(c=Tt(n)?br:ct.current,c=Ri(e,c));var C=n.getDerivedStateFromProps;(f=typeof C=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||y!==c)&&_p(e,a,r,c),qn=!1,y=e.memoizedState,a.state=y,Wa(e,r,a,i);var x=e.memoizedState;l!==m||y!==x||wt.current||qn?(typeof C=="function"&&(Tc(e,n,C,r),x=e.memoizedState),(h=qn||yp(e,n,h,r,y,x,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),a.props=r,a.state=x,a.context=c,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Ac(t,e,n,r,s,i)}function Ac(t,e,n,r,i,s){By(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&up(e,n,!1),Pn(t,e,s);r=e.stateNode,Aw.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ni(e,t.child,null,s),e.child=Ni(e,null,l,s)):ft(t,e,l,s),e.memoizedState=r.state,i&&up(e,n,!0),e.child}function zy(t){var e=t.stateNode;e.pendingContext?lp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lp(t,e.context,!1),Mh(t,e.containerInfo)}function kp(t,e,n,r,i){return Pi(),Rh(i),e.flags|=256,ft(t,e,n,r),e.child}var Cc={dehydrated:null,treeContext:null,retryLane:0};function Rc(t){return{baseLanes:t,cachePool:null,transitions:null}}function $y(t,e,n){var r=e.pendingProps,i=Se.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),me(Se,i&1),t===null)return Ec(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Cl(a,r,0,null),t=Dr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Rc(n),e.memoizedState=Cc,t):zh(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Cw(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=rr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=rr(l,s):(s=Dr(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Rc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=Cc,r}return s=t.child,t=s.sibling,r=rr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zh(t,e){return e=Cl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ra(t,e,n,r){return r!==null&&Rh(r),Ni(e,t.child,null,n),t=zh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Cw(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Pu(Error(F(422))),ra(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Cl({mode:"visible",children:r.children},i,0,null),s=Dr(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ni(e,t.child,null,a),e.child.memoizedState=Rc(a),e.memoizedState=Cc,s);if(!(e.mode&1))return ra(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(F(419)),r=Pu(s,r,void 0),ra(t,e,a,r)}if(l=(a&t.childLanes)!==0,Et||l){if(r=Ke,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rn(t,i),Xt(r,t,i,-1))}return Qh(),r=Pu(Error(F(421))),ra(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Uw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Rt=Zn(i.nextSibling),Pt=e,Te=!0,Qt=null,t!==null&&(Mt[Ot++]=Tn,Mt[Ot++]=Sn,Mt[Ot++]=Lr,Tn=t.id,Sn=t.overflow,Lr=e),e=zh(e,r.children),e.flags|=4096,e)}function Ap(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wc(t.return,e,n)}function Nu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qy(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ft(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ap(t,n,e);else if(t.tag===19)Ap(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(Se,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ha(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Nu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ha(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Nu(e,!0,n,null,s);break;case"together":Nu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ea(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Rw(t,e,n){switch(e.tag){case 3:zy(e),Pi();break;case 5:gy(e);break;case 1:Tt(e.type)&&Ua(e);break;case 4:Mh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;me($a,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?$y(t,e,n):(me(Se,Se.current&1),t=Pn(t,e,n),t!==null?t.sibling:null);me(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),me(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,Uy(t,e,n)}return Pn(t,e,n)}var Wy,Pc,Hy,Gy;Wy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pc=function(){};Hy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Nr(hn.current);var s=null;switch(n){case"input":i=Xu(t,i),r=Xu(t,r),s=[];break;case"select":i=ke({},i,{value:void 0}),r=ke({},r,{value:void 0}),s=[];break;case"textarea":i=ec(t,i),r=ec(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ja)}nc(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Hs.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Hs.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ye("scroll",t),s||l===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Gy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Es(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function st(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Pw(t,e,n){var r=e.pendingProps;switch(Ch(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(e),null;case 1:return Tt(e.type)&&Fa(),st(e),null;case 3:return r=e.stateNode,xi(),ve(wt),ve(ct),bh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ta(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qt!==null&&(Lc(Qt),Qt=null))),Pc(t,e),st(e),null;case 5:Oh(e);var i=Nr(io.current);if(n=e.type,t!==null&&e.stateNode!=null)Hy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return st(e),null}if(t=Nr(hn.current),ta(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[un]=e,r[no]=s,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(i=0;i<ks.length;i++)ye(ks[i],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":Of(r,s),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ye("invalid",r);break;case"textarea":Lf(r,s),ye("invalid",r)}nc(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ea(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ea(r.textContent,l,t),i=["children",""+l]):Hs.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ye("scroll",r)}switch(n){case"input":Ho(r),bf(r,s,!0);break;case"textarea":Ho(r),jf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ja)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[un]=e,t[no]=r,Wy(t,e,!1,!1),e.stateNode=t;e:{switch(a=rc(n,r),n){case"dialog":ye("cancel",t),ye("close",t),i=r;break;case"iframe":case"object":case"embed":ye("load",t),i=r;break;case"video":case"audio":for(i=0;i<ks.length;i++)ye(ks[i],t);i=r;break;case"source":ye("error",t),i=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),i=r;break;case"details":ye("toggle",t),i=r;break;case"input":Of(t,r),i=Xu(t,r),ye("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ke({},r,{value:void 0}),ye("invalid",t);break;case"textarea":Lf(t,r),i=ec(t,r),ye("invalid",t);break;default:i=r}nc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Ig(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Tg(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Gs(t,c):typeof c=="number"&&Gs(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hs.hasOwnProperty(s)?c!=null&&s==="onScroll"&&ye("scroll",t):c!=null&&dh(t,s,c,a))}switch(n){case"input":Ho(t),bf(t,r,!1);break;case"textarea":Ho(t),jf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+lr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?yi(t,!!r.multiple,s,!1):r.defaultValue!=null&&yi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ja)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return st(e),null;case 6:if(t&&e.stateNode!=null)Gy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Nr(io.current),Nr(hn.current),ta(e)){if(r=e.stateNode,n=e.memoizedProps,r[un]=e,(s=r.nodeValue!==n)&&(t=Pt,t!==null))switch(t.tag){case 3:ea(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ea(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=e,e.stateNode=r}return st(e),null;case 13:if(ve(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Rt!==null&&e.mode&1&&!(e.flags&128))hy(),Pi(),e.flags|=98560,s=!1;else if(s=ta(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(F(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[un]=e}else Pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;st(e),s=!1}else Qt!==null&&(Lc(Qt),Qt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?ze===0&&(ze=3):Qh())),e.updateQueue!==null&&(e.flags|=4),st(e),null);case 4:return xi(),Pc(t,e),t===null&&eo(e.stateNode.containerInfo),st(e),null;case 10:return xh(e.type._context),st(e),null;case 17:return Tt(e.type)&&Fa(),st(e),null;case 19:if(ve(Se),s=e.memoizedState,s===null)return st(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Es(s,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ha(t),a!==null){for(e.flags|=128,Es(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(Se,Se.current&1|2),e.child}t=t.sibling}s.tail!==null&&De()>Di&&(e.flags|=128,r=!0,Es(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ha(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Es(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Te)return st(e),null}else 2*De()-s.renderingStartTime>Di&&n!==1073741824&&(e.flags|=128,r=!0,Es(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=De(),e.sibling=null,n=Se.current,me(Se,r?n&1|2:n&1),e):(st(e),null);case 22:case 23:return Gh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ct&1073741824&&(st(e),e.subtreeFlags&6&&(e.flags|=8192)):st(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function Nw(t,e){switch(Ch(e),e.tag){case 1:return Tt(e.type)&&Fa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xi(),ve(wt),ve(ct),bh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Oh(e),null;case 13:if(ve(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Pi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ve(Se),null;case 4:return xi(),null;case 10:return xh(e.type._context),null;case 22:case 23:return Gh(),null;case 24:return null;default:return null}}var ia=!1,lt=!1,xw=typeof WeakSet=="function"?WeakSet:Set,G=null;function mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function Nc(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var Cp=!1;function Vw(t,e){if(fc=Oa,t=Jg(),kh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,h=0,f=0,m=t,y=null;t:for(;;){for(var C;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==s||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(C=m.firstChild)!==null;)y=m,m=C;for(;;){if(m===t)break t;if(y===n&&++h===i&&(l=a),y===s&&++f===r&&(c=a),(C=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=C}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pc={focusedElem:t,selectionRange:n},Oa=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var M=x.memoizedProps,L=x.memoizedState,k=e.stateNode,E=k.getSnapshotBeforeUpdate(e.elementType===e.type?M:Ht(e.type,M),L);k.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(D){Ne(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return x=Cp,Cp=!1,x}function bs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Nc(e,n,s)}i=i.next}while(i!==r)}}function kl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qy(t){var e=t.alternate;e!==null&&(t.alternate=null,Qy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[un],delete e[no],delete e[yc],delete e[pw],delete e[mw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ky(t){return t.tag===5||t.tag===3||t.tag===4}function Rp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ky(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ja));else if(r!==4&&(t=t.child,t!==null))for(Vc(t,e,n),t=t.sibling;t!==null;)Vc(t,e,n),t=t.sibling}function Dc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dc(t,e,n),t=t.sibling;t!==null;)Dc(t,e,n),t=t.sibling}var Ye=null,Gt=!1;function zn(t,e,n){for(n=n.child;n!==null;)Yy(t,e,n),n=n.sibling}function Yy(t,e,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(yl,n)}catch{}switch(n.tag){case 5:lt||mi(n,e);case 6:var r=Ye,i=Gt;Ye=null,zn(t,e,n),Ye=r,Gt=i,Ye!==null&&(Gt?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Gt?(t=Ye,n=n.stateNode,t.nodeType===8?Su(t.parentNode,n):t.nodeType===1&&Su(t,n),Xs(t)):Su(Ye,n.stateNode));break;case 4:r=Ye,i=Gt,Ye=n.stateNode.containerInfo,Gt=!0,zn(t,e,n),Ye=r,Gt=i;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Nc(n,e,a),i=i.next}while(i!==r)}zn(t,e,n);break;case 1:if(!lt&&(mi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ne(n,e,l)}zn(t,e,n);break;case 21:zn(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,zn(t,e,n),lt=r):zn(t,e,n);break;default:zn(t,e,n)}}function Pp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xw),e.forEach(function(r){var i=Bw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ye=l.stateNode,Gt=!1;break e;case 3:Ye=l.stateNode.containerInfo,Gt=!0;break e;case 4:Ye=l.stateNode.containerInfo,Gt=!0;break e}l=l.return}if(Ye===null)throw Error(F(160));Yy(s,a,i),Ye=null,Gt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Ne(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xy(e,t),e=e.sibling}function Xy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wt(e,t),on(t),r&4){try{bs(3,t,t.return),kl(3,t)}catch(M){Ne(t,t.return,M)}try{bs(5,t,t.return)}catch(M){Ne(t,t.return,M)}}break;case 1:Wt(e,t),on(t),r&512&&n!==null&&mi(n,n.return);break;case 5:if(Wt(e,t),on(t),r&512&&n!==null&&mi(n,n.return),t.flags&32){var i=t.stateNode;try{Gs(i,"")}catch(M){Ne(t,t.return,M)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&vg(i,s),rc(l,a);var h=rc(l,s);for(a=0;a<c.length;a+=2){var f=c[a],m=c[a+1];f==="style"?Ig(i,m):f==="dangerouslySetInnerHTML"?Tg(i,m):f==="children"?Gs(i,m):dh(i,f,m,h)}switch(l){case"input":Ju(i,s);break;case"textarea":Eg(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var C=s.value;C!=null?yi(i,!!s.multiple,C,!1):y!==!!s.multiple&&(s.defaultValue!=null?yi(i,!!s.multiple,s.defaultValue,!0):yi(i,!!s.multiple,s.multiple?[]:"",!1))}i[no]=s}catch(M){Ne(t,t.return,M)}}break;case 6:if(Wt(e,t),on(t),r&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(M){Ne(t,t.return,M)}}break;case 3:if(Wt(e,t),on(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xs(e.containerInfo)}catch(M){Ne(t,t.return,M)}break;case 4:Wt(e,t),on(t);break;case 13:Wt(e,t),on(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Wh=De())),r&4&&Pp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(h=lt)||f,Wt(e,t),lt=h):Wt(e,t),on(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(G=t,f=t.child;f!==null;){for(m=G=f;G!==null;){switch(y=G,C=y.child,y.tag){case 0:case 11:case 14:case 15:bs(4,y,y.return);break;case 1:mi(y,y.return);var x=y.stateNode;if(typeof x.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(M){Ne(r,n,M)}}break;case 5:mi(y,y.return);break;case 22:if(y.memoizedState!==null){xp(m);continue}}C!==null?(C.return=y,G=C):xp(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Sg("display",a))}catch(M){Ne(t,t.return,M)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(M){Ne(t,t.return,M)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Wt(e,t),on(t),r&4&&Pp(t);break;case 21:break;default:Wt(e,t),on(t)}}function on(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ky(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Gs(i,""),r.flags&=-33);var s=Rp(t);Dc(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Rp(t);Vc(t,l,a);break;default:throw Error(F(161))}}catch(c){Ne(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Dw(t,e,n){G=t,Jy(t)}function Jy(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||ia;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||lt;l=ia;var h=lt;if(ia=a,(lt=c)&&!h)for(G=i;G!==null;)a=G,c=a.child,a.tag===22&&a.memoizedState!==null?Vp(i):c!==null?(c.return=a,G=c):Vp(i);for(;s!==null;)G=s,Jy(s),s=s.sibling;G=i,ia=l,lt=h}Np(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):Np(t)}}function Np(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||kl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ht(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&pp(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}pp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Xs(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}lt||e.flags&512&&xc(e)}catch(y){Ne(e,e.return,y)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function xp(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Vp(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kl(4,e)}catch(c){Ne(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Ne(e,i,c)}}var s=e.return;try{xc(e)}catch(c){Ne(e,s,c)}break;case 5:var a=e.return;try{xc(e)}catch(c){Ne(e,a,c)}}}catch(c){Ne(e,e.return,c)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var Mw=Math.ceil,Ka=Dn.ReactCurrentDispatcher,$h=Dn.ReactCurrentOwner,Ft=Dn.ReactCurrentBatchConfig,le=0,Ke=null,be=null,Ze=0,Ct=0,gi=yr(0),ze=0,lo=null,Fr=0,Al=0,qh=0,Ls=null,vt=null,Wh=0,Di=1/0,En=null,Ya=!1,Mc=null,tr=null,sa=!1,Qn=null,Xa=0,js=0,Oc=null,wa=-1,Ta=0;function pt(){return le&6?De():wa!==-1?wa:wa=De()}function nr(t){return t.mode&1?le&2&&Ze!==0?Ze&-Ze:yw.transition!==null?(Ta===0&&(Ta=bg()),Ta):(t=he,t!==0||(t=window.event,t=t===void 0?16:$g(t.type)),t):1}function Xt(t,e,n,r){if(50<js)throw js=0,Oc=null,Error(F(185));To(t,n,r),(!(le&2)||t!==Ke)&&(t===Ke&&(!(le&2)&&(Al|=n),ze===4&&Hn(t,Ze)),St(t,r),n===1&&le===0&&!(e.mode&1)&&(Di=De()+500,Tl&&_r()))}function St(t,e){var n=t.callbackNode;yE(t,e);var r=Ma(t,t===Ke?Ze:0);if(r===0)n!==null&&Bf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Bf(n),e===1)t.tag===0?gw(Dp.bind(null,t)):ly(Dp.bind(null,t)),dw(function(){!(le&6)&&_r()}),n=null;else{switch(Lg(r)){case 1:n=yh;break;case 4:n=Mg;break;case 16:n=Da;break;case 536870912:n=Og;break;default:n=Da}n=o_(n,Zy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zy(t,e){if(wa=-1,Ta=0,le&6)throw Error(F(327));var n=t.callbackNode;if(Ti()&&t.callbackNode!==n)return null;var r=Ma(t,t===Ke?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ja(t,r);else{e=r;var i=le;le|=2;var s=t_();(Ke!==t||Ze!==e)&&(En=null,Di=De()+500,Vr(t,e));do try{Lw();break}catch(l){e_(t,l)}while(!0);Nh(),Ka.current=s,le=i,be!==null?e=0:(Ke=null,Ze=0,e=ze)}if(e!==0){if(e===2&&(i=lc(t),i!==0&&(r=i,e=bc(t,i))),e===1)throw n=lo,Vr(t,0),Hn(t,r),St(t,De()),n;if(e===6)Hn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Ow(i)&&(e=Ja(t,r),e===2&&(s=lc(t),s!==0&&(r=s,e=bc(t,s))),e===1))throw n=lo,Vr(t,0),Hn(t,r),St(t,De()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Ar(t,vt,En);break;case 3:if(Hn(t,r),(r&130023424)===r&&(e=Wh+500-De(),10<e)){if(Ma(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=gc(Ar.bind(null,t,vt,En),e);break}Ar(t,vt,En);break;case 4:if(Hn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Yt(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mw(r/1960))-r,10<r){t.timeoutHandle=gc(Ar.bind(null,t,vt,En),r);break}Ar(t,vt,En);break;case 5:Ar(t,vt,En);break;default:throw Error(F(329))}}}return St(t,De()),t.callbackNode===n?Zy.bind(null,t):null}function bc(t,e){var n=Ls;return t.current.memoizedState.isDehydrated&&(Vr(t,e).flags|=256),t=Ja(t,e),t!==2&&(e=vt,vt=n,e!==null&&Lc(e)),t}function Lc(t){vt===null?vt=t:vt.push.apply(vt,t)}function Ow(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hn(t,e){for(e&=~qh,e&=~Al,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yt(e),r=1<<n;t[n]=-1,e&=~r}}function Dp(t){if(le&6)throw Error(F(327));Ti();var e=Ma(t,0);if(!(e&1))return St(t,De()),null;var n=Ja(t,e);if(t.tag!==0&&n===2){var r=lc(t);r!==0&&(e=r,n=bc(t,r))}if(n===1)throw n=lo,Vr(t,0),Hn(t,e),St(t,De()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ar(t,vt,En),St(t,De()),null}function Hh(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Di=De()+500,Tl&&_r())}}function Ur(t){Qn!==null&&Qn.tag===0&&!(le&6)&&Ti();var e=le;le|=1;var n=Ft.transition,r=he;try{if(Ft.transition=null,he=1,t)return t()}finally{he=r,Ft.transition=n,le=e,!(le&6)&&_r()}}function Gh(){Ct=gi.current,ve(gi)}function Vr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hw(n)),be!==null)for(n=be.return;n!==null;){var r=n;switch(Ch(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fa();break;case 3:xi(),ve(wt),ve(ct),bh();break;case 5:Oh(r);break;case 4:xi();break;case 13:ve(Se);break;case 19:ve(Se);break;case 10:xh(r.type._context);break;case 22:case 23:Gh()}n=n.return}if(Ke=t,be=t=rr(t.current,null),Ze=Ct=e,ze=0,lo=null,qh=Al=Fr=0,vt=Ls=null,Pr!==null){for(e=0;e<Pr.length;e++)if(n=Pr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Pr=null}return t}function e_(t,e){do{var n=be;try{if(Nh(),_a.current=Qa,Ga){for(var r=Ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ga=!1}if(jr=0,Qe=Be=Ie=null,Os=!1,so=0,$h.current=null,n===null||n.return===null){ze=1,lo=e,be=null;break}e:{var s=t,a=n.return,l=n,c=e;if(e=Ze,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var C=Ep(a);if(C!==null){C.flags&=-257,wp(C,a,l,s,e),C.mode&1&&vp(s,h,e),e=C,c=h;var x=e.updateQueue;if(x===null){var M=new Set;M.add(c),e.updateQueue=M}else x.add(c);break e}else{if(!(e&1)){vp(s,h,e),Qh();break e}c=Error(F(426))}}else if(Te&&l.mode&1){var L=Ep(a);if(L!==null){!(L.flags&65536)&&(L.flags|=256),wp(L,a,l,s,e),Rh(Vi(c,l));break e}}s=c=Vi(c,l),ze!==4&&(ze=2),Ls===null?Ls=[s]:Ls.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var k=Ly(s,c,e);fp(s,k);break e;case 1:l=c;var E=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(tr===null||!tr.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=jy(s,l,e);fp(s,D);break e}}s=s.return}while(s!==null)}r_(n)}catch(B){e=B,be===n&&n!==null&&(be=n=n.return);continue}break}while(!0)}function t_(){var t=Ka.current;return Ka.current=Qa,t===null?Qa:t}function Qh(){(ze===0||ze===3||ze===2)&&(ze=4),Ke===null||!(Fr&268435455)&&!(Al&268435455)||Hn(Ke,Ze)}function Ja(t,e){var n=le;le|=2;var r=t_();(Ke!==t||Ze!==e)&&(En=null,Vr(t,e));do try{bw();break}catch(i){e_(t,i)}while(!0);if(Nh(),le=n,Ka.current=r,be!==null)throw Error(F(261));return Ke=null,Ze=0,ze}function bw(){for(;be!==null;)n_(be)}function Lw(){for(;be!==null&&!lE();)n_(be)}function n_(t){var e=s_(t.alternate,t,Ct);t.memoizedProps=t.pendingProps,e===null?r_(t):be=e,$h.current=null}function r_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Nw(n,e),n!==null){n.flags&=32767,be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,be=null;return}}else if(n=Pw(n,e,Ct),n!==null){be=n;return}if(e=e.sibling,e!==null){be=e;return}be=e=t}while(e!==null);ze===0&&(ze=5)}function Ar(t,e,n){var r=he,i=Ft.transition;try{Ft.transition=null,he=1,jw(t,e,n,r)}finally{Ft.transition=i,he=r}return null}function jw(t,e,n,r){do Ti();while(Qn!==null);if(le&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(_E(t,s),t===Ke&&(be=Ke=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sa||(sa=!0,o_(Da,function(){return Ti(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ft.transition,Ft.transition=null;var a=he;he=1;var l=le;le|=4,$h.current=null,Vw(t,n),Xy(n,t),iw(pc),Oa=!!fc,pc=fc=null,t.current=n,Dw(n),uE(),le=l,he=a,Ft.transition=s}else t.current=n;if(sa&&(sa=!1,Qn=t,Xa=i),s=t.pendingLanes,s===0&&(tr=null),dE(n.stateNode),St(t,De()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ya)throw Ya=!1,t=Mc,Mc=null,t;return Xa&1&&t.tag!==0&&Ti(),s=t.pendingLanes,s&1?t===Oc?js++:(js=0,Oc=t):js=0,_r(),null}function Ti(){if(Qn!==null){var t=Lg(Xa),e=Ft.transition,n=he;try{if(Ft.transition=null,he=16>t?16:t,Qn===null)var r=!1;else{if(t=Qn,Qn=null,Xa=0,le&6)throw Error(F(331));var i=le;for(le|=4,G=t.current;G!==null;){var s=G,a=s.child;if(G.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(G=h;G!==null;){var f=G;switch(f.tag){case 0:case 11:case 15:bs(8,f,s)}var m=f.child;if(m!==null)m.return=f,G=m;else for(;G!==null;){f=G;var y=f.sibling,C=f.return;if(Qy(f),f===h){G=null;break}if(y!==null){y.return=C,G=y;break}G=C}}}var x=s.alternate;if(x!==null){var M=x.child;if(M!==null){x.child=null;do{var L=M.sibling;M.sibling=null,M=L}while(M!==null)}}G=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,G=a;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bs(9,s,s.return)}var k=s.sibling;if(k!==null){k.return=s.return,G=k;break e}G=s.return}}var E=t.current;for(G=E;G!==null;){a=G;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,G=A;else e:for(a=E;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:kl(9,l)}}catch(B){Ne(l,l.return,B)}if(l===a){G=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,G=D;break e}G=l.return}}if(le=i,_r(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(yl,t)}catch{}r=!0}return r}finally{he=n,Ft.transition=e}}return!1}function Mp(t,e,n){e=Vi(n,e),e=Ly(t,e,1),t=er(t,e,1),e=pt(),t!==null&&(To(t,1,e),St(t,e))}function Ne(t,e,n){if(t.tag===3)Mp(t,t,n);else for(;e!==null;){if(e.tag===3){Mp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tr===null||!tr.has(r))){t=Vi(n,t),t=jy(e,t,1),e=er(e,t,1),t=pt(),e!==null&&(To(e,1,t),St(e,t));break}}e=e.return}}function Fw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(Ze&n)===n&&(ze===4||ze===3&&(Ze&130023424)===Ze&&500>De()-Wh?Vr(t,0):qh|=n),St(t,e)}function i_(t,e){e===0&&(t.mode&1?(e=Ko,Ko<<=1,!(Ko&130023424)&&(Ko=4194304)):e=1);var n=pt();t=Rn(t,e),t!==null&&(To(t,e,n),St(t,n))}function Uw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),i_(t,n)}function Bw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),i_(t,n)}var s_;s_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,Rw(t,e,n);Et=!!(t.flags&131072)}else Et=!1,Te&&e.flags&1048576&&uy(e,za,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ea(t,e),t=e.pendingProps;var i=Ri(e,ct.current);wi(e,n),i=jh(null,e,r,t,i,n);var s=Fh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)?(s=!0,Ua(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Dh(e),i.updater=Il,e.stateNode=i,i._reactInternals=e,Sc(e,r,t,n),e=Ac(null,e,r,!0,s,n)):(e.tag=0,Te&&s&&Ah(e),ft(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ea(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=$w(r),t=Ht(r,t),i){case 0:e=kc(null,e,r,t,n);break e;case 1:e=Ip(null,e,r,t,n);break e;case 11:e=Tp(null,e,r,t,n);break e;case 14:e=Sp(null,e,r,Ht(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ht(r,i),kc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ht(r,i),Ip(t,e,r,i,n);case 3:e:{if(zy(e),t===null)throw Error(F(387));r=e.pendingProps,s=e.memoizedState,i=s.element,my(t,e),Wa(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Vi(Error(F(423)),e),e=kp(t,e,r,n,i);break e}else if(r!==i){i=Vi(Error(F(424)),e),e=kp(t,e,r,n,i);break e}else for(Rt=Zn(e.stateNode.containerInfo.firstChild),Pt=e,Te=!0,Qt=null,n=fy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pi(),r===i){e=Pn(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return gy(e),t===null&&Ec(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,mc(r,i)?a=null:s!==null&&mc(r,s)&&(e.flags|=32),By(t,e),ft(t,e,a,n),e.child;case 6:return t===null&&Ec(e),null;case 13:return $y(t,e,n);case 4:return Mh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ni(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ht(r,i),Tp(t,e,r,i,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,me($a,r._currentValue),r._currentValue=a,s!==null)if(Jt(s.value,a)){if(s.children===i.children&&!wt.current){e=Pn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=In(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?c.next=c:(c.next=f.next,f.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),wc(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(F(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),wc(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}ft(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,wi(e,n),i=Ut(i),r=r(i),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,i=Ht(r,e.pendingProps),i=Ht(r.type,i),Sp(t,e,r,i,n);case 15:return Fy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ht(r,i),Ea(t,e),e.tag=1,Tt(r)?(t=!0,Ua(e)):t=!1,wi(e,n),by(e,r,i),Sc(e,r,i,n),Ac(null,e,r,!0,t,n);case 19:return qy(t,e,n);case 22:return Uy(t,e,n)}throw Error(F(156,e.tag))};function o_(t,e){return Dg(t,e)}function zw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(t,e,n,r){return new zw(t,e,n,r)}function Kh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $w(t){if(typeof t=="function")return Kh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ph)return 11;if(t===mh)return 14}return 2}function rr(t,e){var n=t.alternate;return n===null?(n=jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sa(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Kh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case oi:return Dr(n.children,i,s,e);case fh:a=8,i|=8;break;case Gu:return t=jt(12,n,e,i|2),t.elementType=Gu,t.lanes=s,t;case Qu:return t=jt(13,n,e,i),t.elementType=Qu,t.lanes=s,t;case Ku:return t=jt(19,n,e,i),t.elementType=Ku,t.lanes=s,t;case gg:return Cl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pg:a=10;break e;case mg:a=9;break e;case ph:a=11;break e;case mh:a=14;break e;case $n:a=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=jt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Dr(t,e,n,r){return t=jt(7,t,r,e),t.lanes=n,t}function Cl(t,e,n,r){return t=jt(22,t,r,e),t.elementType=gg,t.lanes=n,t.stateNode={isHidden:!1},t}function xu(t,e,n){return t=jt(6,t,null,e),t.lanes=n,t}function Vu(t,e,n){return e=jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=du(0),this.expirationTimes=du(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=du(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Yh(t,e,n,r,i,s,a,l,c){return t=new qw(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=jt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dh(s),t}function Ww(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:si,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function a_(t){if(!t)return ur;t=t._reactInternals;e:{if(Wr(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Tt(n))return ay(t,n,e)}return e}function l_(t,e,n,r,i,s,a,l,c){return t=Yh(n,r,!0,t,i,s,a,l,c),t.context=a_(null),n=t.current,r=pt(),i=nr(n),s=In(r,i),s.callback=e??null,er(n,s,i),t.current.lanes=i,To(t,i,r),St(t,r),t}function Rl(t,e,n,r){var i=e.current,s=pt(),a=nr(i);return n=a_(n),e.context===null?e.context=n:e.pendingContext=n,e=In(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=er(i,e,a),t!==null&&(Xt(t,i,a,s),ya(t,i,a)),a}function Za(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Op(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xh(t,e){Op(t,e),(t=t.alternate)&&Op(t,e)}function Hw(){return null}var u_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jh(t){this._internalRoot=t}Pl.prototype.render=Jh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Rl(t,e,null,null)};Pl.prototype.unmount=Jh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ur(function(){Rl(null,t,null,null)}),e[Cn]=null}};function Pl(t){this._internalRoot=t}Pl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ug();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wn.length&&e!==0&&e<Wn[n].priority;n++);Wn.splice(n,0,t),n===0&&zg(t)}};function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bp(){}function Gw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Za(a);s.call(h)}}var a=l_(e,r,t,0,null,!1,!1,"",bp);return t._reactRootContainer=a,t[Cn]=a.current,eo(t.nodeType===8?t.parentNode:t),Ur(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Za(c);l.call(h)}}var c=Yh(t,0,!1,null,null,!1,!1,"",bp);return t._reactRootContainer=c,t[Cn]=c.current,eo(t.nodeType===8?t.parentNode:t),Ur(function(){Rl(e,c,n,r)}),c}function xl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=Za(a);l.call(c)}}Rl(e,a,t,i)}else a=Gw(n,e,t,i,r);return Za(a)}jg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Is(e.pendingLanes);n!==0&&(_h(e,n|1),St(e,De()),!(le&6)&&(Di=De()+500,_r()))}break;case 13:Ur(function(){var r=Rn(t,1);if(r!==null){var i=pt();Xt(r,t,1,i)}}),Xh(t,1)}};vh=function(t){if(t.tag===13){var e=Rn(t,134217728);if(e!==null){var n=pt();Xt(e,t,134217728,n)}Xh(t,134217728)}};Fg=function(t){if(t.tag===13){var e=nr(t),n=Rn(t,e);if(n!==null){var r=pt();Xt(n,t,e,r)}Xh(t,e)}};Ug=function(){return he};Bg=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};sc=function(t,e,n){switch(e){case"input":if(Ju(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wl(r);if(!i)throw Error(F(90));_g(r),Ju(r,i)}}}break;case"textarea":Eg(t,n);break;case"select":e=n.value,e!=null&&yi(t,!!n.multiple,e,!1)}};Cg=Hh;Rg=Ur;var Qw={usingClientEntryPoint:!1,Events:[Io,ci,wl,kg,Ag,Hh]},ws={findFiberByHostInstance:Rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kw={bundleType:ws.bundleType,version:ws.version,rendererPackageName:ws.rendererPackageName,rendererConfig:ws.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xg(t),t===null?null:t.stateNode},findFiberByHostInstance:ws.findFiberByHostInstance||Hw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oa.isDisabled&&oa.supportsFiber)try{yl=oa.inject(Kw),cn=oa}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qw;xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zh(e))throw Error(F(200));return Ww(t,e,null,n)};xt.createRoot=function(t,e){if(!Zh(t))throw Error(F(299));var n=!1,r="",i=u_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Yh(t,1,!1,null,null,n,!1,r,i),t[Cn]=e.current,eo(t.nodeType===8?t.parentNode:t),new Jh(e)};xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=xg(e),t=t===null?null:t.stateNode,t};xt.flushSync=function(t){return Ur(t)};xt.hydrate=function(t,e,n){if(!Nl(e))throw Error(F(200));return xl(null,t,e,!0,n)};xt.hydrateRoot=function(t,e,n){if(!Zh(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=u_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=l_(e,null,t,1,n??null,i,!1,s,a),t[Cn]=e.current,eo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Pl(e)};xt.render=function(t,e,n){if(!Nl(e))throw Error(F(200));return xl(null,t,e,!1,n)};xt.unmountComponentAtNode=function(t){if(!Nl(t))throw Error(F(40));return t._reactRootContainer?(Ur(function(){xl(null,null,t,!1,function(){t._reactRootContainer=null,t[Cn]=null})}),!0):!1};xt.unstable_batchedUpdates=Hh;xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nl(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return xl(t,e,n,!1,r)};xt.version="18.3.1-next-f1338f8080-20240426";function c_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c_)}catch(t){console.error(t)}}c_(),cg.exports=xt;var Yw=cg.exports,Lp=Yw;Wu.createRoot=Lp.createRoot,Wu.hydrateRoot=Lp.hydrateRoot;const Xw=()=>{};var jp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Jw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},d_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,f=s>>2,m=(s&3)<<4|l>>4;let y=(l&15)<<2|h>>6,C=h&63;c||(C=64,a||(y=64)),r.push(n[f],n[m],n[y],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Jw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new Zw;const y=s<<2|l>>4;if(r.push(y),h!==64){const C=l<<4&240|h>>2;if(r.push(C),m!==64){const x=h<<6&192|m;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Zw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e1=function(t){const e=h_(t);return d_.encodeByteArray(e,!0)},el=function(t){return e1(t).replace(/\./g,"")},t1=function(t){try{return d_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=()=>n1().__FIREBASE_DEFAULTS__,i1=()=>{if(typeof process>"u"||typeof jp>"u")return;const t=jp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},s1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&t1(t[1]);return e&&JSON.parse(e)},ed=()=>{try{return Xw()||r1()||i1()||s1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},o1=t=>{var e,n;return(n=(e=ed())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},a1=t=>{const e=o1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},f_=()=>{var t;return(t=ed())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function u1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[el(JSON.stringify(n)),el(JSON.stringify(a)),""].join(".")}const Fs={};function h1(){const t={prod:[],emulator:[]};for(const e of Object.keys(Fs))Fs[e]?t.emulator.push(e):t.prod.push(e);return t}function d1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Fp=!1;function f1(t,e){if(typeof window>"u"||typeof document>"u"||!td(window.location.host)||Fs[t]===e||Fs[t]||Fp)return;Fs[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",s=h1().prod.length>0;function a(){const y=document.getElementById(r);y&&y.remove()}function l(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,C){y.setAttribute("width","24"),y.setAttribute("id",C),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function h(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Fp=!0,a()},y}function f(y,C){y.setAttribute("id",C),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){const y=d1(r),C=n("text"),x=document.getElementById(C)||document.createElement("span"),M=n("learnmore"),L=document.getElementById(M)||document.createElement("a"),k=n("preprendIcon"),E=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const A=y.element;l(A),f(L,M);const D=h();c(E,k),A.append(E,x,L,D),document.body.appendChild(A)}s?(x.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function m1(){var e;const t=(e=ed())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function g1(){return!m1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function y1(){try{return typeof indexedDB=="object"}catch{return!1}}function _1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="FirebaseError";class $i extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=v1,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,p_.prototype.create)}}class p_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?E1(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new $i(i,l,r)}}function E1(t,e){return t.replace(w1,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const w1=/\{\$([^}]+)}/g;function tl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Up(s)&&Up(a)){if(!tl(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Up(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(t){return t&&t._delegate?t._delegate:t}class uo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new l1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(I1(e))try{this.getOrInitializeService({instanceIdentifier:Cr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cr){return this.instances.has(e)}getOptions(e=Cr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:S1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cr){return this.component?this.component.multipleInstances?e:Cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function S1(t){return t===Cr?void 0:t}function I1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new T1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const A1={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},C1=oe.INFO,R1={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},P1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=R1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class m_{constructor(e){this.name=e,this._logLevel=C1,this._logHandler=P1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?A1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const N1=(t,e)=>e.some(n=>t instanceof n);let Bp,zp;function x1(){return Bp||(Bp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V1(){return zp||(zp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g_=new WeakMap,jc=new WeakMap,y_=new WeakMap,Du=new WeakMap,nd=new WeakMap;function D1(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(ir(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&g_.set(n,t)}).catch(()=>{}),nd.set(e,t),e}function M1(t){if(jc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});jc.set(t,e)}let Fc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||y_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function O1(t){Fc=t(Fc)}function b1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mu(this),e,...n);return y_.set(r,e.sort?e.sort():[e]),ir(r)}:V1().includes(t)?function(...e){return t.apply(Mu(this),e),ir(g_.get(this))}:function(...e){return ir(t.apply(Mu(this),e))}}function L1(t){return typeof t=="function"?b1(t):(t instanceof IDBTransaction&&M1(t),N1(t,x1())?new Proxy(t,Fc):t)}function ir(t){if(t instanceof IDBRequest)return D1(t);if(Du.has(t))return Du.get(t);const e=L1(t);return e!==t&&(Du.set(t,e),nd.set(e,t)),e}const Mu=t=>nd.get(t);function j1(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=ir(a);return r&&a.addEventListener("upgradeneeded",c=>{r(ir(a.result),c.oldVersion,c.newVersion,ir(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const F1=["get","getKey","getAll","getAllKeys","count"],U1=["put","add","delete","clear"],Ou=new Map;function $p(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ou.get(e))return Ou.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=U1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||F1.includes(n)))return;const s=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&c.done]))[0]};return Ou.set(e,s),s}O1(t=>({...t,get:(e,n,r)=>$p(e,n)||t.get(e,n,r),has:(e,n)=>!!$p(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(z1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function z1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uc="@firebase/app",qp="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new m_("@firebase/app"),$1="@firebase/app-compat",q1="@firebase/analytics-compat",W1="@firebase/analytics",H1="@firebase/app-check-compat",G1="@firebase/app-check",Q1="@firebase/auth",K1="@firebase/auth-compat",Y1="@firebase/database",X1="@firebase/data-connect",J1="@firebase/database-compat",Z1="@firebase/functions",eT="@firebase/functions-compat",tT="@firebase/installations",nT="@firebase/installations-compat",rT="@firebase/messaging",iT="@firebase/messaging-compat",sT="@firebase/performance",oT="@firebase/performance-compat",aT="@firebase/remote-config",lT="@firebase/remote-config-compat",uT="@firebase/storage",cT="@firebase/storage-compat",hT="@firebase/firestore",dT="@firebase/ai",fT="@firebase/firestore-compat",pT="firebase",mT="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc="[DEFAULT]",gT={[Uc]:"fire-core",[$1]:"fire-core-compat",[W1]:"fire-analytics",[q1]:"fire-analytics-compat",[G1]:"fire-app-check",[H1]:"fire-app-check-compat",[Q1]:"fire-auth",[K1]:"fire-auth-compat",[Y1]:"fire-rtdb",[X1]:"fire-data-connect",[J1]:"fire-rtdb-compat",[Z1]:"fire-fn",[eT]:"fire-fn-compat",[tT]:"fire-iid",[nT]:"fire-iid-compat",[rT]:"fire-fcm",[iT]:"fire-fcm-compat",[sT]:"fire-perf",[oT]:"fire-perf-compat",[aT]:"fire-rc",[lT]:"fire-rc-compat",[uT]:"fire-gcs",[cT]:"fire-gcs-compat",[hT]:"fire-fst",[fT]:"fire-fst-compat",[dT]:"fire-vertex","fire-js":"fire-js",[pT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=new Map,yT=new Map,zc=new Map;function Wp(t,e){try{t.container.addComponent(e)}catch(n){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rl(t){const e=t.name;if(zc.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;zc.set(e,t);for(const n of nl.values())Wp(n,t);for(const n of yT.values())Wp(n,t);return!0}function _T(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vT(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new p_("app","Firebase",ET);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=mT;function __(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Bc,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw sr.create("bad-app-name",{appName:String(i)});if(n||(n=f_()),!n)throw sr.create("no-options");const s=nl.get(i);if(s){if(tl(n,s.options)&&tl(r,s.config))return s;throw sr.create("duplicate-app",{appName:i})}const a=new k1(i);for(const c of zc.values())a.addComponent(c);const l=new wT(n,r,a);return nl.set(i,l),l}function ST(t=Bc){const e=nl.get(t);if(!e&&t===Bc&&f_())return __();if(!e)throw sr.create("no-app",{appName:t});return e}function Si(t,e,n){let r=gT[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(a.join(" "));return}rl(new uo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="firebase-heartbeat-database",kT=1,co="firebase-heartbeat-store";let bu=null;function v_(){return bu||(bu=j1(IT,kT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(co)}catch(n){console.warn(n)}}}}).catch(t=>{throw sr.create("idb-open",{originalErrorMessage:t.message})})),bu}async function AT(t){try{const n=(await v_()).transaction(co),r=await n.objectStore(co).get(E_(t));return await n.done,r}catch(e){if(e instanceof $i)Nn.warn(e.message);else{const n=sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nn.warn(n.message)}}}async function Hp(t,e){try{const r=(await v_()).transaction(co,"readwrite");await r.objectStore(co).put(e,E_(t)),await r.done}catch(n){if(n instanceof $i)Nn.warn(n.message);else{const r=sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Nn.warn(r.message)}}}function E_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=1024,RT=30;class PT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Gp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>RT){const a=VT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Nn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gp(),{heartbeatsToSend:r,unsentEntries:i}=NT(this._heartbeatsCache.heartbeats),s=el(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Nn.warn(n),""}}}function Gp(){return new Date().toISOString().substring(0,10)}function NT(t,e=CT){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Qp(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Qp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class xT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return y1()?_1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Qp(t){return el(JSON.stringify({version:2,heartbeats:t})).length}function VT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t){rl(new uo("platform-logger",e=>new B1(e),"PRIVATE")),rl(new uo("heartbeat",e=>new PT(e),"PRIVATE")),Si(Uc,qp,t),Si(Uc,qp,"esm2020"),Si("fire-js","")}DT("");var Kp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var or,w_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,g){function v(){}v.prototype=g.prototype,_.F=g.prototype,_.prototype=new v,_.prototype.constructor=_,_.D=function(S,I,R){for(var T=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)T[xe-2]=arguments[xe];return g.prototype[I].apply(S,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,g,v){v||(v=0);const S=Array(16);if(typeof g=="string")for(var I=0;I<16;++I)S[I]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(I=0;I<16;++I)S[I]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=_.g[0],v=_.g[1],I=_.g[2];let R=_.g[3],T;T=g+(R^v&(I^R))+S[0]+3614090360&4294967295,g=v+(T<<7&4294967295|T>>>25),T=R+(I^g&(v^I))+S[1]+3905402710&4294967295,R=g+(T<<12&4294967295|T>>>20),T=I+(v^R&(g^v))+S[2]+606105819&4294967295,I=R+(T<<17&4294967295|T>>>15),T=v+(g^I&(R^g))+S[3]+3250441966&4294967295,v=I+(T<<22&4294967295|T>>>10),T=g+(R^v&(I^R))+S[4]+4118548399&4294967295,g=v+(T<<7&4294967295|T>>>25),T=R+(I^g&(v^I))+S[5]+1200080426&4294967295,R=g+(T<<12&4294967295|T>>>20),T=I+(v^R&(g^v))+S[6]+2821735955&4294967295,I=R+(T<<17&4294967295|T>>>15),T=v+(g^I&(R^g))+S[7]+4249261313&4294967295,v=I+(T<<22&4294967295|T>>>10),T=g+(R^v&(I^R))+S[8]+1770035416&4294967295,g=v+(T<<7&4294967295|T>>>25),T=R+(I^g&(v^I))+S[9]+2336552879&4294967295,R=g+(T<<12&4294967295|T>>>20),T=I+(v^R&(g^v))+S[10]+4294925233&4294967295,I=R+(T<<17&4294967295|T>>>15),T=v+(g^I&(R^g))+S[11]+2304563134&4294967295,v=I+(T<<22&4294967295|T>>>10),T=g+(R^v&(I^R))+S[12]+1804603682&4294967295,g=v+(T<<7&4294967295|T>>>25),T=R+(I^g&(v^I))+S[13]+4254626195&4294967295,R=g+(T<<12&4294967295|T>>>20),T=I+(v^R&(g^v))+S[14]+2792965006&4294967295,I=R+(T<<17&4294967295|T>>>15),T=v+(g^I&(R^g))+S[15]+1236535329&4294967295,v=I+(T<<22&4294967295|T>>>10),T=g+(I^R&(v^I))+S[1]+4129170786&4294967295,g=v+(T<<5&4294967295|T>>>27),T=R+(v^I&(g^v))+S[6]+3225465664&4294967295,R=g+(T<<9&4294967295|T>>>23),T=I+(g^v&(R^g))+S[11]+643717713&4294967295,I=R+(T<<14&4294967295|T>>>18),T=v+(R^g&(I^R))+S[0]+3921069994&4294967295,v=I+(T<<20&4294967295|T>>>12),T=g+(I^R&(v^I))+S[5]+3593408605&4294967295,g=v+(T<<5&4294967295|T>>>27),T=R+(v^I&(g^v))+S[10]+38016083&4294967295,R=g+(T<<9&4294967295|T>>>23),T=I+(g^v&(R^g))+S[15]+3634488961&4294967295,I=R+(T<<14&4294967295|T>>>18),T=v+(R^g&(I^R))+S[4]+3889429448&4294967295,v=I+(T<<20&4294967295|T>>>12),T=g+(I^R&(v^I))+S[9]+568446438&4294967295,g=v+(T<<5&4294967295|T>>>27),T=R+(v^I&(g^v))+S[14]+3275163606&4294967295,R=g+(T<<9&4294967295|T>>>23),T=I+(g^v&(R^g))+S[3]+4107603335&4294967295,I=R+(T<<14&4294967295|T>>>18),T=v+(R^g&(I^R))+S[8]+1163531501&4294967295,v=I+(T<<20&4294967295|T>>>12),T=g+(I^R&(v^I))+S[13]+2850285829&4294967295,g=v+(T<<5&4294967295|T>>>27),T=R+(v^I&(g^v))+S[2]+4243563512&4294967295,R=g+(T<<9&4294967295|T>>>23),T=I+(g^v&(R^g))+S[7]+1735328473&4294967295,I=R+(T<<14&4294967295|T>>>18),T=v+(R^g&(I^R))+S[12]+2368359562&4294967295,v=I+(T<<20&4294967295|T>>>12),T=g+(v^I^R)+S[5]+4294588738&4294967295,g=v+(T<<4&4294967295|T>>>28),T=R+(g^v^I)+S[8]+2272392833&4294967295,R=g+(T<<11&4294967295|T>>>21),T=I+(R^g^v)+S[11]+1839030562&4294967295,I=R+(T<<16&4294967295|T>>>16),T=v+(I^R^g)+S[14]+4259657740&4294967295,v=I+(T<<23&4294967295|T>>>9),T=g+(v^I^R)+S[1]+2763975236&4294967295,g=v+(T<<4&4294967295|T>>>28),T=R+(g^v^I)+S[4]+1272893353&4294967295,R=g+(T<<11&4294967295|T>>>21),T=I+(R^g^v)+S[7]+4139469664&4294967295,I=R+(T<<16&4294967295|T>>>16),T=v+(I^R^g)+S[10]+3200236656&4294967295,v=I+(T<<23&4294967295|T>>>9),T=g+(v^I^R)+S[13]+681279174&4294967295,g=v+(T<<4&4294967295|T>>>28),T=R+(g^v^I)+S[0]+3936430074&4294967295,R=g+(T<<11&4294967295|T>>>21),T=I+(R^g^v)+S[3]+3572445317&4294967295,I=R+(T<<16&4294967295|T>>>16),T=v+(I^R^g)+S[6]+76029189&4294967295,v=I+(T<<23&4294967295|T>>>9),T=g+(v^I^R)+S[9]+3654602809&4294967295,g=v+(T<<4&4294967295|T>>>28),T=R+(g^v^I)+S[12]+3873151461&4294967295,R=g+(T<<11&4294967295|T>>>21),T=I+(R^g^v)+S[15]+530742520&4294967295,I=R+(T<<16&4294967295|T>>>16),T=v+(I^R^g)+S[2]+3299628645&4294967295,v=I+(T<<23&4294967295|T>>>9),T=g+(I^(v|~R))+S[0]+4096336452&4294967295,g=v+(T<<6&4294967295|T>>>26),T=R+(v^(g|~I))+S[7]+1126891415&4294967295,R=g+(T<<10&4294967295|T>>>22),T=I+(g^(R|~v))+S[14]+2878612391&4294967295,I=R+(T<<15&4294967295|T>>>17),T=v+(R^(I|~g))+S[5]+4237533241&4294967295,v=I+(T<<21&4294967295|T>>>11),T=g+(I^(v|~R))+S[12]+1700485571&4294967295,g=v+(T<<6&4294967295|T>>>26),T=R+(v^(g|~I))+S[3]+2399980690&4294967295,R=g+(T<<10&4294967295|T>>>22),T=I+(g^(R|~v))+S[10]+4293915773&4294967295,I=R+(T<<15&4294967295|T>>>17),T=v+(R^(I|~g))+S[1]+2240044497&4294967295,v=I+(T<<21&4294967295|T>>>11),T=g+(I^(v|~R))+S[8]+1873313359&4294967295,g=v+(T<<6&4294967295|T>>>26),T=R+(v^(g|~I))+S[15]+4264355552&4294967295,R=g+(T<<10&4294967295|T>>>22),T=I+(g^(R|~v))+S[6]+2734768916&4294967295,I=R+(T<<15&4294967295|T>>>17),T=v+(R^(I|~g))+S[13]+1309151649&4294967295,v=I+(T<<21&4294967295|T>>>11),T=g+(I^(v|~R))+S[4]+4149444226&4294967295,g=v+(T<<6&4294967295|T>>>26),T=R+(v^(g|~I))+S[11]+3174756917&4294967295,R=g+(T<<10&4294967295|T>>>22),T=I+(g^(R|~v))+S[2]+718787259&4294967295,I=R+(T<<15&4294967295|T>>>17),T=v+(R^(I|~g))+S[9]+3951481745&4294967295,_.g[0]=_.g[0]+g&4294967295,_.g[1]=_.g[1]+(I+(T<<21&4294967295|T>>>11))&4294967295,_.g[2]=_.g[2]+I&4294967295,_.g[3]=_.g[3]+R&4294967295}r.prototype.v=function(_,g){g===void 0&&(g=_.length);const v=g-this.blockSize,S=this.C;let I=this.h,R=0;for(;R<g;){if(I==0)for(;R<=v;)i(this,_,R),R+=this.blockSize;if(typeof _=="string"){for(;R<g;)if(S[I++]=_.charCodeAt(R++),I==this.blockSize){i(this,S),I=0;break}}else for(;R<g;)if(S[I++]=_[R++],I==this.blockSize){i(this,S),I=0;break}}this.h=I,this.o+=g},r.prototype.A=function(){var _=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);_[0]=128;for(var g=1;g<_.length-8;++g)_[g]=0;g=this.o*8;for(var v=_.length-8;v<_.length;++v)_[v]=g&255,g/=256;for(this.v(_),_=Array(16),g=0,v=0;v<4;++v)for(let S=0;S<32;S+=8)_[g++]=this.g[v]>>>S&255;return _};function s(_,g){var v=l;return Object.prototype.hasOwnProperty.call(v,_)?v[_]:v[_]=g(_)}function a(_,g){this.h=g;const v=[];let S=!0;for(let I=_.length-1;I>=0;I--){const R=_[I]|0;S&&R==g||(v[I]=R,S=!1)}this.g=v}var l={};function c(_){return-128<=_&&_<128?s(_,function(g){return new a([g|0],g<0?-1:0)}):new a([_|0],_<0?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return m;if(_<0)return L(h(-_));const g=[];let v=1;for(let S=0;_>=v;S++)g[S]=_/v|0,v*=4294967296;return new a(g,0)}function f(_,g){if(_.length==0)throw Error("number format error: empty string");if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(_.charAt(0)=="-")return L(f(_.substring(1),g));if(_.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=h(Math.pow(g,8));let S=m;for(let R=0;R<_.length;R+=8){var I=Math.min(8,_.length-R);const T=parseInt(_.substring(R,R+I),g);I<8?(I=h(Math.pow(g,I)),S=S.j(I).add(h(T))):(S=S.j(v),S=S.add(h(T)))}return S}var m=c(0),y=c(1),C=c(16777216);t=a.prototype,t.m=function(){if(M(this))return-L(this).m();let _=0,g=1;for(let v=0;v<this.g.length;v++){const S=this.i(v);_+=(S>=0?S:4294967296+S)*g,g*=4294967296}return _},t.toString=function(_){if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(x(this))return"0";if(M(this))return"-"+L(this).toString(_);const g=h(Math.pow(_,6));var v=this;let S="";for(;;){const I=D(v,g).g;v=k(v,I.j(g));let R=((v.g.length>0?v.g[0]:v.h)>>>0).toString(_);if(v=I,x(v))return R+S;for(;R.length<6;)R="0"+R;S=R+S}},t.i=function(_){return _<0?0:_<this.g.length?this.g[_]:this.h};function x(_){if(_.h!=0)return!1;for(let g=0;g<_.g.length;g++)if(_.g[g]!=0)return!1;return!0}function M(_){return _.h==-1}t.l=function(_){return _=k(this,_),M(_)?-1:x(_)?0:1};function L(_){const g=_.g.length,v=[];for(let S=0;S<g;S++)v[S]=~_.g[S];return new a(v,~_.h).add(y)}t.abs=function(){return M(this)?L(this):this},t.add=function(_){const g=Math.max(this.g.length,_.g.length),v=[];let S=0;for(let I=0;I<=g;I++){let R=S+(this.i(I)&65535)+(_.i(I)&65535),T=(R>>>16)+(this.i(I)>>>16)+(_.i(I)>>>16);S=T>>>16,R&=65535,T&=65535,v[I]=T<<16|R}return new a(v,v[v.length-1]&-2147483648?-1:0)};function k(_,g){return _.add(L(g))}t.j=function(_){if(x(this)||x(_))return m;if(M(this))return M(_)?L(this).j(L(_)):L(L(this).j(_));if(M(_))return L(this.j(L(_)));if(this.l(C)<0&&_.l(C)<0)return h(this.m()*_.m());const g=this.g.length+_.g.length,v=[];for(var S=0;S<2*g;S++)v[S]=0;for(S=0;S<this.g.length;S++)for(let I=0;I<_.g.length;I++){const R=this.i(S)>>>16,T=this.i(S)&65535,xe=_.i(I)>>>16,zt=_.i(I)&65535;v[2*S+2*I]+=T*zt,E(v,2*S+2*I),v[2*S+2*I+1]+=R*zt,E(v,2*S+2*I+1),v[2*S+2*I+1]+=T*xe,E(v,2*S+2*I+1),v[2*S+2*I+2]+=R*xe,E(v,2*S+2*I+2)}for(_=0;_<g;_++)v[_]=v[2*_+1]<<16|v[2*_];for(_=g;_<2*g;_++)v[_]=0;return new a(v,0)};function E(_,g){for(;(_[g]&65535)!=_[g];)_[g+1]+=_[g]>>>16,_[g]&=65535,g++}function A(_,g){this.g=_,this.h=g}function D(_,g){if(x(g))throw Error("division by zero");if(x(_))return new A(m,m);if(M(_))return g=D(L(_),g),new A(L(g.g),L(g.h));if(M(g))return g=D(_,L(g)),new A(L(g.g),g.h);if(_.g.length>30){if(M(_)||M(g))throw Error("slowDivide_ only works with positive integers.");for(var v=y,S=g;S.l(_)<=0;)v=B(v),S=B(S);var I=z(v,1),R=z(S,1);for(S=z(S,2),v=z(v,2);!x(S);){var T=R.add(S);T.l(_)<=0&&(I=I.add(v),R=T),S=z(S,1),v=z(v,1)}return g=k(_,I.j(g)),new A(I,g)}for(I=m;_.l(g)>=0;){for(v=Math.max(1,Math.floor(_.m()/g.m())),S=Math.ceil(Math.log(v)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),R=h(v),T=R.j(g);M(T)||T.l(_)>0;)v-=S,R=h(v),T=R.j(g);x(R)&&(R=y),I=I.add(R),_=k(_,T)}return new A(I,_)}t.B=function(_){return D(this,_).h},t.and=function(_){const g=Math.max(this.g.length,_.g.length),v=[];for(let S=0;S<g;S++)v[S]=this.i(S)&_.i(S);return new a(v,this.h&_.h)},t.or=function(_){const g=Math.max(this.g.length,_.g.length),v=[];for(let S=0;S<g;S++)v[S]=this.i(S)|_.i(S);return new a(v,this.h|_.h)},t.xor=function(_){const g=Math.max(this.g.length,_.g.length),v=[];for(let S=0;S<g;S++)v[S]=this.i(S)^_.i(S);return new a(v,this.h^_.h)};function B(_){const g=_.g.length+1,v=[];for(let S=0;S<g;S++)v[S]=_.i(S)<<1|_.i(S-1)>>>31;return new a(v,_.h)}function z(_,g){const v=g>>5;g%=32;const S=_.g.length-v,I=[];for(let R=0;R<S;R++)I[R]=g>0?_.i(R+v)>>>g|_.i(R+v+1)<<32-g:_.i(R+v);return new a(I,_.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,w_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,or=a}).apply(typeof Kp<"u"?Kp:typeof self<"u"?self:typeof window<"u"?window:{});var aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T_,As,S_,Ia,$c,I_,k_,A_;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof aa=="object"&&aa];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(o,u){if(u)e:{var d=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var P=o[p];if(!(P in d))break e;d=d[P]}o=o[o.length-1],p=d[o],u=u(p),u!=p&&u!=null&&e(d,o,{configurable:!0,writable:!0,value:u})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(u){var d=[],p;for(p in u)Object.prototype.hasOwnProperty.call(u,p)&&d.push([p,u[p]]);return d}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function c(o,u,d){return o.call.apply(o.bind,arguments)}function h(o,u,d){return h=c,h.apply(null,arguments)}function f(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function m(o,u){function d(){}d.prototype=u.prototype,o.Z=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Ob=function(p,P,V){for(var $=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)$[ee-2]=arguments[ee];return u.prototype[P].apply(p,$)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function C(o){const u=o.length;if(u>0){const d=Array(u);for(let p=0;p<u;p++)d[p]=o[p];return d}return[]}function x(o,u){for(let p=1;p<arguments.length;p++){const P=arguments[p];var d=typeof P;if(d=d!="object"?d:P?Array.isArray(P)?"array":d:"null",d=="array"||d=="object"&&typeof P.length=="number"){d=o.length||0;const V=P.length||0;o.length=d+V;for(let $=0;$<V;$++)o[d+$]=P[$]}else o.push(P)}}class M{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function L(o){a.setTimeout(()=>{throw o},0)}function k(){var o=_;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class E{constructor(){this.h=this.g=null}add(u,d){const p=A.get();p.set(u,d),this.h?this.h.next=p:this.g=p,this.h=p}}var A=new M(()=>new D,o=>o.reset());class D{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let B,z=!1,_=new E,g=()=>{const o=Promise.resolve(void 0);B=()=>{o.then(v)}};function v(){for(var o;o=k();){try{o.h.call(o.g)}catch(d){L(d)}var u=A;u.j(o),u.h<100&&(u.h++,o.next=u.g,u.g=o)}z=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};a.addEventListener("test",d,u),a.removeEventListener("test",d,u)}catch{}return o}();function T(o){return/^[\s\xa0]*$/.test(o)}function xe(o,u){I.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,u)}m(xe,I),xe.prototype.init=function(o,u){const d=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget,u||(d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement)),this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var zt="closure_listenable_"+(Math.random()*1e6|0),Er=0;function en(o,u,d,p,P){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!p,this.ha=P,this.key=++Er,this.da=this.fa=!1}function q(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Y(o,u,d){for(const p in o)u.call(d,o[p],p,o)}function Z(o,u){for(const d in o)u.call(void 0,o[d],d,o)}function de(o){const u={};for(const d in o)u[d]=o[d];return u}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fe(o,u){let d,p;for(let P=1;P<arguments.length;P++){p=arguments[P];for(d in p)o[d]=p[d];for(let V=0;V<Ee.length;V++)d=Ee[V],Object.prototype.hasOwnProperty.call(p,d)&&(o[d]=p[d])}}function ht(o){this.src=o,this.g={},this.h=0}ht.prototype.add=function(o,u,d,p,P){const V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);const $=It(o,u,p,P);return $>-1?(u=o[$],d||(u.fa=!1)):(u=new en(u,this.src,V,!!p,P),u.fa=d,o.push(u)),u};function yn(o,u){const d=u.type;if(d in o.g){var p=o.g[d],P=Array.prototype.indexOf.call(p,u,void 0),V;(V=P>=0)&&Array.prototype.splice.call(p,P,1),V&&(q(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function It(o,u,d,p){for(let P=0;P<o.length;++P){const V=o[P];if(!V.da&&V.listener==u&&V.capture==!!d&&V.ha==p)return P}return-1}var tn="closure_lm_"+(Math.random()*1e6|0),Ki={};function xo(o,u,d,p,P){if(Array.isArray(u)){for(let V=0;V<u.length;V++)xo(o,u[V],d,p,P);return null}return d=N(d),o&&o[zt]?o.J(u,d,l(p)?!!p.capture:!1,P):Wl(o,u,d,!1,p,P)}function Wl(o,u,d,p,P,V){if(!u)throw Error("Invalid event type");const $=l(P)?!!P.capture:!!P;let ee=Ji(o);if(ee||(o[tn]=ee=new ht(o)),d=ee.add(u,d,p,$,V),d.proxy)return d;if(p=Hl(),d.proxy=p,p.src=o,p.listener=d,o.addEventListener)R||(P=$),P===void 0&&(P=!1),o.addEventListener(u.toString(),p,P);else if(o.attachEvent)o.attachEvent(Xi(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Hl(){function o(d){return u.call(o.src,o.listener,d)}const u=Do;return o}function Vo(o,u,d,p,P){if(Array.isArray(u))for(var V=0;V<u.length;V++)Vo(o,u[V],d,p,P);else p=l(p)?!!p.capture:!!p,d=N(d),o&&o[zt]?(o=o.i,V=String(u).toString(),V in o.g&&(u=o.g[V],d=It(u,d,p,P),d>-1&&(q(u[d]),Array.prototype.splice.call(u,d,1),u.length==0&&(delete o.g[V],o.h--)))):o&&(o=Ji(o))&&(u=o.g[u.toString()],o=-1,u&&(o=It(u,d,p,P)),(d=o>-1?u[o]:null)&&Yi(d))}function Yi(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[zt])yn(u.i,o);else{var d=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(d,p,o.capture):u.detachEvent?u.detachEvent(Xi(d),p):u.addListener&&u.removeListener&&u.removeListener(p),(d=Ji(u))?(yn(d,o),d.h==0&&(d.src=null,u[tn]=null)):q(o)}}}function Xi(o){return o in Ki?Ki[o]:Ki[o]="on"+o}function Do(o,u){if(o.da)o=!0;else{u=new xe(u,this);const d=o.listener,p=o.ha||o.src;o.fa&&Yi(o),o=d.call(p,u)}return o}function Ji(o){return o=o[tn],o instanceof ht?o:null}var Zi="__closure_events_fn_"+(Math.random()*1e9>>>0);function N(o){return typeof o=="function"?o:(o[Zi]||(o[Zi]=function(u){return o.handleEvent(u)}),o[Zi])}function j(){S.call(this),this.i=new ht(this),this.M=this,this.G=null}m(j,S),j.prototype[zt]=!0,j.prototype.removeEventListener=function(o,u,d,p){Vo(this,o,u,d,p)};function U(o,u){var d,p=o.G;if(p)for(d=[];p;p=p.G)d.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new I(u,o);else if(u instanceof I)u.target=u.target||o;else{var P=u;u=new I(p,o),Fe(u,P)}P=!0;let V,$;if(d)for($=d.length-1;$>=0;$--)V=u.g=d[$],P=ie(V,p,!0,u)&&P;if(V=u.g=o,P=ie(V,p,!0,u)&&P,P=ie(V,p,!1,u)&&P,d)for($=0;$<d.length;$++)V=u.g=d[$],P=ie(V,p,!1,u)&&P}j.prototype.N=function(){if(j.Z.N.call(this),this.i){var o=this.i;for(const u in o.g){const d=o.g[u];for(let p=0;p<d.length;p++)q(d[p]);delete o.g[u],o.h--}}this.G=null},j.prototype.J=function(o,u,d,p){return this.i.add(String(o),u,!1,d,p)},j.prototype.K=function(o,u,d,p){return this.i.add(String(o),u,!0,d,p)};function ie(o,u,d,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();let P=!0;for(let V=0;V<u.length;++V){const $=u[V];if($&&!$.da&&$.capture==d){const ee=$.listener,Ue=$.ha||$.src;$.fa&&yn(o.i,$),P=ee.call(Ue,p)!==!1&&P}}return P&&!p.defaultPrevented}function ue(o,u){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:a.setTimeout(o,u||0)}function Me(o){o.g=ue(()=>{o.g=null,o.i&&(o.i=!1,Me(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Ce extends S{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Me(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Re(o){S.call(this),this.h=o,this.g={}}m(Re,S);var nt=[];function yt(o){Y(o.g,function(u,d){this.g.hasOwnProperty(d)&&Yi(u)},o),o.g={}}Re.prototype.N=function(){Re.Z.N.call(this),yt(this)},Re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rt=a.JSON.stringify,$t=a.JSON.parse,qt=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function _n(){}function vn(){}var Dt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nn(){I.call(this,"d")}m(nn,I);function kt(){I.call(this,"c")}m(kt,I);var We={},Mn=null;function On(){return Mn=Mn||new j}We.Ia="serverreachability";function Ud(o){I.call(this,We.Ia,o)}m(Ud,I);function es(o){const u=On();U(u,new Ud(u))}We.STAT_EVENT="statevent";function Bd(o,u){I.call(this,We.STAT_EVENT,o),this.stat=u}m(Bd,I);function dt(o){const u=On();U(u,new Bd(u,o))}We.Ja="timingevent";function zd(o,u){I.call(this,We.Ja,o),this.size=u}m(zd,I);function ts(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},u)}function ns(){this.g=!0}ns.prototype.ua=function(){this.g=!1};function t0(o,u,d,p,P,V){o.info(function(){if(o.g)if(V){var $="",ee=V.split("&");for(let fe=0;fe<ee.length;fe++){var Ue=ee[fe].split("=");if(Ue.length>1){const He=Ue[0];Ue=Ue[1];const sn=He.split("_");$=sn.length>=2&&sn[1]=="type"?$+(He+"="+Ue+"&"):$+(He+"=redacted&")}}}else $=null;else $=V;return"XMLHTTP REQ ("+p+") [attempt "+P+"]: "+u+`
`+d+`
`+$})}function n0(o,u,d,p,P,V,$){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+P+"]: "+u+`
`+d+`
`+V+" "+$})}function Yr(o,u,d,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+i0(o,d)+(p?" "+p:"")})}function r0(o,u){o.info(function(){return"TIMEOUT: "+u})}ns.prototype.info=function(){};function i0(o,u){if(!o.g)return u;if(!u)return null;try{const V=JSON.parse(u);if(V){for(o=0;o<V.length;o++)if(Array.isArray(V[o])){var d=V[o];if(!(d.length<2)){var p=d[1];if(Array.isArray(p)&&!(p.length<1)){var P=p[0];if(P!="noop"&&P!="stop"&&P!="close")for(let $=1;$<p.length;$++)p[$]=""}}}}return rt(V)}catch{return u}}var Mo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$d={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qd;function Gl(){}m(Gl,_n),Gl.prototype.g=function(){return new XMLHttpRequest},qd=new Gl;function rs(o){return encodeURIComponent(String(o))}function s0(o){var u=1;o=o.split(":");const d=[];for(;u>0&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function bn(o,u,d,p){this.j=o,this.i=u,this.l=d,this.S=p||1,this.V=new Re(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wd}function Wd(){this.i=null,this.g="",this.h=!1}var Hd={},Ql={};function Kl(o,u,d){o.M=1,o.A=bo(rn(u)),o.u=d,o.R=!0,Gd(o,null)}function Gd(o,u){o.F=Date.now(),Oo(o),o.B=rn(o.A);var d=o.B,p=o.S;Array.isArray(p)||(p=[String(p)]),af(d.i,"t",p),o.C=0,d=o.j.L,o.h=new Wd,o.g=kf(o.j,d?u:null,!o.u),o.P>0&&(o.O=new Ce(h(o.Y,o,o.g),o.P)),u=o.V,d=o.g,p=o.ba;var P="readystatechange";Array.isArray(P)||(P&&(nt[0]=P.toString()),P=nt);for(let V=0;V<P.length;V++){const $=xo(d,P[V],p||u.handleEvent,!1,u.h||u);if(!$)break;u.g[$.key]=$}u=o.J?de(o.J):{},o.u?(o.v||(o.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,u)):(o.v="GET",o.g.ea(o.B,o.v,null,u)),es(),t0(o.i,o.v,o.B,o.l,o.S,o.u)}bn.prototype.ba=function(o){o=o.target;const u=this.O;u&&Fn(o)==3?u.j():this.Y(o)},bn.prototype.Y=function(o){try{if(o==this.g)e:{const ee=Fn(this.g),Ue=this.g.ya(),fe=this.g.ca();if(!(ee<3)&&(ee!=3||this.g&&(this.h.h||this.g.la()||pf(this.g)))){this.K||ee!=4||Ue==7||(Ue==8||fe<=0?es(3):es(2)),Yl(this);var u=this.g.ca();this.X=u;var d=o0(this);if(this.o=u==200,n0(this.i,this.v,this.B,this.l,this.S,ee,u),this.o){if(this.U&&!this.L){t:{if(this.g){var p,P=this.g;if((p=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(p)){var V=p;break t}}V=null}if(o=V)Yr(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xl(this,o);else{this.o=!1,this.m=3,dt(12),wr(this),is(this);break e}}if(this.R){o=!0;let He;for(;!this.K&&this.C<d.length;)if(He=a0(this,d),He==Ql){ee==4&&(this.m=4,dt(14),o=!1),Yr(this.i,this.l,null,"[Incomplete Response]");break}else if(He==Hd){this.m=4,dt(15),Yr(this.i,this.l,d,"[Invalid Chunk]"),o=!1;break}else Yr(this.i,this.l,He,null),Xl(this,He);if(Qd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ee!=4||d.length!=0||this.h.h||(this.m=1,dt(16),o=!1),this.o=this.o&&o,!o)Yr(this.i,this.l,d,"[Invalid Chunked Response]"),wr(this),is(this);else if(d.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),su($),$.P=!0,dt(11))}}else Yr(this.i,this.l,d,null),Xl(this,d);ee==4&&wr(this),this.o&&!this.K&&(ee==4?wf(this.j,this):(this.o=!1,Oo(this)))}else w0(this.g),u==400&&d.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),wr(this),is(this)}}}catch{}finally{}};function o0(o){if(!Qd(o))return o.g.la();const u=pf(o.g);if(u==="")return"";let d="";const p=u.length,P=Fn(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return wr(o),is(o),"";o.h.i=new a.TextDecoder}for(let V=0;V<p;V++)o.h.h=!0,d+=o.h.i.decode(u[V],{stream:!(P&&V==p-1)});return u.length=0,o.h.g+=d,o.C=0,o.h.g}function Qd(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function a0(o,u){var d=o.C,p=u.indexOf(`
`,d);return p==-1?Ql:(d=Number(u.substring(d,p)),isNaN(d)?Hd:(p+=1,p+d>u.length?Ql:(u=u.slice(p,p+d),o.C=p+d,u)))}bn.prototype.cancel=function(){this.K=!0,wr(this)};function Oo(o){o.T=Date.now()+o.H,Kd(o,o.H)}function Kd(o,u){if(o.D!=null)throw Error("WatchDog timer not null");o.D=ts(h(o.aa,o),u)}function Yl(o){o.D&&(a.clearTimeout(o.D),o.D=null)}bn.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(r0(this.i,this.B),this.M!=2&&(es(),dt(17)),wr(this),this.m=2,is(this)):Kd(this,this.T-o)};function is(o){o.j.I==0||o.K||wf(o.j,o)}function wr(o){Yl(o);var u=o.O;u&&typeof u.dispose=="function"&&u.dispose(),o.O=null,yt(o.V),o.g&&(u=o.g,o.g=null,u.abort(),u.dispose())}function Xl(o,u){try{var d=o.j;if(d.I!=0&&(d.g==o||Jl(d.h,o))){if(!o.L&&Jl(d.h,o)&&d.I==3){try{var p=d.Ba.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var P=p;if(P[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<o.F)Bo(d),Fo(d);else break e;iu(d),dt(18)}}else d.xa=P[1],0<d.xa-d.K&&P[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=ts(h(d.Va,d),6e3));Jd(d.h)<=1&&d.ta&&(d.ta=void 0)}else Sr(d,11)}else if((o.L||d.g==o)&&Bo(d),!T(u))for(P=d.Ba.g.parse(u),u=0;u<P.length;u++){let fe=P[u];const He=fe[0];if(!(He<=d.K))if(d.K=He,fe=fe[1],d.I==2)if(fe[0]=="c"){d.M=fe[1],d.ba=fe[2];const sn=fe[3];sn!=null&&(d.ka=sn,d.j.info("VER="+d.ka));const Ir=fe[4];Ir!=null&&(d.za=Ir,d.j.info("SVER="+d.za));const Un=fe[5];Un!=null&&typeof Un=="number"&&Un>0&&(p=1.5*Un,d.O=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;const Bn=o.g;if(Bn){const $o=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($o){var V=p.h;V.g||$o.indexOf("spdy")==-1&&$o.indexOf("quic")==-1&&$o.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Zl(V,V.h),V.h=null))}if(p.G){const ou=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;ou&&(p.wa=ou,ge(p.J,p.G,ou))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-o.F,d.j.info("Handshake RTT: "+d.T+"ms")),p=d;var $=o;if(p.na=If(p,p.L?p.ba:null,p.W),$.L){Zd(p.h,$);var ee=$,Ue=p.O;Ue&&(ee.H=Ue),ee.D&&(Yl(ee),Oo(ee)),p.g=$}else vf(p);d.i.length>0&&Uo(d)}else fe[0]!="stop"&&fe[0]!="close"||Sr(d,7);else d.I==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Sr(d,7):ru(d):fe[0]!="noop"&&d.l&&d.l.qa(fe),d.A=0)}}es(4)}catch{}}var l0=class{constructor(o,u){this.g=o,this.map=u}};function Yd(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xd(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Jd(o){return o.h?1:o.g?o.g.size:0}function Jl(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Zl(o,u){o.g?o.g.add(u):o.h=u}function Zd(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Yd.prototype.cancel=function(){if(this.i=ef(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function ef(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const d of o.g.values())u=u.concat(d.G);return u}return C(o.i)}var tf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function u0(o,u){if(o){o=o.split("&");for(let d=0;d<o.length;d++){const p=o[d].indexOf("=");let P,V=null;p>=0?(P=o[d].substring(0,p),V=o[d].substring(p+1)):P=o[d],u(P,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Ln(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;o instanceof Ln?(this.l=o.l,ss(this,o.j),this.o=o.o,this.g=o.g,os(this,o.u),this.h=o.h,eu(this,lf(o.i)),this.m=o.m):o&&(u=String(o).match(tf))?(this.l=!1,ss(this,u[1]||"",!0),this.o=as(u[2]||""),this.g=as(u[3]||"",!0),os(this,u[4]),this.h=as(u[5]||"",!0),eu(this,u[6]||"",!0),this.m=as(u[7]||"")):(this.l=!1,this.i=new us(null,this.l))}Ln.prototype.toString=function(){const o=[];var u=this.j;u&&o.push(ls(u,nf,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push(ls(u,nf,!0),"@"),o.push(rs(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&o.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(ls(d,d.charAt(0)=="/"?d0:h0,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",ls(d,p0)),o.join("")},Ln.prototype.resolve=function(o){const u=rn(this);let d=!!o.j;d?ss(u,o.j):d=!!o.o,d?u.o=o.o:d=!!o.g,d?u.g=o.g:d=o.u!=null;var p=o.h;if(d)os(u,o.u);else if(d=!!o.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var P=u.h.lastIndexOf("/");P!=-1&&(p=u.h.slice(0,P+1)+p)}if(P=p,P==".."||P==".")p="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){p=P.lastIndexOf("/",0)==0,P=P.split("/");const V=[];for(let $=0;$<P.length;){const ee=P[$++];ee=="."?p&&$==P.length&&V.push(""):ee==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),p&&$==P.length&&V.push("")):(V.push(ee),p=!0)}p=V.join("/")}else p=P}return d?u.h=p:d=o.i.toString()!=="",d?eu(u,lf(o.i)):d=!!o.m,d&&(u.m=o.m),u};function rn(o){return new Ln(o)}function ss(o,u,d){o.j=d?as(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function os(o,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);o.u=u}else o.u=null}function eu(o,u,d){u instanceof us?(o.i=u,m0(o.i,o.l)):(d||(u=ls(u,f0)),o.i=new us(u,o.l))}function ge(o,u,d){o.i.set(u,d)}function bo(o){return ge(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function as(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ls(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,c0),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function c0(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var nf=/[#\/\?@]/g,h0=/[#\?:]/g,d0=/[#\?]/g,f0=/[#\?@]/g,p0=/#/g;function us(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Tr(o){o.g||(o.g=new Map,o.h=0,o.i&&u0(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}t=us.prototype,t.add=function(o,u){Tr(this),this.i=null,o=Xr(this,o);let d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function rf(o,u){Tr(o),u=Xr(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function sf(o,u){return Tr(o),u=Xr(o,u),o.g.has(u)}t.forEach=function(o,u){Tr(this),this.g.forEach(function(d,p){d.forEach(function(P){o.call(u,P,p,this)},this)},this)};function of(o,u){Tr(o);let d=[];if(typeof u=="string")sf(o,u)&&(d=d.concat(o.g.get(Xr(o,u))));else for(o=Array.from(o.g.values()),u=0;u<o.length;u++)d=d.concat(o[u]);return d}t.set=function(o,u){return Tr(this),this.i=null,o=Xr(this,o),sf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},t.get=function(o,u){return o?(o=of(this,o),o.length>0?String(o[0]):u):u};function af(o,u,d){rf(o,u),d.length>0&&(o.i=null,o.g.set(Xr(o,u),C(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(let p=0;p<u.length;p++){var d=u[p];const P=rs(d);d=of(this,d);for(let V=0;V<d.length;V++){let $=P;d[V]!==""&&($+="="+rs(d[V])),o.push($)}}return this.i=o.join("&")};function lf(o){const u=new us;return u.i=o.i,o.g&&(u.g=new Map(o.g),u.h=o.h),u}function Xr(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function m0(o,u){u&&!o.j&&(Tr(o),o.i=null,o.g.forEach(function(d,p){const P=p.toLowerCase();p!=P&&(rf(this,p),af(this,P,d))},o)),o.j=u}function g0(o,u){const d=new ns;if(a.Image){const p=new Image;p.onload=f(jn,d,"TestLoadImage: loaded",!0,u,p),p.onerror=f(jn,d,"TestLoadImage: error",!1,u,p),p.onabort=f(jn,d,"TestLoadImage: abort",!1,u,p),p.ontimeout=f(jn,d,"TestLoadImage: timeout",!1,u,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function y0(o,u){const d=new ns,p=new AbortController,P=setTimeout(()=>{p.abort(),jn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(V=>{clearTimeout(P),V.ok?jn(d,"TestPingServer: ok",!0,u):jn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(P),jn(d,"TestPingServer: error",!1,u)})}function jn(o,u,d,p,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),p(d)}catch{}}function _0(){this.g=new qt}function tu(o){this.i=o.Sb||null,this.h=o.ab||!1}m(tu,_n),tu.prototype.g=function(){return new Lo(this.i,this.h)};function Lo(o,u){j.call(this),this.H=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Lo,j),t=Lo.prototype,t.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=u,this.readyState=1,hs(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(u.body=o),(this.H||a).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,cs(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,hs(this)),this.g&&(this.readyState=3,hs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;uf(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function uf(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?cs(this):hs(this),this.readyState==3&&uf(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,cs(this))},t.Na=function(o){this.g&&(this.response=o,cs(this))},t.ga=function(){this.g&&cs(this)};function cs(o){o.readyState=4,o.l=null,o.j=null,o.B=null,hs(o)}t.setRequestHeader=function(o,u){this.A.append(o,u)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function hs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Lo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function cf(o){let u="";return Y(o,function(d,p){u+=p,u+=":",u+=d,u+=`\r
`}),u}function nu(o,u,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=cf(d),typeof o=="string"?d!=null&&rs(d):ge(o,u,d))}function Pe(o){j.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Pe,j);var v0=/^https?$/i,E0=["POST","PUT"];t=Pe.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,u,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qd.g(),this.g.onreadystatechange=y(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(V){hf(this,V);return}if(o=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var P in p)d.set(P,p[P]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const V of p.keys())d.set(V,p.get(V));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(V=>V.toLowerCase()=="content-type"),P=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(E0,u,void 0)>=0)||p||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,$]of d)this.g.setRequestHeader(V,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(V){hf(this,V)}};function hf(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.o=5,df(o),jo(o)}function df(o){o.A||(o.A=!0,U(o,"complete"),U(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,U(this,"complete"),U(this,"abort"),jo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jo(this,!0)),Pe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ff(this):this.Xa())},t.Xa=function(){ff(this)};function ff(o){if(o.h&&typeof s<"u"){if(o.v&&Fn(o)==4)setTimeout(o.Ca.bind(o),0);else if(U(o,"readystatechange"),Fn(o)==4){o.h=!1;try{const V=o.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var p;if(p=V===0){let $=String(o.D).match(tf)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),p=!v0.test($?$.toLowerCase():"")}d=p}if(d)U(o,"complete"),U(o,"success");else{o.o=6;try{var P=Fn(o)>2?o.g.statusText:""}catch{P=""}o.l=P+" ["+o.ca()+"]",df(o)}}finally{jo(o)}}}}function jo(o,u){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const d=o.g;o.g=null,u||U(o,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Fn(o){return o.g?o.g.readyState:0}t.ca=function(){try{return Fn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),$t(u)}};function pf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function w0(o){const u={};o=(o.g&&Fn(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(T(o[p]))continue;var d=s0(o[p]);const P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const V=u[P]||[];u[P]=V,V.push(d)}Z(u,function(p){return p.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ds(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function mf(o){this.za=0,this.i=[],this.j=new ns,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ds("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ds("baseRetryDelayMs",5e3,o),this.Za=ds("retryDelaySeedMs",1e4,o),this.Ta=ds("forwardChannelMaxRetries",2,o),this.va=ds("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Yd(o&&o.concurrentRequestLimit),this.Ba=new _0,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=mf.prototype,t.ka=8,t.I=1,t.connect=function(o,u,d,p){dt(0),this.W=o,this.H=u||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.J=If(this,null,this.W),Uo(this)};function ru(o){if(gf(o),o.I==3){var u=o.V++,d=rn(o.J);if(ge(d,"SID",o.M),ge(d,"RID",u),ge(d,"TYPE","terminate"),fs(o,d),u=new bn(o,o.j,u),u.M=2,u.A=bo(rn(d)),d=!1,a.navigator&&a.navigator.sendBeacon)try{d=a.navigator.sendBeacon(u.A.toString(),"")}catch{}!d&&a.Image&&(new Image().src=u.A,d=!0),d||(u.g=kf(u.j,null),u.g.ea(u.A)),u.F=Date.now(),Oo(u)}Sf(o)}function Fo(o){o.g&&(su(o),o.g.cancel(),o.g=null)}function gf(o){Fo(o),o.v&&(a.clearTimeout(o.v),o.v=null),Bo(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Uo(o){if(!Xd(o.h)&&!o.m){o.m=!0;var u=o.Ea;B||g(),z||(B(),z=!0),_.add(u,o),o.D=0}}function T0(o,u){return Jd(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=u.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=ts(h(o.Ea,o,u),Tf(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const P=new bn(this,this.j,o);let V=this.o;if(this.U&&(V?(V=de(V),Fe(V,this.U)):V=this.U),this.u!==null||this.R||(P.J=V,V=null),this.S)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,u>4096){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=_f(this,P,u),d=rn(this.J),ge(d,"RID",o),ge(d,"CVER",22),this.G&&ge(d,"X-HTTP-Session-Id",this.G),fs(this,d),V&&(this.R?u="headers="+rs(cf(V))+"&"+u:this.u&&nu(d,this.u,V)),Zl(this.h,P),this.Ra&&ge(d,"TYPE","init"),this.S?(ge(d,"$req",u),ge(d,"SID","null"),P.U=!0,Kl(P,d,null)):Kl(P,d,u),this.I=2}}else this.I==3&&(o?yf(this,o):this.i.length==0||Xd(this.h)||yf(this))};function yf(o,u){var d;u?d=u.l:d=o.V++;const p=rn(o.J);ge(p,"SID",o.M),ge(p,"RID",d),ge(p,"AID",o.K),fs(o,p),o.u&&o.o&&nu(p,o.u,o.o),d=new bn(o,o.j,d,o.D+1),o.u===null&&(d.J=o.o),u&&(o.i=u.G.concat(o.i)),u=_f(o,d,1e3),d.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Zl(o.h,d),Kl(d,p,u)}function fs(o,u){o.H&&Y(o.H,function(d,p){ge(u,p,d)}),o.l&&Y({},function(d,p){ge(u,p,d)})}function _f(o,u,d){d=Math.min(o.i.length,d);const p=o.l?h(o.l.Ka,o.l,o):null;e:{var P=o.i;let ee=-1;for(;;){const Ue=["count="+d];ee==-1?d>0?(ee=P[0].g,Ue.push("ofs="+ee)):ee=0:Ue.push("ofs="+ee);let fe=!0;for(let He=0;He<d;He++){var V=P[He].g;const sn=P[He].map;if(V-=ee,V<0)ee=Math.max(0,P[He].g-100),fe=!1;else try{V="req"+V+"_"||"";try{var $=sn instanceof Map?sn:Object.entries(sn);for(const[Ir,Un]of $){let Bn=Un;l(Un)&&(Bn=rt(Un)),Ue.push(V+Ir+"="+encodeURIComponent(Bn))}}catch(Ir){throw Ue.push(V+"type="+encodeURIComponent("_badmap")),Ir}}catch{p&&p(sn)}}if(fe){$=Ue.join("&");break e}}$=void 0}return o=o.i.splice(0,d),u.G=o,$}function vf(o){if(!o.g&&!o.v){o.Y=1;var u=o.Da;B||g(),z||(B(),z=!0),_.add(u,o),o.A=0}}function iu(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=ts(h(o.Da,o),Tf(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,Ef(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=ts(h(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),Fo(this),Ef(this))};function su(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Ef(o){o.g=new bn(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var u=rn(o.na);ge(u,"RID","rpc"),ge(u,"SID",o.M),ge(u,"AID",o.K),ge(u,"CI",o.F?"0":"1"),!o.F&&o.ia&&ge(u,"TO",o.ia),ge(u,"TYPE","xmlhttp"),fs(o,u),o.u&&o.o&&nu(u,o.u,o.o),o.O&&(o.g.H=o.O);var d=o.g;o=o.ba,d.M=1,d.A=bo(rn(u)),d.u=null,d.R=!0,Gd(d,o)}t.Va=function(){this.C!=null&&(this.C=null,Fo(this),iu(this),dt(19))};function Bo(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function wf(o,u){var d=null;if(o.g==u){Bo(o),su(o),o.g=null;var p=2}else if(Jl(o.h,u))d=u.G,Zd(o.h,u),p=1;else return;if(o.I!=0){if(u.o)if(p==1){d=u.u?u.u.length:0,u=Date.now()-u.F;var P=o.D;p=On(),U(p,new zd(p,d)),Uo(o)}else vf(o);else if(P=u.m,P==3||P==0&&u.X>0||!(p==1&&T0(o,u)||p==2&&iu(o)))switch(d&&d.length>0&&(u=o.h,u.i=u.i.concat(d)),P){case 1:Sr(o,5);break;case 4:Sr(o,10);break;case 3:Sr(o,6);break;default:Sr(o,2)}}}function Tf(o,u){let d=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(d*=2),d*u}function Sr(o,u){if(o.j.info("Error code "+u),u==2){var d=h(o.bb,o),p=o.Ua;const P=!p;p=new Ln(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ss(p,"https"),bo(p),P?g0(p.toString(),d):y0(p.toString(),d)}else dt(2);o.I=0,o.l&&o.l.pa(u),Sf(o),gf(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Sf(o){if(o.I=0,o.ja=[],o.l){const u=ef(o.h);(u.length!=0||o.i.length!=0)&&(x(o.ja,u),x(o.ja,o.i),o.h.i.length=0,C(o.i),o.i.length=0),o.l.oa()}}function If(o,u,d){var p=d instanceof Ln?rn(d):new Ln(d);if(p.g!="")u&&(p.g=u+"."+p.g),os(p,p.u);else{var P=a.location;p=P.protocol,u=u?u+"."+P.hostname:P.hostname,P=+P.port;const V=new Ln(null);p&&ss(V,p),u&&(V.g=u),P&&os(V,P),d&&(V.h=d),p=V}return d=o.G,u=o.wa,d&&u&&ge(p,d,u),ge(p,"VER",o.ka),fs(o,p),p}function kf(o,u,d){if(u&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Aa&&!o.ma?new Pe(new tu({ab:d})):new Pe(o.ma),u.Fa(o.L),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Af(){}t=Af.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function zo(){}zo.prototype.g=function(o,u){return new At(o,u)};function At(o,u){j.call(this),this.g=new mf(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(o?o["X-WebChannel-Client-Profile"]=u.sa:o={"X-WebChannel-Client-Profile":u.sa}),this.g.U=o,(o=u&&u.Qb)&&!T(o)&&(this.g.u=o),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!T(u)&&(this.g.G=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Jr(this)}m(At,j),At.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){ru(this.g)},At.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.v&&(d={},d.__data__=rt(o),o=d);u.i.push(new l0(u.Ya++,o)),u.I==3&&Uo(u)},At.prototype.N=function(){this.g.l=null,delete this.j,ru(this.g),delete this.g,At.Z.N.call(this)};function Cf(o){nn.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const d in u){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}m(Cf,nn);function Rf(){kt.call(this),this.status=1}m(Rf,kt);function Jr(o){this.g=o}m(Jr,Af),Jr.prototype.ra=function(){U(this.g,"a")},Jr.prototype.qa=function(o){U(this.g,new Cf(o))},Jr.prototype.pa=function(o){U(this.g,new Rf)},Jr.prototype.oa=function(){U(this.g,"b")},zo.prototype.createWebChannel=zo.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,A_=function(){return new zo},k_=function(){return On()},I_=We,$c={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mo.NO_ERROR=0,Mo.TIMEOUT=8,Mo.HTTP_ERROR=6,Ia=Mo,$d.COMPLETE="complete",S_=$d,vn.EventType=Dt,Dt.OPEN="a",Dt.CLOSE="b",Dt.ERROR="c",Dt.MESSAGE="d",j.prototype.listen=j.prototype.J,As=vn,Pe.prototype.listenOnce=Pe.prototype.K,Pe.prototype.getLastError=Pe.prototype.Ha,Pe.prototype.getLastErrorCode=Pe.prototype.ya,Pe.prototype.getStatus=Pe.prototype.ca,Pe.prototype.getResponseJson=Pe.prototype.La,Pe.prototype.getResponseText=Pe.prototype.la,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Fa,T_=Pe}).apply(typeof aa<"u"?aa:typeof self<"u"?self:typeof window<"u"?window:{});const Yp="@firebase/firestore",Xp="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new m_("@firebase/firestore");function ti(){return zr.logLevel}function H(t,...e){if(zr.logLevel<=oe.DEBUG){const n=e.map(rd);zr.debug(`Firestore (${qi}): ${t}`,...n)}}function xn(t,...e){if(zr.logLevel<=oe.ERROR){const n=e.map(rd);zr.error(`Firestore (${qi}): ${t}`,...n)}}function Mi(t,...e){if(zr.logLevel<=oe.WARN){const n=e.map(rd);zr.warn(`Firestore (${qi}): ${t}`,...n)}}function rd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,C_(t,r,n)}function C_(t,e,n){let r=`FIRESTORE (${qi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw xn(r),new Error(r)}function ce(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||C_(e,i,r)}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends $i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class OT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bT{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new R_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new at(e)}}class LT{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jT{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new LT(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FT{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ce(this.o===void 0,3512);const r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Jp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Jp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=UT(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ne(t,e){return t<e?-1:t>e?1:0}function qc(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Lu(i)===Lu(s)?ne(i,s):Lu(i)?1:-1}return ne(t.length,e.length)}const BT=55296,zT=57343;function Lu(t){const e=t.charCodeAt(0);return e>=BT&&e<=zT}function Oi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="__name__";class ln{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&K(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ln.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ln?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=ln.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ne(e.length,n.length)}static compareSegments(e,n){const r=ln.isNumericId(e),i=ln.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ln.extractNumericId(e).compare(ln.extractNumericId(n)):qc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return or.fromString(e.substring(4,e.length-2))}}class pe extends ln{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const $T=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends ln{construct(e,n,r){return new Je(e,n,r)}static isValidIdentifier(e){return $T.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zp}static keyField(){return new Je([Zp])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new W(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new W(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new W(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(pe.fromString(e))}static fromName(e){return new Q(pe.fromString(e).popFirst(5))}static empty(){return new Q(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t,e,n){if(!n)throw new W(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qT(t,e,n,r){if(e===!0&&r===!0)throw new W(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function em(t){if(!Q.isDocumentKey(t))throw new W(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tm(t){if(Q.isDocumentKey(t))throw new W(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function N_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Vl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K(12329,{type:typeof t})}function Us(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vl(t);throw new W(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ao(t,e){if(!N_(t))throw new W(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new W(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=-62135596800,rm=1e6;class _e{static now(){return _e.fromMillis(Date.now())}static fromDate(e){return _e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*rm);return new _e(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nm)throw new W(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rm}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ao(e,_e._jsonSchema))return new _e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_e._jsonSchemaVersion="firestore/timestamp/1.0",_e._jsonSchema={type:je("string",_e._jsonSchemaVersion),seconds:je("number"),nanoseconds:je("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new _e(0,0))}static max(){return new X(new _e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=-1;function WT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new _e(n+1,0):new _e(n,r));return new cr(i,Q.empty(),e)}function HT(t){return new cr(t.readTime,t.key,ho)}class cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new cr(X.min(),Q.empty(),ho)}static max(){return new cr(X.max(),Q.empty(),ho)}}function GT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wi(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==QT)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new b((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof b?n:b.resolve(n)}catch(n){return b.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):b.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):b.reject(n)}static resolve(e){return new b((n,r)=>{n(e)})}static reject(e){return new b((n,r)=>{r(e)})}static waitFor(e){return new b((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=b.resolve(!1);for(const r of e)n=n.next(i=>i?b.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new b((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const h=c;n(e[h]).next(f=>{a[h]=f,++l,l===s&&r(a)},f=>i(f))}})}static doWhile(e,n){return new b((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function YT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=-1;function Ml(t){return t==null}function il(t){return t===0&&1/t==-1/0}function XT(t){return typeof t=="number"&&Number.isInteger(t)&&!il(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="";function JT(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=im(e)),e=ZT(t.get(n),e);return im(e)}function ZT(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case x_:n+="";break;default:n+=s}}return n}function im(t){return t+x_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function V_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||Xe.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new la(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new la(this.root,e,this.comparator,!1)}getReverseIterator(){return new la(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new la(this.root,e,this.comparator,!0)}}class la{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xe{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Xe.RED,this.left=i??Xe.EMPTY,this.right=s??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Xe(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Xe.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Xe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new om(this.data.getIterator())}getIteratorFrom(e){return new om(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qe(this.comparator);return n.data=e,n}}class om{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new qe(Je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new D_("Invalid base64 string: "+s):s}}(e);return new tt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const eS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hr(t){if(ce(!!t,39018),typeof t=="string"){let e=0;const n=eS.exec(t);if(ce(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dr(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="server_timestamp",O_="__type__",b_="__previous_value__",L_="__local_write_time__";function od(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[O_])==null?void 0:r.stringValue)===M_}function Ol(t){const e=t.mapValue.fields[b_];return od(e)?Ol(e):e}function fo(t){const e=hr(t.mapValue.fields[L_].timestampValue);return new _e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n,r,i,s,a,l,c,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=f}}const sl="(default)";class po{constructor(e,n){this.projectId=e,this.database=n||sl}static empty(){return new po("","")}get isDefaultDatabase(){return this.database===sl}isEqual(e){return e instanceof po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="__type__",nS="__max__",ua={mapValue:{}},F_="__vector__",ol="value";function fr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?od(t)?4:iS(t)?9007199254740991:rS(t)?10:11:K(28295,{value:t})}function gn(t,e){if(t===e)return!0;const n=fr(t);if(n!==fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fo(t).isEqual(fo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=hr(i.timestampValue),l=hr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return dr(i.bytesValue).isEqual(dr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ve(i.geoPointValue.latitude)===Ve(s.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ve(i.integerValue)===Ve(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Ve(i.doubleValue),l=Ve(s.doubleValue);return a===l?il(a)===il(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Oi(t.arrayValue.values||[],e.arrayValue.values||[],gn);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(sm(a)!==sm(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!gn(a[c],l[c])))return!1;return!0}(t,e);default:return K(52216,{left:t})}}function mo(t,e){return(t.values||[]).find(n=>gn(n,e))!==void 0}function bi(t,e){if(t===e)return 0;const n=fr(t),r=fr(e);if(n!==r)return ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Ve(s.integerValue||s.doubleValue),c=Ve(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return am(t.timestampValue,e.timestampValue);case 4:return am(fo(t),fo(e));case 5:return qc(t.stringValue,e.stringValue);case 6:return function(s,a){const l=dr(s),c=dr(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=ne(l[h],c[h]);if(f!==0)return f}return ne(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=ne(Ve(s.latitude),Ve(a.latitude));return l!==0?l:ne(Ve(s.longitude),Ve(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return lm(t.arrayValue,e.arrayValue);case 10:return function(s,a){var y,C,x,M;const l=s.fields||{},c=a.fields||{},h=(y=l[ol])==null?void 0:y.arrayValue,f=(C=c[ol])==null?void 0:C.arrayValue,m=ne(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((M=f==null?void 0:f.values)==null?void 0:M.length)||0);return m!==0?m:lm(h,f)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===ua.mapValue&&a===ua.mapValue)return 0;if(s===ua.mapValue)return 1;if(a===ua.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),h=a.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const y=qc(c[m],f[m]);if(y!==0)return y;const C=bi(l[c[m]],h[f[m]]);if(C!==0)return C}return ne(c.length,f.length)}(t.mapValue,e.mapValue);default:throw K(23264,{he:n})}}function am(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);const n=hr(t),r=hr(e),i=ne(n.seconds,r.seconds);return i!==0?i:ne(n.nanos,r.nanos)}function lm(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=bi(n[i],r[i]);if(s)return s}return ne(n.length,r.length)}function Li(t){return Wc(t)}function Wc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return dr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Wc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Wc(n.fields[a])}`;return i+"}"}(t.mapValue):K(61005,{value:t})}function ka(t){switch(fr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ol(t);return e?16+ka(e):16;case 5:return 2*t.stringValue.length;case 6:return dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ka(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Hr(r.fields,(s,a)=>{i+=s.length+ka(a)}),i}(t.mapValue);default:throw K(13486,{value:t})}}function um(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hc(t){return!!t&&"integerValue"in t}function ad(t){return!!t&&"arrayValue"in t}function cm(t){return!!t&&"nullValue"in t}function hm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Aa(t){return!!t&&"mapValue"in t}function rS(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[j_])==null?void 0:r.stringValue)===F_}function Bs(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Hr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bs(t.arrayValue.values[n]);return e}return{...t}}function iS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Aa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bs(n)}setAll(e){let n=Je.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=Bs(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Aa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Aa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Hr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bt(Bs(this.value))}}function U_(t){const e=[];return Hr(t.fields,(n,r)=>{const i=new Je([n]);if(Aa(r)){const s=U_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new ut(e,0,X.min(),X.min(),X.min(),bt.empty(),0)}static newFoundDocument(e,n,r,i){return new ut(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new ut(e,2,n,X.min(),X.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,X.min(),X.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n){this.position=e,this.inclusive=n}}function dm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(a.referenceValue),n.key):r=bi(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function fm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n="asc"){this.field=e,this.dir=n}}function sS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{}class Le extends B_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aS(e,n,r):n==="array-contains"?new cS(e,r):n==="in"?new hS(e,r):n==="not-in"?new dS(e,r):n==="array-contains-any"?new fS(e,r):new Le(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lS(e,r):new uS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bi(n,this.value)):n!==null&&fr(this.value)===fr(n)&&this.matchesComparison(bi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zt extends B_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Zt(e,n)}matches(e){return z_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function z_(t){return t.op==="and"}function $_(t){return oS(t)&&z_(t)}function oS(t){for(const e of t.filters)if(e instanceof Zt)return!1;return!0}function Gc(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+Li(t.value);if($_(t))return t.filters.map(e=>Gc(e)).join(",");{const e=t.filters.map(n=>Gc(n)).join(",");return`${t.op}(${e})`}}function q_(t,e){return t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&gn(r.value,i.value)}(t,e):t instanceof Zt?function(r,i){return i instanceof Zt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&q_(a,i.filters[l]),!0):!1}(t,e):void K(19439)}function W_(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${Li(n.value)}`}(t):t instanceof Zt?function(n){return n.op.toString()+" {"+n.getFilters().map(W_).join(" ,")+"}"}(t):"Filter"}class aS extends Le{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class lS extends Le{constructor(e,n){super(e,"in",n),this.keys=H_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uS extends Le{constructor(e,n){super(e,"not-in",n),this.keys=H_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function H_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class cS extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ad(n)&&mo(n.arrayValue,this.value)}}class hS extends Le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mo(this.value.arrayValue,n)}}class dS extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mo(this.value.arrayValue,n)}}class fS extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ad(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function pm(t,e=null,n=[],r=[],i=null,s=null,a=null){return new pS(t,e,n,r,i,s,a)}function ld(t){const e=J(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Gc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ml(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Li(r)).join(",")),e.Te=n}return e.Te}function ud(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!q_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fm(t.startAt,e.startAt)&&fm(t.endAt,e.endAt)}function Qc(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mS(t,e,n,r,i,s,a,l){return new Gi(t,e,n,r,i,s,a,l)}function cd(t){return new Gi(t)}function mm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function G_(t){return t.collectionGroup!==null}function zs(t){const e=J(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new qe(Je.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new go(s,r))}),n.has(Je.keyField().canonicalString())||e.Ie.push(new go(Je.keyField(),r))}return e.Ie}function dn(t){const e=J(t);return e.Ee||(e.Ee=gS(e,zs(t))),e.Ee}function gS(t,e){if(t.limitType==="F")return pm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new go(i.field,s)});const n=t.endAt?new al(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new al(t.startAt.position,t.startAt.inclusive):null;return pm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kc(t,e){const n=t.filters.concat([e]);return new Gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ll(t,e,n){return new Gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bl(t,e){return ud(dn(t),dn(e))&&t.limitType===e.limitType}function Q_(t){return`${ld(dn(t))}|lt:${t.limitType}`}function ni(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>W_(i)).join(", ")}]`),Ml(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Li(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Li(i)).join(",")),`Target(${r})`}(dn(t))}; limitType=${t.limitType})`}function Ll(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of zs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,c){const h=dm(a,l,c);return a.inclusive?h<=0:h<0}(r.startAt,zs(r),i)||r.endAt&&!function(a,l,c){const h=dm(a,l,c);return a.inclusive?h>=0:h>0}(r.endAt,zs(r),i))}(t,e)}function yS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function K_(t){return(e,n)=>{let r=!1;for(const i of zs(t)){const s=_S(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _S(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,a,l){const c=a.data.field(s),h=l.data.field(s);return c!==null&&h!==null?bi(c,h):K(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return V_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=new Ae(Q.comparator);function Vn(){return vS}const Y_=new Ae(Q.comparator);function Cs(...t){let e=Y_;for(const n of t)e=e.insert(n.key,n);return e}function X_(t){let e=Y_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xr(){return $s()}function J_(){return $s()}function $s(){return new Gr(t=>t.toString(),(t,e)=>t.isEqual(e))}const ES=new Ae(Q.comparator),wS=new qe(Q.comparator);function re(...t){let e=wS;for(const n of t)e=e.add(n);return e}const TS=new qe(ne);function SS(){return TS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:il(e)?"-0":e}}function Z_(t){return{integerValue:""+t}}function IS(t,e){return XT(e)?Z_(e):hd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this._=void 0}}function kS(t,e,n){return t instanceof yo?function(i,s){const a={fields:{[O_]:{stringValue:M_},[L_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&od(s)&&(s=Ol(s)),s&&(a.fields[b_]=s),{mapValue:a}}(n,e):t instanceof _o?tv(t,e):t instanceof vo?nv(t,e):function(i,s){const a=ev(i,s),l=gm(a)+gm(i.Ae);return Hc(a)&&Hc(i.Ae)?Z_(l):hd(i.serializer,l)}(t,e)}function AS(t,e,n){return t instanceof _o?tv(t,e):t instanceof vo?nv(t,e):n}function ev(t,e){return t instanceof ul?function(r){return Hc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class yo extends jl{}class _o extends jl{constructor(e){super(),this.elements=e}}function tv(t,e){const n=rv(e);for(const r of t.elements)n.some(i=>gn(i,r))||n.push(r);return{arrayValue:{values:n}}}class vo extends jl{constructor(e){super(),this.elements=e}}function nv(t,e){let n=rv(e);for(const r of t.elements)n=n.filter(i=>!gn(i,r));return{arrayValue:{values:n}}}class ul extends jl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function gm(t){return Ve(t.integerValue||t.doubleValue)}function rv(t){return ad(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n){this.field=e,this.transform=n}}function RS(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof _o&&i instanceof _o||r instanceof vo&&i instanceof vo?Oi(r.elements,i.elements,gn):r instanceof ul&&i instanceof ul?gn(r.Ae,i.Ae):r instanceof yo&&i instanceof yo}(t.transform,e.transform)}class PS{constructor(e,n){this.version=e,this.transformResults=n}}class kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ca(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fl{}function iv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ov(t.key,kn.none()):new Co(t.key,t.data,kn.none());{const n=t.data,r=bt.empty();let i=new qe(Je.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Qr(t.key,r,new Kt(i.toArray()),kn.none())}}function NS(t,e,n){t instanceof Co?function(i,s,a){const l=i.value.clone(),c=_m(i.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Qr?function(i,s,a){if(!Ca(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=_m(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(sv(i)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function qs(t,e,n,r){return t instanceof Co?function(s,a,l,c){if(!Ca(s.precondition,a))return l;const h=s.value.clone(),f=vm(s.fieldTransforms,c,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Qr?function(s,a,l,c){if(!Ca(s.precondition,a))return l;const h=vm(s.fieldTransforms,c,a),f=a.data;return f.setAll(sv(s)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,a,l){return Ca(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function xS(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ev(r.transform,i||null);s!=null&&(n===null&&(n=bt.empty()),n.set(r.field,s))}return n||null}function ym(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Oi(r,i,(s,a)=>RS(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Co extends Fl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qr extends Fl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function sv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _m(t,e,n){const r=new Map;ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,AS(a,l,n[i]))}return r}function vm(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,kS(s,a,e))}return r}class ov extends Fl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VS extends Fl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&NS(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qs(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=J_();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const c=iv(a,l);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&Oi(this.mutations,e.mutations,(n,r)=>ym(n,r))&&Oi(this.baseMutations,e.baseMutations,(n,r)=>ym(n,r))}}class dd{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return ES}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new dd(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,se;function bS(t){switch(t){case O.OK:return K(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return K(15467,{code:t})}}function av(t){if(t===void 0)return xn("GRPC error has no .code"),O.UNKNOWN;switch(t){case Oe.OK:return O.OK;case Oe.CANCELLED:return O.CANCELLED;case Oe.UNKNOWN:return O.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return O.INTERNAL;case Oe.UNAVAILABLE:return O.UNAVAILABLE;case Oe.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Oe.NOT_FOUND:return O.NOT_FOUND;case Oe.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Oe.ABORTED:return O.ABORTED;case Oe.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Oe.DATA_LOSS:return O.DATA_LOSS;default:return K(39323,{code:t})}}(se=Oe||(Oe={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new or([4294967295,4294967295],0);function Em(t){const e=LS().encode(t),n=new w_;return n.update(e),new Uint8Array(n.digest())}function wm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new or([n,r],0),new or([i,s],0)]}class fd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rs(`Invalid padding: ${n}`);if(r<0)throw new Rs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rs(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=or.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(or.fromNumber(r)));return i.compare(jS)===1&&(i=new or([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Em(e),[r,i]=wm(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new fd(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=Em(e),[r,i]=wm(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ro.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ul(X.min(),i,new Ae(ne),Vn(),re())}}class Ro{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ro(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class lv{constructor(e,n){this.targetId=e,this.Ce=n}}class uv{constructor(e,n,r=tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Tm{constructor(){this.ve=0,this.Fe=Sm(),this.Me=tt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=re(),n=re(),r=re();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:s})}}),new Ro(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Sm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class FS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vn(),this.Je=ca(),this.He=ca(),this.Ye=new Ae(ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Qc(s))if(r===0){const a=new Q(s.path);this.et(n,a,ut.newNoDocument(a,X.min()))}else ce(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=dr(r).toUint8Array()}catch(c){if(c instanceof D_)return Mi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new fd(a,i,s)}catch(c){return Mi(c instanceof Rs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Qc(l.target)){const c=new Q(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,ut.newNoDocument(c,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let r=re();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new Ul(e,n,this.Ye,this.je,r);return this.je=Vn(),this.Je=ca(),this.He=ca(),this.Ye=new Ae(ne),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Tm,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qe(ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qe(ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Tm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ca(){return new Ae(Q.comparator)}function Sm(){return new Ae(Q.comparator)}const US={asc:"ASCENDING",desc:"DESCENDING"},BS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zS={and:"AND",or:"OR"};class $S{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yc(t,e){return t.useProto3Json||Ml(e)?e:{value:e}}function cl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qS(t,e){return cl(t,e.toTimestamp())}function fn(t){return ce(!!t,49232),X.fromTimestamp(function(n){const r=hr(n);return new _e(r.seconds,r.nanos)}(t))}function pd(t,e){return Xc(t,e).canonicalString()}function Xc(t,e){const n=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hv(t){const e=pe.fromString(t);return ce(gv(e),10190,{key:e.toString()}),e}function Jc(t,e){return pd(t.databaseId,e.path)}function ju(t,e){const n=hv(e);if(n.get(1)!==t.databaseId.projectId)throw new W(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(fv(n))}function dv(t,e){return pd(t.databaseId,e)}function WS(t){const e=hv(t);return e.length===4?pe.emptyPath():fv(e)}function Zc(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fv(t){return ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Im(t,e,n){return{name:Jc(t,e),fields:n.value.mapValue.fields}}function HS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:K(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(ce(f===void 0||typeof f=="string",58123),tt.fromBase64String(f||"")):(ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),tt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const f=h.code===void 0?O.UNKNOWN:av(h.code);return new W(f,h.message||"")}(a);n=new uv(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ju(t,r.document.name),s=fn(r.document.updateTime),a=r.document.createTime?fn(r.document.createTime):X.min(),l=new bt({mapValue:{fields:r.document.fields}}),c=ut.newFoundDocument(i,s,a,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Ra(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ju(t,r.document),s=r.readTime?fn(r.readTime):X.min(),a=ut.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Ra([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ju(t,r.document),s=r.removedTargetIds||[];n=new Ra([],s,i,null)}else{if(!("filter"in e))return K(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new OS(i,s),l=r.targetId;n=new lv(l,a)}}return n}function GS(t,e){let n;if(e instanceof Co)n={update:Im(t,e.key,e.value)};else if(e instanceof ov)n={delete:Jc(t,e.key)};else if(e instanceof Qr)n={update:Im(t,e.key,e.data),updateMask:nI(e.fieldMask)};else{if(!(e instanceof VS))return K(16599,{Vt:e.type});n={verify:Jc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof yo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _o)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ul)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw K(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:qS(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K(27497)}(t,e.precondition)),n}function QS(t,e){return t&&t.length>0?(ce(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?fn(i.updateTime):fn(s);return a.isEqual(X.min())&&(a=fn(s)),new PS(a,i.transformResults||[])}(n,e))):[]}function KS(t,e){return{documents:[dv(t,e.path)]}}function YS(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dv(t,i);const s=function(h){if(h.length!==0)return mv(Zt.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(f=>function(y){return{field:ri(y.field),direction:ZS(y.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Yc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function XS(t){let e=WS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ce(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(m){const y=pv(m);return y instanceof Zt&&$_(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(y=>function(x){return new go(ii(x.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,Ml(y)?null:y}(n.limit));let c=null;n.startAt&&(c=function(m){const y=!!m.before,C=m.values||[];return new al(C,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,C=m.values||[];return new al(C,y)}(n.endAt)),mS(e,i,a,s,l,"F",c,h)}function JS(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ii(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ii(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ii(n.unaryFilter.field);return Le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ii(n.unaryFilter.field);return Le.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(t):t.fieldFilter!==void 0?function(n){return Le.create(ii(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zt.create(n.compositeFilter.filters.map(r=>pv(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(t):K(30097,{filter:t})}function ZS(t){return US[t]}function eI(t){return BS[t]}function tI(t){return zS[t]}function ri(t){return{fieldPath:t.canonicalString()}}function ii(t){return Je.fromServerFormat(t.fieldPath)}function mv(t){return t instanceof Le?function(n){if(n.op==="=="){if(hm(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NAN"}};if(cm(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hm(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NOT_NAN"}};if(cm(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ri(n.field),op:eI(n.op),value:n.value}}}(t):t instanceof Zt?function(n){const r=n.getFilters().map(i=>mv(i));return r.length===1?r[0]:{compositeFilter:{op:tI(n.op),filters:r}}}(t):K(54877,{filter:t})}function nI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n,r,i,s=X.min(),a=X.min(),l=tt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Kn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.yt=e}}function iI(t){const e=XS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ll(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(){this.Cn=new oI}addToCollectionParentIndex(e,n){return this.Cn.add(n),b.resolve()}getCollectionParents(e,n){return b.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return b.resolve()}deleteFieldIndex(e,n){return b.resolve()}deleteAllFieldIndexes(e){return b.resolve()}createTargetIndexes(e,n){return b.resolve()}getDocumentsMatchingTarget(e,n){return b.resolve(null)}getIndexType(e,n){return b.resolve(0)}getFieldIndexes(e,n){return b.resolve([])}getNextCollectionGroupToUpdate(e){return b.resolve(null)}getMinOffset(e,n){return b.resolve(cr.min())}getMinOffsetFromCollectionGroup(e,n){return b.resolve(cr.min())}updateCollectionGroup(e,n,r){return b.resolve()}updateIndexEntries(e,n){return b.resolve()}}class oI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qe(pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yv=41943040;class _t{static withCacheSize(e){return new _t(e,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_t.DEFAULT_COLLECTION_PERCENTILE=10,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_t.DEFAULT=new _t(yv,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_t.DISABLED=new _t(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ji(0)}static cr(){return new ji(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="LruGarbageCollector",aI=1048576;function Cm([t,e],[n,r]){const i=ne(t,n);return i===0?ne(e,r):i}class lI{constructor(e){this.Ir=e,this.buffer=new qe(Cm),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Cm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class uI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(Am,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hi(n)?H(Am,"Ignoring IndexedDB error during garbage collection: ",n):await Wi(n)}await this.Vr(3e5)})}}class cI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return b.resolve(Dl.ce);const r=new lI(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),b.resolve(km)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),km):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,a,l,c,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),ti()<=oe.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),b.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function hI(t,e){return new cI(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.changes=new Gr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?b.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&qs(r.mutation,i,Kt.empty(),_e.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const i=xr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Cs();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=xr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=Vn();const a=$s(),l=function(){return $s()}();return n.forEach((c,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof Qr)?s=s.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),qs(f.mutation,h,f.mutation.getFieldMask(),_e.now())):a.set(h.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,f)=>a.set(h,f)),n.forEach((h,f)=>l.set(h,new fI(f,a.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=$s();let i=new Ae((a,l)=>a-l),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let f=r.get(c)||Kt.empty();f=l.applyToLocalView(h,f),r.set(c,f);const m=(i.get(l.batchId)||re()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,f=c.value,m=J_();f.forEach(y=>{if(!s.has(y)){const C=iv(n.get(y),r.get(y));C!==null&&m.set(y,C),s=s.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,m))}return b.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):G_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):b.resolve(xr());let l=ho,c=s;return a.next(h=>b.forEach(h,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(f)?b.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{c=c.insert(f,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,re())).next(f=>({batchId:l,changes:X_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=Cs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Cs();return this.indexManager.getCollectionParents(e,s).next(l=>b.forEach(l,c=>{const h=function(m,y){return new Gi(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((m,y)=>{a=a.insert(m,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,ut.newInvalidDocument(f)))});let l=Cs();return a.forEach((c,h)=>{const f=s.get(c);f!==void 0&&qs(f.mutation,h,Kt.empty(),_e.now()),Ll(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return b.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fn(i.createTime)}}(n)),b.resolve()}getNamedQuery(e,n){return b.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:iI(i.bundledQuery),readTime:fn(i.readTime)}}(n)),b.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.overlays=new Ae(Q.comparator),this.qr=new Map}getOverlay(e,n){return b.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xr();return b.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),b.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),b.resolve()}getOverlaysForCollection(e,n,r){const i=xr(),s=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return b.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ae((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=xr(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=xr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return b.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new MS(n,r));let s=this.qr.get(n);s===void 0&&(s=re(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return b.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,b.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(){this.Qr=new qe(Ge.$r),this.Ur=new qe(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ge(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Q(new pe([])),r=new Ge(n,e),i=new Ge(n,e+1),s=[];return this.Ur.forEachInRange([r,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Q(new pe([])),r=new Ge(n,e),i=new Ge(n,e+1);let s=re();return this.Ur.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Ge(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Q.comparator(e.key,n.key)||ne(e.Yr,n.Yr)}static Kr(e,n){return ne(e.Yr,n.Yr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qe(Ge.$r)}checkEmpty(e){return b.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new DS(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.Zr=this.Zr.add(new Ge(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return b.resolve(a)}lookupMutationBatch(e,n){return b.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return b.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(this.mutationQueue.length===0?sd:this.tr-1)}getAllMutationBatches(e){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),i=new Ge(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],a=>{const l=this.Xr(a.Yr);s.push(l)}),b.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(ne);return n.forEach(i=>{const s=new Ge(i,0),a=new Ge(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{r=r.add(l.Yr)})}),b.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Q.isDocumentKey(s)||(s=s.child(""));const a=new Ge(new Q(s),0);let l=new qe(ne);return this.Zr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.Yr)),!0)},a),b.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return b.forEach(n.mutations,i=>{const s=new Ge(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ge(n,0),i=this.Zr.firstAfterOrEqual(r);return b.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,b.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.ri=e,this.docs=function(){return new Ae(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return b.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=Vn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ut.newInvalidDocument(i))}),b.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Vn();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||GT(HT(f),r)<=0||(i.has(f.key)||Ll(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return b.resolve(s)}getAllFromCollectionGroup(e,n,r,i){K(9500)}ii(e,n){return b.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new EI(this)}getSize(e){return b.resolve(this.size)}}class EI extends dI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),b.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.persistence=e,this.si=new Gr(n=>ld(n),ud),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.oi=0,this._i=new md,this.targetCount=0,this.ai=ji.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),b.resolve()}getLastRemoteSnapshotVersion(e){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return b.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),b.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ji(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,b.resolve()}updateTargetData(e,n){return this.Pr(n),b.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,b.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),b.waitFor(s).next(()=>i)}getTargetCount(e){return b.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return b.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),b.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),b.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),b.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return b.resolve(r)}containsKey(e,n){return b.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,n){this.ui={},this.overlays={},this.ci=new Dl(0),this.li=!1,this.li=!0,this.hi=new yI,this.referenceDelegate=e(this),this.Pi=new wI(this),this.indexManager=new sI,this.remoteDocumentCache=function(i){return new vI(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new rI(n),this.Ii=new mI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new _I(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const i=new TI(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return b.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class TI extends KT{constructor(e){super(),this.currentSequenceNumber=e}}class gd{constructor(e){this.persistence=e,this.Ri=new md,this.Vi=null}static mi(e){return new gd(e)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),b.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),b.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),b.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.fi,r=>{const i=Q.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return b.or([()=>b.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class hl{constructor(e,n){this.persistence=e,this.pi=new Gr(r=>JT(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=hI(this,n)}static mi(e,n){return new hl(e,n)}Ei(){}di(e){return b.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return b.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?b.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,s.removeEntry(a,X.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),b.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),b.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),b.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),b.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ka(e.data.value)),n}br(e,n,r){return b.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return b.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=re(),i=re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new yd(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return g1()?8:YT(p1())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new SI;return this.Ss(e,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ti()<=oe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ni(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),b.resolve()):(ti()<=oe.DEBUG&&H("QueryEngine","Query:",ni(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ti()<=oe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ni(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(n))):b.resolve())}ys(e,n){if(mm(n))return b.resolve(null);let r=dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ll(n,null,"F"),r=dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=re(...s);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.Ds(n,l);return this.Cs(n,h,a,c.readTime)?this.ys(e,ll(n,null,"F")):this.vs(e,h,n,c)}))})))}ws(e,n,r,i){return mm(n)||i.isEqual(X.min())?b.resolve(null):this.ps.getDocuments(e,r).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,r,i)?b.resolve(null):(ti()<=oe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ni(n)),this.vs(e,a,n,WT(i,ho)).next(l=>l))})}Ds(e,n){let r=new qe(K_(e));return n.forEach((i,s)=>{Ll(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return ti()<=oe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ni(n)),this.ps.getDocumentsMatchingQuery(e,n,cr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="LocalStore",kI=3e8;class AI{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ae(ne),this.xs=new Gr(s=>ld(s),ud),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function CI(t,e,n,r){return new AI(t,e,n,r)}async function vv(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let c=re();for(const h of i){a.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of s){l.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function RI(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,h,f){const m=h.batch,y=m.keys();let C=b.resolve();return y.forEach(x=>{C=C.next(()=>f.getEntry(c,x)).next(M=>{const L=h.docVersions.get(x);ce(L!==null,48541),M.version.compareTo(L)<0&&(m.applyToRemoteDocument(M,h),M.isValidDocument()&&(M.setReadTime(h.commitVersion),f.addEntry(M)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=re();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Ev(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function PI(t,e){const n=J(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;l.push(n.Pi.removeMatchingKeys(s,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(s,f.addedDocuments,m)));let C=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?C=C.withResumeToken(tt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(f.resumeToken,r)),i=i.insert(m,C),function(M,L,k){return M.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=kI?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(y,C,f)&&l.push(n.Pi.updateTargetData(s,C))});let c=Vn(),h=re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(NI(s,a,e.documentUpdates).next(f=>{c=f.ks,h=f.qs})),!r.isEqual(X.min())){const f=n.Pi.getLastRemoteSnapshotVersion(s).next(m=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return b.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(n.Ms=i,s))}function NI(t,e,n){let r=re(),i=re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Vn();return n.forEach((l,c)=>{const h=s.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):H(_d,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{ks:a,qs:i}})}function xI(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=sd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function VI(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,b.resolve(i)):n.Pi.allocateTargetId(r).next(a=>(i=new Kn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function eh(t,e,n){const r=J(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Hi(a))throw a;H(_d,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Rm(t,e,n){const r=J(t);let i=X.min(),s=re();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,f){const m=J(c),y=m.xs.get(f);return y!==void 0?b.resolve(m.Ms.get(y)):m.Pi.getTargetData(h,f)}(r,a,dn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?i:X.min(),n?s:re())).next(l=>(DI(r,yS(e),l),{documents:l,Qs:s})))}function DI(t,e,n){let r=t.Os.get(e)||X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class Pm{constructor(){this.activeTargetIds=SS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MI{constructor(){this.Mo=new Pm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Pm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="ConnectivityMonitor";class xm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(Nm,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(Nm,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ha=null;function th(){return ha===null?ha=function(){return 268435456+Math.round(2147483648*Math.random())}():ha++,"0x"+ha.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu="RestConnection",bI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===sl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const a=th(),l=this.zo(e,n.toUriEncodedString());H(Fu,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:h}=new URL(l),f=td(h);return this.Jo(e,l,c,r,f).then(m=>(H(Fu,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Mi(Fu,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,i,s,a){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=bI[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="WebChannelConnection";class FI extends LI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const a=th();return new Promise((l,c)=>{const h=new T_;h.setWithCredentials(!0),h.listenOnce(S_.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Ia.NO_ERROR:const m=h.getResponseJson();H(ot,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case Ia.TIMEOUT:H(ot,`RPC '${e}' ${a} timed out`),c(new W(O.DEADLINE_EXCEEDED,"Request time out"));break;case Ia.HTTP_ERROR:const y=h.getStatus();if(H(ot,`RPC '${e}' ${a} failed with status:`,y,"response text:",h.getResponseText()),y>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const x=C==null?void 0:C.error;if(x&&x.status&&x.message){const M=function(k){const E=k.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(E)>=0?E:O.UNKNOWN}(x.status);c(new W(M,x.message))}else c(new W(O.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new W(O.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(ot,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(i);H(ot,`RPC '${e}' ${a} sending request:`,i),h.send(n,"POST",f,r,15)})}T_(e,n,r){const i=th(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=A_(),l=k_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=s.join("");H(ot,`Creating RPC '${e}' stream ${i}: ${f}`,c);const m=a.createWebChannel(f,c);this.I_(m);let y=!1,C=!1;const x=new jI({Yo:L=>{C?H(ot,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(y||(H(ot,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),H(ot,`RPC '${e}' stream ${i} sending:`,L),m.send(L))},Zo:()=>m.close()}),M=(L,k,E)=>{L.listen(k,A=>{try{E(A)}catch(D){setTimeout(()=>{throw D},0)}})};return M(m,As.EventType.OPEN,()=>{C||(H(ot,`RPC '${e}' stream ${i} transport opened.`),x.o_())}),M(m,As.EventType.CLOSE,()=>{C||(C=!0,H(ot,`RPC '${e}' stream ${i} transport closed`),x.a_(),this.E_(m))}),M(m,As.EventType.ERROR,L=>{C||(C=!0,Mi(ot,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),x.a_(new W(O.UNAVAILABLE,"The operation could not be completed")))}),M(m,As.EventType.MESSAGE,L=>{var k;if(!C){const E=L.data[0];ce(!!E,16349);const A=E,D=(A==null?void 0:A.error)||((k=A[0])==null?void 0:k.error);if(D){H(ot,`RPC '${e}' stream ${i} received error:`,D);const B=D.status;let z=function(v){const S=Oe[v];if(S!==void 0)return av(S)}(B),_=D.message;z===void 0&&(z=O.INTERNAL,_="Unknown error status: "+B+" with message "+D.message),C=!0,x.a_(new W(z,_)),m.close()}else H(ot,`RPC '${e}' stream ${i} received:`,E),x.u_(E)}}),M(l,I_.STAT_EVENT,L=>{L.stat===$c.PROXY?H(ot,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===$c.NOPROXY&&H(ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Uu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){return new $S(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="PersistentStream";class Tv{constructor(e,n,r,i,s,a,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(xn(n.toString()),xn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new W(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(Vm,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(Vm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UI extends Tv{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=HS(this.serializer,e),r=function(s){if(!("targetChange"in s))return X.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?X.min():a.readTime?fn(a.readTime):X.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Zc(this.serializer),n.addTarget=function(s,a){let l;const c=a.target;if(l=Qc(c)?{documents:KS(s,c)}:{query:YS(s,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=cv(s,a.resumeToken);const h=Yc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(X.min())>0){l.readTime=cl(s,a.snapshotVersion.toTimestamp());const h=Yc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=JS(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Zc(this.serializer),n.removeTarget=e,this.q_(n)}}class BI extends Tv{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=QS(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Zc(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>GS(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{}class $I extends zI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new W(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,Xc(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(O.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Xc(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new W(O.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class qI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="RemoteStore";class WI{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Kr(this)&&(H($r,"Restarting streams for network reachability change."),await async function(c){const h=J(c);h.Ea.add(4),await Po(h),h.Ra.set("Unknown"),h.Ea.delete(4),await zl(h)}(this))})}),this.Ra=new qI(r,i)}}async function zl(t){if(Kr(t))for(const e of t.da)await e(!0)}async function Po(t){for(const e of t.da)await e(!1)}function Sv(t,e){const n=J(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Td(n)?wd(n):Qi(n).O_()&&Ed(n,e))}function vd(t,e){const n=J(t),r=Qi(n);n.Ia.delete(e),r.O_()&&Iv(n,e),n.Ia.size===0&&(r.O_()?r.L_():Kr(n)&&n.Ra.set("Unknown"))}function Ed(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qi(t).Y_(e)}function Iv(t,e){t.Va.Ue(e),Qi(t).Z_(e)}function wd(t){t.Va=new FS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Qi(t).start(),t.Ra.ua()}function Td(t){return Kr(t)&&!Qi(t).x_()&&t.Ia.size>0}function Kr(t){return J(t).Ea.size===0}function kv(t){t.Va=void 0}async function HI(t){t.Ra.set("Online")}async function GI(t){t.Ia.forEach((e,n)=>{Ed(t,e)})}async function QI(t,e){kv(t),Td(t)?(t.Ra.ha(e),wd(t)):t.Ra.set("Unknown")}async function KI(t,e,n){if(t.Ra.set("Online"),e instanceof uv&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){H($r,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dl(t,r)}else if(e instanceof Ra?t.Va.Ze(e):e instanceof lv?t.Va.st(e):t.Va.tt(e),!n.isEqual(X.min()))try{const r=await Ev(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.Ia.get(h);f&&s.Ia.set(h,f.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,h)=>{const f=s.Ia.get(c);if(!f)return;s.Ia.set(c,f.withResumeToken(tt.EMPTY_BYTE_STRING,f.snapshotVersion)),Iv(s,c);const m=new Kn(f.target,c,h,f.sequenceNumber);Ed(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H($r,"Failed to raise snapshot:",r),await dl(t,r)}}async function dl(t,e,n){if(!Hi(e))throw e;t.Ea.add(1),await Po(t),t.Ra.set("Offline"),n||(n=()=>Ev(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H($r,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await zl(t)})}function Av(t,e){return e().catch(n=>dl(t,n,e))}async function $l(t){const e=J(t),n=pr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sd;for(;YI(e);)try{const i=await xI(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,XI(e,i)}catch(i){await dl(e,i)}Cv(e)&&Rv(e)}function YI(t){return Kr(t)&&t.Ta.length<10}function XI(t,e){t.Ta.push(e);const n=pr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Cv(t){return Kr(t)&&!pr(t).x_()&&t.Ta.length>0}function Rv(t){pr(t).start()}async function JI(t){pr(t).ra()}async function ZI(t){const e=pr(t);for(const n of t.Ta)e.ea(n.mutations)}async function ek(t,e,n){const r=t.Ta.shift(),i=dd.from(r,e,n);await Av(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await $l(t)}async function tk(t,e){e&&pr(t).X_&&await async function(r,i){if(function(a){return bS(a)&&a!==O.ABORTED}(i.code)){const s=r.Ta.shift();pr(r).B_(),await Av(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await $l(r)}}(t,e),Cv(t)&&Rv(t)}async function Dm(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),H($r,"RemoteStore received new credentials");const r=Kr(n);n.Ea.add(3),await Po(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await zl(n)}async function nk(t,e){const n=J(t);e?(n.Ea.delete(2),await zl(n)):e||(n.Ea.add(2),await Po(n),n.Ra.set("Unknown"))}function Qi(t){return t.ma||(t.ma=function(n,r,i){const s=J(n);return s.sa(),new UI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:HI.bind(null,t),t_:GI.bind(null,t),r_:QI.bind(null,t),H_:KI.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Td(t)?wd(t):t.Ra.set("Unknown")):(await t.ma.stop(),kv(t))})),t.ma}function pr(t){return t.fa||(t.fa=function(n,r,i){const s=J(n);return s.sa(),new BI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:JI.bind(null,t),r_:tk.bind(null,t),ta:ZI.bind(null,t),na:ek.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await $l(t)):(await t.fa.stop(),t.Ta.length>0&&(H($r,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new Sd(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Id(t,e){if(xn("AsyncQueue",`${e}: ${t}`),Hi(t))return new W(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{static emptySet(e){return new Ii(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=Cs(),this.sortedSet=new Ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ii)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ii;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(){this.ga=new Ae(Q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):K(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fi{constructor(e,n,r,i,s,a,l,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Fi(e,n,Ii.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class ik{constructor(){this.queries=Om(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=J(n),s=i.queries;i.queries=Om(),s.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new W(O.ABORTED,"Firestore shutting down"))}}function Om(){return new Gr(t=>Q_(t),bl)}async function sk(t,e){const n=J(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new rk,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=Id(a,`Initialization of query '${ni(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&kd(n)}async function ok(t,e){const n=J(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ak(t,e){const n=J(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(i)&&(r=!0);a.wa=i}}r&&kd(n)}function lk(t,e,n){const r=J(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function kd(t){t.Ca.forEach(e=>{e.next()})}var nh,bm;(bm=nh||(nh={})).Ma="default",bm.Cache="cache";class uk{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Fi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e){this.key=e}}class Nv{constructor(e){this.key=e}}class ck{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=re(),this.mutatedKeys=re(),this.eu=K_(e),this.tu=new Ii(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Mm,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),C=Ll(this.query,m)?m:null,x=!!y&&this.mutatedKeys.has(y.key),M=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let L=!1;y&&C?y.data.isEqual(C.data)?x!==M&&(r.track({type:3,doc:C}),L=!0):this.su(y,C)||(r.track({type:2,doc:C}),L=!0,(c&&this.eu(C,c)>0||h&&this.eu(C,h)<0)&&(l=!0)):!y&&C?(r.track({type:0,doc:C}),L=!0):y&&!C&&(r.track({type:1,doc:y}),L=!0,(c||h)&&(l=!0)),L&&(C?(a=a.add(C),s=M?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((f,m)=>function(C,x){const M=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:L})}};return M(C)-M(x)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,h=c!==this.Za;return this.Za=c,a.length!==0||h?{snapshot:new Fi(this.query,e.tu,s,a,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Mm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=re(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Nv(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Pv(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=re();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Fi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ad="SyncEngine";class hk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dk{constructor(e){this.key=e,this.hu=!1}}class fk{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Gr(l=>Q_(l),bl),this.Iu=new Map,this.Eu=new Set,this.du=new Ae(Q.comparator),this.Au=new Map,this.Ru=new md,this.Vu={},this.mu=new Map,this.fu=ji.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pk(t,e,n=!0){const r=bv(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await xv(r,e,n,!0),i}async function mk(t,e){const n=bv(t);await xv(n,e,!0,!1)}async function xv(t,e,n,r){const i=await VI(t.localStore,dn(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await gk(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Sv(t.remoteStore,i),l}async function gk(t,e,n,r,i){t.pu=(m,y,C)=>async function(M,L,k,E){let A=L.view.ru(k);A.Cs&&(A=await Rm(M.localStore,L.query,!1).then(({documents:_})=>L.view.ru(_,A)));const D=E&&E.targetChanges.get(L.targetId),B=E&&E.targetMismatches.get(L.targetId)!=null,z=L.view.applyChanges(A,M.isPrimaryClient,D,B);return jm(M,L.targetId,z.au),z.snapshot}(t,m,y,C);const s=await Rm(t.localStore,e,!0),a=new ck(e,s.Qs),l=a.ru(s.documents),c=Ro.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=a.applyChanges(l,t.isPrimaryClient,c);jm(t,n,h.au);const f=new hk(e,n,a);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function yk(t,e,n){const r=J(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!bl(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await eh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vd(r.remoteStore,i.targetId),rh(r,i.targetId)}).catch(Wi)):(rh(r,i.targetId),await eh(r.localStore,i.targetId,!0))}async function _k(t,e){const n=J(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vd(n.remoteStore,r.targetId))}async function vk(t,e,n){const r=Ak(t);try{const i=await function(a,l){const c=J(a),h=_e.now(),f=l.reduce((C,x)=>C.add(x.key),re());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",C=>{let x=Vn(),M=re();return c.Ns.getEntries(C,f).next(L=>{x=L,x.forEach((k,E)=>{E.isValidDocument()||(M=M.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(C,x)).next(L=>{m=L;const k=[];for(const E of l){const A=xS(E,m.get(E.key).overlayedDocument);A!=null&&k.push(new Qr(E.key,A,U_(A.value.mapValue),kn.exists(!0)))}return c.mutationQueue.addMutationBatch(C,h,k,l)}).next(L=>{y=L;const k=L.applyToLocalDocumentSet(m,M);return c.documentOverlayCache.saveOverlays(C,L.batchId,k)})}).then(()=>({batchId:y.batchId,changes:X_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,c){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ae(ne)),h=h.insert(l,c),a.Vu[a.currentUser.toKey()]=h}(r,i.batchId,n),await No(r,i.changes),await $l(r.remoteStore)}catch(i){const s=Id(i,"Failed to persist write");n.reject(s)}}async function Vv(t,e){const n=J(t);try{const r=await PI(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Au.get(s);a&&(ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ce(a.hu,14607):i.removedDocuments.size>0&&(ce(a.hu,42227),a.hu=!1))}),await No(n,r,e)}catch(r){await Wi(r)}}function Lm(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const c=J(a);c.onlineState=l;let h=!1;c.queries.forEach((f,m)=>{for(const y of m.Sa)y.va(l)&&(h=!0)}),h&&kd(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ek(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Ae(Q.comparator);a=a.insert(s,ut.newNoDocument(s,X.min()));const l=re().add(s),c=new Ul(X.min(),new Map,new Ae(ne),a,l);await Vv(r,c),r.du=r.du.remove(s),r.Au.delete(e),Cd(r)}else await eh(r.localStore,e,!1).then(()=>rh(r,e,n)).catch(Wi)}async function wk(t,e){const n=J(t),r=e.batch.batchId;try{const i=await RI(n.localStore,e);Mv(n,r,null),Dv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await No(n,i)}catch(i){await Wi(i)}}async function Tk(t,e,n){const r=J(t);try{const i=await function(a,l){const c=J(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(ce(m!==null,37113),f=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(r.localStore,e);Mv(r,e,n),Dv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await No(r,i)}catch(i){await Wi(i)}}function Dv(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Mv(t,e,n){const r=J(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function rh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Ov(t,r)})}function Ov(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(vd(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Cd(t))}function jm(t,e,n){for(const r of n)r instanceof Pv?(t.Ru.addReference(r.key,e),Sk(t,r)):r instanceof Nv?(H(Ad,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Ov(t,r.key)):K(19791,{wu:r})}function Sk(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(Ad,"New document in limbo: "+n),t.Eu.add(r),Cd(t))}function Cd(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Q(pe.fromString(e)),r=t.fu.next();t.Au.set(r,new dk(n)),t.du=t.du.insert(n,r),Sv(t.remoteStore,new Kn(dn(cd(n.path)),r,"TargetPurposeLimboResolution",Dl.ce))}}async function No(t,e,n){const r=J(t),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){i.push(h);const m=yd.As(c.targetId,h);s.push(m)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(c,h){const f=J(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>b.forEach(h,y=>b.forEach(y.Es,C=>f.persistence.referenceDelegate.addReference(m,y.targetId,C)).next(()=>b.forEach(y.ds,C=>f.persistence.referenceDelegate.removeReference(m,y.targetId,C)))))}catch(m){if(!Hi(m))throw m;H(_d,"Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const C=f.Ms.get(y),x=C.snapshotVersion,M=C.withLastLimboFreeSnapshotVersion(x);f.Ms=f.Ms.insert(y,M)}}}(r.localStore,s))}async function Ik(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){H(Ad,"User change. New user:",e.toKey());const r=await vv(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new W(O.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await No(n,r.Ls)}}function kk(t,e){const n=J(t),r=n.Au.get(e);if(r&&r.hu)return re().add(r.key);{let i=re();const s=n.Iu.get(e);if(!s)return i;for(const a of s){const l=n.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function bv(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ek.bind(null,e),e.Pu.H_=ak.bind(null,e.eventManager),e.Pu.yu=lk.bind(null,e.eventManager),e}function Ak(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tk.bind(null,e),e}class fl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return CI(this.persistence,new II,e.initialUser,this.serializer)}Cu(e){return new _v(gd.mi,this.serializer)}Du(e){return new MI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fl.provider={build:()=>new fl};class Ck extends fl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ce(this.persistence.referenceDelegate instanceof hl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new uI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_t.withCacheSize(this.cacheSizeBytes):_t.DEFAULT;return new _v(r=>hl.mi(r,n),this.serializer)}}class ih{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ik.bind(null,this.syncEngine),await nk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ik}()}createDatastore(e){const n=Bl(e.databaseInfo.databaseId),r=function(s){return new FI(s)}(e.databaseInfo);return function(s,a,l,c){return new $I(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new WI(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Lm(this.syncEngine,n,0),function(){return xm.v()?new xm:new OI}())}createSyncEngine(e,n){return function(i,s,a,l,c,h,f){const m=new fk(i,s,a,l,c,h);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=J(i);H($r,"RemoteStore shutting down."),s.Ea.add(5),await Po(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ih.provider={build:()=>new ih};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="FirestoreClient";class Pk{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=at.UNAUTHENTICATED,this.clientId=id.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{H(mr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(H(mr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Id(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bu(t,e){t.asyncQueue.verifyOperationInProgress(),H(mr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vv(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Fm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Nk(t);H(mr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Dm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Dm(e.remoteStore,i)),t._onlineComponents=e}async function Nk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(mr,"Using user provided OfflineComponentProvider");try{await Bu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Mi("Error using user provided cache. Falling back to memory cache: "+n),await Bu(t,new fl)}}else H(mr,"Using default OfflineComponentProvider"),await Bu(t,new Ck(void 0));return t._offlineComponents}async function Lv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(mr,"Using user provided OnlineComponentProvider"),await Fm(t,t._uninitializedComponentsProvider._online)):(H(mr,"Using default OnlineComponentProvider"),await Fm(t,new ih))),t._onlineComponents}function xk(t){return Lv(t).then(e=>e.syncEngine)}async function Um(t){const e=await Lv(t),n=e.eventManager;return n.onListen=pk.bind(null,e.syncEngine),n.onUnlisten=yk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_k.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="firestore.googleapis.com",zm=!0;class $m{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Fv,this.ssl=zm}else this.host=e.host,this.ssl=e.ssl??zm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aI)throw new W(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jv(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ql{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $m({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $m(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new MT;switch(r.type){case"firstParty":return new jT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Bm.get(n);r&&(H("ComponentProvider","Removing Datastore"),Bm.delete(n),r.terminate())}(this),Promise.resolve()}}function Vk(t,e,n,r={}){var h;t=Us(t,ql);const i=td(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(u1(`https://${l}`),f1("Firestore",!0)),s.host!==Fv&&s.host!==l&&Mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:i,emulatorOptions:r};if(!tl(c,a)&&(t._setSettings(c),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=at.MOCK_USER;else{f=c1(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new W(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new at(y)}t._authCredentials=new OT(new R_(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vr(this.firestore,e,this._query)}}class $e{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}toJSON(){return{type:$e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ao(n,$e._jsonSchema))return new $e(e,r||null,new Q(pe.fromString(n.referencePath)))}}$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:je("string",$e._jsonSchemaVersion),referencePath:je("string")};class ar extends vr{constructor(e,n,r){super(e,n,cd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new Q(e))}withConverter(e){return new ar(this.firestore,e,this._path)}}function Uv(t,e,...n){if(t=Br(t),P_("collection","path",e),t instanceof ql){const r=pe.fromString(e,...n);return tm(r),new ar(t,null,r)}{if(!(t instanceof $e||t instanceof ar))throw new W(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return tm(r),new ar(t.firestore,null,r)}}function Dk(t,e,...n){if(t=Br(t),arguments.length===1&&(e=id.newId()),P_("doc","path",e),t instanceof ql){const r=pe.fromString(e,...n);return em(r),new $e(t,null,new Q(r))}{if(!(t instanceof $e||t instanceof ar))throw new W(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return em(r),new $e(t.firestore,t instanceof ar?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="AsyncQueue";class Wm{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wv(this,"async_queue_retry"),this._c=()=>{const r=Uu();r&&H(qm,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Uu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Uu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Mr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hi(e))throw e;H(qm,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,xn("INTERNAL UNHANDLED ERROR: ",Hm(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Sd.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&K(47125,{Pc:Hm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Hm(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class pl extends ql{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Wm,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wm(e),this._firestoreClient=void 0,await e}}}function Mk(t,e){const n=typeof t=="object"?t:ST(),r=typeof t=="string"?t:sl,i=_T(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=a1("firestore");s&&Vk(i,...s)}return i}function Bv(t){if(t._terminated)throw new W(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Ok(t),t._firestoreClient}function Ok(t){var r,i,s;const e=t._freezeSettings(),n=function(l,c,h,f){return new tS(l,c,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,jv(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Pk(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lt(tt.fromBase64String(e))}catch(n){throw new W(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lt(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Lt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ao(e,Lt._jsonSchema))return Lt.fromBase64String(e.bytes)}}Lt._jsonSchemaVersion="firestore/bytes/1.0",Lt._jsonSchema={type:je("string",Lt._jsonSchemaVersion),bytes:je("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pn._jsonSchemaVersion}}static fromJSON(e){if(Ao(e,pn._jsonSchema))return new pn(e.latitude,e.longitude)}}pn._jsonSchemaVersion="firestore/geoPoint/1.0",pn._jsonSchema={type:je("string",pn._jsonSchemaVersion),latitude:je("number"),longitude:je("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ao(e,mn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new mn(e.vectorValues);throw new W(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mn._jsonSchemaVersion="firestore/vectorValue/1.0",mn._jsonSchema={type:je("string",mn._jsonSchemaVersion),vectorValues:je("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=/^__.*__$/;class Lk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Qr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Co(e,this.data,n,this.fieldTransforms)}}function zv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:t})}}class Nd{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Nd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ml(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(zv(this.Ac)&&bk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bl(e)}Cc(e,n,r,i=!1){return new Nd({Ac:e,methodName:n,Dc:r,path:Je.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $v(t){const e=t._freezeSettings(),n=Bl(t._databaseId);return new jk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Fk(t,e,n,r,i,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Hv("Data must be an object, but it was:",a,r);const l=qv(r,a);let c,h;if(s.merge)c=new Kt(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=Bk(e,m,n);if(!a.contains(y))throw new W(O.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);$k(f,y)||f.push(y)}c=new Kt(f),h=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=a.fieldTransforms;return new Lk(new bt(l),c,h)}class xd extends Pd{_toFieldTransform(e){return new CS(e.path,new yo)}isEqual(e){return e instanceof xd}}function Uk(t,e,n,r=!1){return Vd(n,t.Cc(r?4:3,e))}function Vd(t,e){if(Wv(t=Br(t)))return Hv("Unsupported field value:",e,t),qv(t,e);if(t instanceof Pd)return function(r,i){if(!zv(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let c=Vd(l,i.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Br(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=_e.fromDate(r);return{timestampValue:cl(i.serializer,s)}}if(r instanceof _e){const s=new _e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cl(i.serializer,s)}}if(r instanceof pn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lt)return{bytesValue:cv(i.serializer,r._byteString)};if(r instanceof $e){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:pd(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof mn)return function(a,l){return{mapValue:{fields:{[j_]:{stringValue:F_},[ol]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return hd(l.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Vl(r)}`)}(t,e)}function qv(t,e){const n={};return V_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hr(t,(r,i)=>{const s=Vd(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Wv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _e||t instanceof pn||t instanceof Lt||t instanceof $e||t instanceof Pd||t instanceof mn)}function Hv(t,e,n){if(!Wv(n)||!N_(n)){const r=Vl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Bk(t,e,n){if((e=Br(e))instanceof Rd)return e._internalPath;if(typeof e=="string")return Gv(t,e);throw ml("Field path arguments must be of type string or ",t,!1,void 0,n)}const zk=new RegExp("[~\\*/\\[\\]]");function Gv(t,e,n){if(e.search(zk)>=0)throw ml(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rd(...e.split("."))._internalPath}catch{throw ml(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ml(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new W(O.INVALID_ARGUMENT,l+t+c)}function $k(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qk extends Qv{data(){return super.data()}}function Dd(t,e){return typeof e=="string"?Gv(t,e):e instanceof Rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Md{}class Od extends Md{}function Hk(t,e,...n){let r=[];e instanceof Md&&r.push(e),r=r.concat(n),function(s){const a=s.filter(c=>c instanceof Ld).length,l=s.filter(c=>c instanceof bd).length;if(a>1||a>0&&l>0)throw new W(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class bd extends Od{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bd(e,n,r)}_apply(e){const n=this._parse(e);return Kv(e._query,n),new vr(e.firestore,e.converter,Kc(e._query,n))}_parse(e){const n=$v(e.firestore);return function(s,a,l,c,h,f,m){let y;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new W(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Km(m,f);const x=[];for(const M of m)x.push(Qm(c,s,M));y={arrayValue:{values:x}}}else y=Qm(c,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Km(m,f),y=Uk(l,a,m,f==="in"||f==="not-in");return Le.create(h,f,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ld extends Md{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ld(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const c of l)Kv(a,c),a=Kc(a,c)}(e._query,n),new vr(e.firestore,e.converter,Kc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jd extends Od{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jd(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new W(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new W(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new go(s,a)}(e._query,this._field,this._direction);return new vr(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new Gi(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Gk(t,e="asc"){const n=e,r=Dd("orderBy",t);return jd._create(r,n)}class Fd extends Od{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Fd(e,n,r)}_apply(e){return new vr(e.firestore,e.converter,ll(e._query,this._limit,this._limitType))}}function Qk(t){return Fd._create("limit",t,"F")}function Qm(t,e,n){if(typeof(n=Br(n))=="string"){if(n==="")throw new W(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!G_(e)&&n.indexOf("/")!==-1)throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pe.fromString(n));if(!Q.isDocumentKey(r))throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return um(t,new Q(r))}if(n instanceof $e)return um(t,n._key);throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vl(n)}.`)}function Km(t,e){if(!Array.isArray(t)||t.length===0)throw new W(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Kv(t,e){const n=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Kk{convertValue(e,n="none"){switch(fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[ol].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>Ve(a.doubleValue));return new mn(n)}convertGeoPoint(e){return new pn(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ol(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fo(e));default:return null}}convertTimestamp(e){const n=hr(e);return new _e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);ce(gv(r),9688,{name:e});const i=new po(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(n)||xn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ps{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Or extends Qv{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Dd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Or._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Or._jsonSchemaVersion="firestore/documentSnapshot/1.0",Or._jsonSchema={type:je("string",Or._jsonSchemaVersion),bundleSource:je("string","DocumentSnapshot"),bundleName:je("string"),bundle:je("string")};class Pa extends Or{data(e={}){return super.data(e)}}class ki{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ps(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pa(this._firestore,this._userDataWriter,r.key,r,new Ps(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const c=new Pa(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ps(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Pa(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ps(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:Xk(l.type),doc:c,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ki._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=id.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Xk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:t})}}ki._jsonSchemaVersion="firestore/querySnapshot/1.0",ki._jsonSchema={type:je("string",ki._jsonSchemaVersion),bundleSource:je("string","QuerySnapshot"),bundleName:je("string"),bundle:je("string")};class Yv extends Kk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}function Jk(t,e){const n=Us(t.firestore,pl),r=Dk(t),i=Yk(t.converter,e);return eA(n,[Fk($v(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}function Zk(t,...e){var c,h,f;t=Br(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Gm(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Gm(e[r])){const m=e[r];e[r]=(c=m.next)==null?void 0:c.bind(m),e[r+1]=(h=m.error)==null?void 0:h.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let s,a,l;if(t instanceof $e)a=Us(t.firestore,pl),l=cd(t._key.path),s={next:m=>{e[r]&&e[r](tA(a,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Us(t,vr);a=Us(m.firestore,pl),l=m._query;const y=new Yv(a);s={next:C=>{e[r]&&e[r](new ki(a,y,m,C))},error:e[r+1],complete:e[r+2]},Wk(t._query)}return function(y,C,x,M){const L=new Rk(M),k=new uk(C,L,x);return y.asyncQueue.enqueueAndForget(async()=>sk(await Um(y),k)),()=>{L.Nu(),y.asyncQueue.enqueueAndForget(async()=>ok(await Um(y),k))}}(Bv(a),l,i,s)}function eA(t,e){return function(r,i){const s=new Mr;return r.asyncQueue.enqueueAndForget(async()=>vk(await xk(r),i,s)),s.promise}(Bv(t),e)}function tA(t,e,n){const r=n.docs.get(e._key),i=new Yv(t);return new Or(t,i,e._key,r,new Ps(n.hasPendingWrites,n.fromCache),e.converter)}function nA(){return new xd("serverTimestamp")}(function(e,n=!0){(function(i){qi=i})(TT),rl(new uo("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new pl(new bT(r.getProvider("auth-internal")),new FT(a,r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new W(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new po(h.options.projectId,f)}(a,i),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Si(Yp,Xp,e),Si(Yp,Xp,"esm2020")})();var rA="firebase",iA="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Si(rA,iA,"app");const sA={apiKey:"AIzaSyCqoHQUF_ppKBZb9OIwW6JKSuDMUIBZd9M",authDomain:"gambling-cookie.firebaseapp.com",projectId:"gambling-cookie",storageBucket:"gambling-cookie.firebasestorage.app",messagingSenderId:"486423415900",appId:"1:486423415900:web:20f06ba7c0da55b9136a99"},oA=__(sA),Xv=Mk(oA),Jv="imtmortels-cookie-clicker-v6",Zv="imtmortels_cookie_save",Ym="imtmortels_last_synced_best",ei=100,Eo=[{id:"cursor",name:"Curseur automatique",description:"Clique tout seul doucement pour toi.",baseCost:15,cps:.1,clickBonus:0,unlockAt:0,emoji:""},{id:"grandma",name:"Mamie ptissire",description:"Une mamie prpare des cookies  la chane.",baseCost:100,cps:1,clickBonus:0,unlockAt:50,emoji:""},{id:"bakery",name:"Boulangerie",description:"Ta propre boulangerie de quartier.",baseCost:1100,cps:8,clickBonus:0,unlockAt:500,emoji:""},{id:"cookie-farm",name:"Ferme  cookies",description:"Des champs entiers ddis aux cookies.",baseCost:2e4,cps:60,clickBonus:0,unlockAt:5e3,emoji:""},{id:"factory",name:"Usine  cookies",description:"Industrialise totalement la production.",baseCost:3e5,cps:400,clickBonus:0,unlockAt:5e4,emoji:""},{id:"bank",name:"Banque  cookies",description:"Les intrts composs en cookies.",baseCost:3e6,cps:3e3,clickBonus:0,unlockAt:3e5,emoji:""},{id:"cookie-mine",name:"Mine de cookies lunaires",description:"Exploite des cookies directement sur la lune.",baseCost:4e7,cps:7e4,clickBonus:0,unlockAt:3e6,emoji:""},{id:"sky-fortress",name:"Forteresse cleste",description:"Une ville flottante ddie aux cookies.",baseCost:3e8,cps:8e5,clickBonus:0,unlockAt:2e7,emoji:""},{id:"portal",name:"Portail dimensionnel",description:"Ouvre un portail vers le monde des cookies.",baseCost:15e8,cps:5e6,clickBonus:0,unlockAt:2e8,emoji:""},{id:"time-machine",name:"Machine  remonter le temps",description:"Produisait dj des cookies hier.",baseCost:15e9,cps:55e6,clickBonus:0,unlockAt:2e9,emoji:""},{id:"golden-hand",name:"Doigt en or",description:"Chaque clic vaut davantage.",baseCost:300,cps:0,clickBonus:1,unlockAt:150,emoji:""},{id:"silk-touch",name:"Toucher de soie",description:"+1 cookie par clic. Simple et efficace.",baseCost:500,cps:0,clickBonus:1,unlockAt:300,emoji:""},{id:"gold-glove",name:"Gant dor",description:"+5 cookies par clic.",baseCost:5e3,cps:0,clickBonus:5,unlockAt:2e3,emoji:""},{id:"quantum-finger",name:"Doigt quantique",description:"Ton clic vaut aussi 1% de ton CPS.",baseCost:5e4,cps:0,clickBonus:0,unlockAt:25e3,emoji:"",clickPercentOfCps:.01},{id:"crit-click",name:"Clic critique",description:"5% de chance par niveau de faire un clic x5.",baseCost:8e4,cps:0,clickBonus:0,unlockAt:4e4,emoji:"",critChanceBonus:.05,critMultiplier:5},{id:"click-frenzy",name:"Frnsie de clic",description:"Active un buff temporaire de clic surpuissant.",baseCost:15e4,cps:0,clickBonus:0,unlockAt:75e3,emoji:"",frenzyDurationSeconds:25,frenzyClickMultiplier:6},{id:"visual-confetti",name:"Confettis festifs",description:"Confettis sur les gros gains (cosmtique).",baseCost:6e4,cps:0,clickBonus:0,unlockAt:2e4,emoji:""},{id:"visual-neon",name:"Nons du casino",description:"Glow non sur les cartes du casino (cosmtique).",baseCost:15e4,cps:0,clickBonus:0,unlockAt:4e4,emoji:""},{id:"visual-rainbow",name:"Cookie arc-en-ciel",description:"Le cookie et la roue deviennent arc-en-ciel.",baseCost:45e4,cps:0,clickBonus:0,unlockAt:15e4,emoji:""}],aA=[{id:"auto",label:"Production automatique",description:"Gnre des cookies en continu."},{id:"click",label:"Clic manuel",description:"Rend chaque clic plus puissant."},{id:"cosmetic",label:"Cosmtiques",description:"Uniquement visuel, pour styliser ton cookie."}],Ws={auto:[],click:[],cosmetic:[]};for(const t of Eo)t.cps>0?Ws.auto.push(t):t.clickBonus>0?Ws.click.push(t):Ws.cosmetic.push(t);const lA=[{id:"basic",name:"Bote surprise",description:"Petit loot sympa, parfait pour commencer.",cost:1e3,emoji:"",minMultiplier:.9,maxMultiplier:2.2,jackpotMultiplier:10,jackpotChance:.03,failMultiplier:.25},{id:"rare",name:"Caisse rare",description:"Rcompenses plus grosses, mais plus risques.",cost:7500,emoji:"",minMultiplier:.8,maxMultiplier:3,jackpotMultiplier:16,jackpotChance:.05,failMultiplier:.22},{id:"legendary",name:"Coffre lgendaire",description:"Pour les vrais parieurs : gros risques, gros gains.",cost:5e4,emoji:"",minMultiplier:.7,maxMultiplier:3.8,jackpotMultiplier:24,jackpotChance:.06,failMultiplier:.2}],uA=[{id:"lose-all",label:"Tout perdu",description:"Tu perds ta mise entire.",weight:32,kind:"cookies",cookiesMultiplier:0},{id:"lose-half",label:"-50 %",description:"Tu ne rcupres que la moiti de ta mise.",weight:18,kind:"cookies",cookiesMultiplier:.5},{id:"refund",label:"Rembours",description:"Tu rcupres ta mise.",weight:20,kind:"cookies",cookiesMultiplier:1},{id:"small-win",label:"+50 %",description:"Petit bnfice sur ta mise.",weight:14,kind:"cookies",cookiesMultiplier:1.5},{id:"double",label:"x2",description:"Tu doubles ta mise.",weight:8,kind:"cookies",cookiesMultiplier:2},{id:"jackpot",label:"Jackpot",description:"norme pluie de cookies !",weight:2,kind:"cookies",cookiesMultiplier:6},{id:"rush-cps",label:"Rush de production",description:"CPS x2 pendant 30 secondes.",weight:5,kind:"buff",cookiesMultiplier:1,buffCpsMultiplier:2,buffClickMultiplier:1,buffDurationSeconds:30},{id:"rush-click",label:"Doigt en feu",description:"Cookies par clic x3 pendant 20 secondes.",weight:5,kind:"buff",cookiesMultiplier:1,buffCpsMultiplier:1,buffClickMultiplier:3,buffDurationSeconds:20}],zu=[{id:"first-cookie",label:"Premier cookie !",description:"Clique sur le cookie pour la premire fois.",check:t=>t.totalCookies>=1},{id:"hundred-cookies",label:"Petit gourmand",description:"Atteins 100 cookies au total.",check:t=>t.totalCookies>=100},{id:"thousand-cookies",label:"Gros gourmand",description:"Atteins 1 000 cookies au total.",check:t=>t.totalCookies>=1e3},{id:"ten-k-cookies",label:"Matre ptissier",description:"Atteins 10 000 cookies au total.",check:t=>t.totalCookies>=1e4},{id:"million-cookies",label:"Millionnaire en cookies",description:"Atteins 1 000 000 cookies au total.",check:t=>t.totalCookies>=1e6},{id:"billion-cookies",label:"Multi-milliardaire",description:"Atteins 1 000 000 000 cookies au total.",check:t=>t.totalCookies>=1e9},{id:"click-100",label:"Tapoteur",description:"Clique 100 fois sur le cookie.",check:t=>(t.totalClicks??0)>=100},{id:"click-1k",label:"Mitraillette  clics",description:"Clique 1 000 fois sur le cookie.",check:t=>(t.totalClicks??0)>=1e3},{id:"click-100k",label:"Doigt bionique",description:"Clique 100 000 fois sur le cookie.",check:t=>(t.totalClicks??0)>=1e5},{id:"first-upgrade",label:"Premier investissement",description:"Achte une amlioration.",check:t=>Object.values(t.upgrades).some(e=>e>0)},{id:"upgrade-collector",label:"Collectionneur",description:"Achte au moins 10 amliorations.",check:t=>Object.values(t.upgrades).reduce((e,n)=>e+(n||0),0)>=10},{id:"upgrade-tycoon",label:"Tycoon des upgrades",description:"Achte au moins 50 amliorations.",check:t=>Object.values(t.upgrades).reduce((e,n)=>e+(n||0),0)>=50},{id:"upgrade-mogul",label:"Mogul du clic",description:"Achte au moins 10 upgrades de clic manuel.",check:t=>["golden-hand","silk-touch","gold-glove","quantum-finger","crit-click","click-frenzy"].reduce((r,i)=>r+(t.upgrades[i]??0),0)>=10},{id:"ten-cps",label:"Production automatique",description:"Atteins 10 cookies par seconde.",check:(t,e)=>e>=10},{id:"hundred-cps",label:"Usine en marche",description:"Atteins 100 cookies par seconde.",check:(t,e)=>e>=100},{id:"thousand-cps",label:"Dimension industrielle",description:"Atteins 1 000 cookies par seconde.",check:(t,e)=>e>=1e3},{id:"first-spin",label:"Parieur en herbe",description:"Joue une fois  la roue de la chance.",check:t=>t.gamblingStats.spinsPlayed>=1},{id:"spin-10",label:"Tournant srieux",description:"Joue 10 fois  la roue.",check:t=>t.gamblingStats.spinsPlayed>=10},{id:"spin-50",label:"Fan de la roue",description:"Joue 50 fois  la roue.",check:t=>t.gamblingStats.spinsPlayed>=50},{id:"first-case",label:"Ouvre-bote",description:"Ouvre ta toute premire caisse.",check:t=>t.gamblingStats.casesOpened>=1},{id:"case-addict",label:"Accro aux lootboxes",description:"Ouvre 10 caisses.",check:t=>t.gamblingStats.casesOpened>=10},{id:"case-50",label:"Ouverture compulsive",description:"Ouvre 50 caisses.",check:t=>t.gamblingStats.casesOpened>=50},{id:"high-roller",label:"Gros coup",description:"Gagne au moins 50 000 cookies en un seul coup de chance.",check:t=>t.gamblingStats.biggestWin>=5e4},{id:"all-in",label:"All-in courageux",description:"Tente au moins un all-in.",check:t=>t.gamblingStats.allInCount>=1},{id:"all-in-lost",label:"All-in suicidaire",description:"Perdre au moins un all-in.",check:t=>t.gamblingStats.allInLosses>=1},{id:"loss-streak-5",label:"Srie noire",description:"Perds 5 coups de casino daffile.",check:t=>t.gamblingStats.maxConsecutiveLosses>=5},{id:"loss-streak-10",label:"Maldiction du casino",description:"Perds 10 coups de casino daffile.",check:t=>t.gamblingStats.maxConsecutiveLosses>=10},{id:"jackpot-streak-2",label:"Double jackpot",description:"Ralise 2 jackpots casino conscutifs.",check:t=>t.gamblingStats.maxJackpotStreak>=2},{id:"patience",label:"Patience infinie",description:"Atteins 1 000 000 de cookies sans jamais aller au casino.",check:t=>t.totalCookies>=1e6&&t.gamblingStats.spinsPlayed===0&&t.gamblingStats.casesOpened===0&&t.gamblingStats.highRollPlays===0},{id:"challenge-clean",label:"Casino matris",description:"Gagne au moins 100 000 cookies au total en casino sans ruiner ton stock (jamais moins de 0).",check:t=>t.gamblingStats.biggestWin>=1e5&&t.cookies>0},{id:"total-ruin",label:"Ruine totale",description:"Perds tout au casino aprs avoir gagn au moins 50 000 cookies.",check:t=>t.cookies<=0&&t.gamblingStats.biggestWin>=5e4}],Ai={cookies:0,totalCookies:0,upgrades:{cursor:0,grandma:0,bakery:0,factory:0,portal:0,"golden-hand":0,"time-machine":0,"cookie-farm":0,bank:0,"cookie-mine":0,"sky-fortress":0,"visual-confetti":0,"visual-neon":0,"visual-rainbow":0,"silk-touch":0,"gold-glove":0,"quantum-finger":0,"crit-click":0,"click-frenzy":0},theme:"dark",activeBuffs:[],gamblingStats:{casesOpened:0,spinsPlayed:0,biggestWin:0,highRollPlays:0,allInCount:0,consecutiveLosses:0,maxConsecutiveLosses:0,allInLosses:0,jackpotStreak:0,maxJackpotStreak:0},playerName:"",leaderboard:[],totalClicks:0,totalUpgradesPurchased:0};function we(t,e=1){if(!Number.isFinite(t))return"0";if(Math.abs(t)<1e3)return(Math.abs(t)<10?t.toFixed(e):t.toFixed(0)).replace(".",",");const n=["","k","M","Md","T"];let r=0,i=t;for(;Math.abs(i)>=1e3&&r<n.length-1;)i/=1e3,r+=1;return`${i.toFixed(e).replace(".",",")} ${n[r]}`}function cA(t){const e=t.reduce((i,s)=>i+s.weight,0),n=Math.random()*e;let r=0;for(const i of t)if(r+=i.weight,n<=r)return i;return t[t.length-1]}function e0(t){return Eo.reduce((e,n)=>{const r=t.upgrades[n.id]??0;return e+n.cps*r},0)}function sh(t){const e=e0(t);if(t.activeBuffs.length===0)return e;const n=t.activeBuffs.reduce((r,i)=>r*(i.multiplierCps||1),1);return e*n}function Xm(t){const e=1+Eo.reduce((s,a)=>{const l=t.upgrades[a.id]??0;return s+a.clickBonus*l},0),n=sh(t),r=Eo.reduce((s,a)=>{const l=t.upgrades[a.id]??0;return a.clickPercentOfCps?s+a.clickPercentOfCps*l:s},0);let i=e+n*r;if(t.activeBuffs.length>0){const s=t.activeBuffs.reduce((a,l)=>a*(l.multiplierClick||1),1);i*=s}return i}function hA(t){if(typeof document>"u")return null;const e=document.cookie.split("; ").find(n=>n.startsWith(`${t}=`));return e?decodeURIComponent(e.split("=")[1]):null}function Jm(t){const e=t,n={...Ai,...e,upgrades:{...Ai.upgrades,...e.upgrades??{}},activeBuffs:e.activeBuffs??[],gamblingStats:{...Ai.gamblingStats,...e.gamblingStats??{}},playerName:e.playerName??"",leaderboard:e.leaderboard??[],totalClicks:e.totalClicks??0,totalUpgradesPurchased:e.totalUpgradesPurchased??0},r=t.lastSaved;if(typeof r=="number"){const i=(Date.now()-r)/1e3,s=e0(n),a=Math.max(0,s*i);return{...n,cookies:n.cookies+a,totalCookies:n.totalCookies+a,activeBuffs:n.activeBuffs.filter(l=>l.expiresAt>Date.now())}}return n}function dA(){if(typeof window>"u")return{...Ai};try{const t=window.localStorage.getItem(Jv);if(t){const e=JSON.parse(t);return Jm(e)}}catch(t){console.error("Erreur de chargement depuis localStorage :",t)}try{const t=hA(Zv);if(t){const e=JSON.parse(t);return Jm(e)}}catch(t){console.error("Erreur de chargement depuis cookie :",t)}return{...Ai}}function fA(t){if(typeof window>"u")return;const e={...t,lastSaved:Date.now()};try{localStorage.setItem(Jv,JSON.stringify(e))}catch(n){console.error("Erreur de sauvegarde localStorage :",n)}try{typeof document<"u"&&(document.cookie=`${Zv}=${encodeURIComponent(JSON.stringify(e))};path=/;max-age=31536000`)}catch(n){console.error("Erreur de sauvegarde cookie :",n)}}async function pA(t,e){const n=(t||"Invit").trim().slice(0,16),r=Math.max(0,Math.round(e));if(r&&!(!Number.isFinite(r)||r>1e15))try{await Jk(Uv(Xv,"leaderboard"),{name:n,score:r,createdAt:nA()})}catch(i){console.error("Erreur envoi leaderboard :",i)}}function $u(t,e,n){return Math.min(n,Math.max(e,t))}function qu(t){const e=Date.now();return t.filter(n=>n.expiresAt>e)}function mA(){const[t,e]=ae.useState(()=>dA()),[n,r]=ae.useState([]),[i,s]=ae.useState(()=>{if(typeof window>"u")return 0;const N=window.localStorage.getItem(Ym),j=N?Number(N):0;return Number.isFinite(j)&&j>0?j:0}),[a,l]=ae.useState(!1),[c,h]=ae.useState(!1),[f,m]=ae.useState(null),[y,C]=ae.useState(null),[x,M]=ae.useState(null),[L,k]=ae.useState(null),[E,A]=ae.useState(500),[D,B]=ae.useState(null),[z,_]=ae.useState("auto"),[g,v]=ae.useState("upgrades"),[S,I]=ae.useState(!1),[R,T]=ae.useState(t.playerName||""),xe=ae.useMemo(()=>sh(t),[t]),zt=ae.useMemo(()=>Xm(t),[t]),Er=t.upgrades["visual-confetti"]>0,en=t.upgrades["visual-neon"]>0,q=t.upgrades["visual-rainbow"]>0,Y=["app",`app--${t.theme}`,Er?"app--confetti":"",en?"app--neon":"",q?"app--rainbow":""].filter(Boolean).join(" "),Z=ae.useMemo(()=>new Date().toISOString().slice(0,10),[]),de=ae.useMemo(()=>[...t.leaderboard].filter(N=>N.date.startsWith(Z)).sort((N,j)=>j.amount-N.amount).slice(0,5),[t.leaderboard,Z]),Ee=ae.useMemo(()=>[...t.leaderboard].sort((N,j)=>j.amount-N.amount).slice(0,10),[t.leaderboard]),Fe=ae.useMemo(()=>n.slice(0,3),[n]),ht=ae.useMemo(()=>n.slice(3),[n]);ae.useEffect(()=>{const N=window.setInterval(()=>{e(j=>{const U=qu(j.activeBuffs),ie=U===j.activeBuffs?j:{...j,activeBuffs:U},ue=sh(ie);if(ue<=0)return ie;const Ce=ue*.2;return{...ie,cookies:ie.cookies+Ce,totalCookies:ie.totalCookies+Ce}})},200);return()=>window.clearInterval(N)},[]),ae.useEffect(()=>{fA(t)},[t]),ae.useEffect(()=>{typeof document>"u"||(document.documentElement.dataset.theme=t.theme)},[t.theme]),ae.useEffect(()=>{t.playerName||I(!0)},[t.playerName]),ae.useEffect(()=>{const N=t.gamblingStats.biggestWin;if(N<=0||N===i)return;const j=Math.max(1e6,t.totalCookies*10);if(!(!Number.isFinite(N)||N>j)){if(s(N),typeof window<"u")try{window.localStorage.setItem(Ym,String(N))}catch{}pA(t.playerName,N)}},[t.gamblingStats.biggestWin,t.playerName,t.totalCookies,i]),ae.useEffect(()=>{const N=Uv(Xv,"leaderboard"),j=Hk(N,Gk("score","desc"),Qk(20)),U=Zk(j,ie=>{const ue=ie.docs.map(Me=>{var Re;const Ce=Me.data();return{id:Me.id,name:Ce.name??"???",score:Ce.score??0,createdAt:(Re=Ce.createdAt)!=null&&Re.toDate?Ce.createdAt.toDate():void 0}});r(ue)});return()=>U()},[]);const yn=()=>{e(N=>{let U=Xm(N);const ie=N.upgrades["crit-click"]??0;if(ie>0){const ue=Eo.find(nt=>nt.id==="crit-click"),Me=(ue==null?void 0:ue.critChanceBonus)??.05,Ce=(ue==null?void 0:ue.critMultiplier)??5,Re=$u(Me*ie,0,.5);Math.random()<Re&&(U*=Ce)}return{...N,cookies:N.cookies+U,totalCookies:N.totalCookies+U,totalClicks:(N.totalClicks??0)+1}}),l(!0),window.setTimeout(()=>l(!1),120)},It=ae.useCallback((N,j)=>{if(N.id!=="click-frenzy"||!N.frenzyDurationSeconds||!N.frenzyClickMultiplier)return j;const U=Date.now(),ie={id:`frenzy-${U}`,label:"Frnsie de clic",multiplierCps:1,multiplierClick:N.frenzyClickMultiplier,expiresAt:U+N.frenzyDurationSeconds*1e3},ue=qu(j.activeBuffs);return{...j,activeBuffs:[...ue,ie]}},[]),tn=N=>{e(j=>{if(j.totalCookies<N.unlockAt)return j;const U=j.upgrades[N.id]??0,ie=N.baseCost*Math.pow(1.17,U);if(j.cookies<ie)return j;let ue={...j,cookies:j.cookies-ie,upgrades:{...j.upgrades,[N.id]:U+1},totalUpgradesPurchased:j.totalUpgradesPurchased+1};return ue=It(N,ue),ue})},Ki=()=>{window.confirm("Rinitialiser compltement ta partie ? Tu perdras tous tes cookies et amliorations.")&&(e(N=>({...Ai,theme:N.theme,playerName:N.playerName})),C(null),M(null),k(null),B(null),s(0))},xo=()=>{e(N=>({...N,theme:N.theme==="dark"?"light":"dark"}))},Wl=()=>{const j=R.trim()||"Joueur";e(U=>({...U,playerName:j})),I(!1)},Hl=Math.max(0,Math.floor(t.cookies)),Vo=()=>{if(c||Hl<ei)return;h(!0);let N=null;const j=cA(uA);e(U=>{const ie=Math.floor(U.cookies),ue=$u(Math.floor(E),ei,ie);if(ue<=0||ie<=0)return N=null,U;let Me=U.cookies-ue,Ce=qu(U.activeBuffs);Me+=ue*j.cookiesMultiplier;let Re;if(j.kind==="buff"&&j.buffDurationSeconds&&(j.buffCpsMultiplier||j.buffClickMultiplier)){const kt=Date.now(),We={id:`buff-${j.id}-${kt}`,label:j.label,multiplierCps:j.buffCpsMultiplier??1,multiplierClick:j.buffClickMultiplier??1,expiresAt:kt+j.buffDurationSeconds*1e3};Ce=[...Ce,We],Re=We.label}const nt=Me-U.cookies;let yt=U.gamblingStats.biggestWin,rt=U.leaderboard;const $t=nt>0,qt=j.id==="jackpot";let _n=$t?0:U.gamblingStats.consecutiveLosses+1;const vn=Math.max(U.gamblingStats.maxConsecutiveLosses,_n),Dt=qt?U.gamblingStats.jackpotStreak+1:0,nn=Math.max(U.gamblingStats.maxJackpotStreak,Dt);if(nt>0){yt=Math.max(yt,nt);const kt={id:`wheel-${Date.now()}-${Math.random().toString(36).slice(2)}`,playerName:U.playerName||"Invit",amount:nt,date:new Date().toISOString(),source:"wheel"};rt=[...rt,kt].sort((We,Mn)=>Mn.amount-We.amount).slice(0,50)}return N={label:j.label,delta:nt,spent:ue,isJackpot:qt,buffLabel:Re},{...U,cookies:Me,activeBuffs:Ce,gamblingStats:{...U.gamblingStats,spinsPlayed:U.gamblingStats.spinsPlayed+1,biggestWin:yt,consecutiveLosses:_n,maxConsecutiveLosses:vn,jackpotStreak:Dt,maxJackpotStreak:nn},leaderboard:rt}}),N&&(C(N),B({kind:"wheel",result:N})),window.setTimeout(()=>h(!1),900)},Yi=N=>{f||t.cookies<N.cost||(m(N.id),window.setTimeout(()=>{let j=null;e(U=>{if(U.cookies<N.cost)return j=null,U;const ie=N.cost;let ue=U.cookies-ie;const Me=Math.random();let Ce,Re=!1,nt=!1;if(Me<N.jackpotChance)Ce=N.jackpotMultiplier,Re=!0;else if(Me<N.jackpotChance+.2)Ce=N.failMultiplier,nt=!0;else{const We=Math.random();Ce=N.minMultiplier+We*(N.maxMultiplier-N.minMultiplier)}const yt=ie*Ce;ue+=yt;const rt=ue-U.cookies;let $t=U.gamblingStats.biggestWin,qt=U.leaderboard,vn=rt>0?0:U.gamblingStats.consecutiveLosses+1;const Dt=Math.max(U.gamblingStats.maxConsecutiveLosses,vn),nn=Re?U.gamblingStats.jackpotStreak+1:0,kt=Math.max(U.gamblingStats.maxJackpotStreak,nn);if(rt>0){$t=Math.max($t,rt);const We={id:`case-${Date.now()}-${Math.random().toString(36).slice(2)}`,playerName:U.playerName||"Invit",amount:rt,date:new Date().toISOString(),source:"case"};qt=[...qt,We].sort((Mn,On)=>On.amount-Mn.amount).slice(0,50)}return j={caseId:N.id,caseName:N.name,reward:yt,spent:ie,isJackpot:Re,isLoss:nt},{...U,cookies:ue,gamblingStats:{...U.gamblingStats,casesOpened:U.gamblingStats.casesOpened+1,biggestWin:$t,consecutiveLosses:vn,maxConsecutiveLosses:Dt,jackpotStreak:nn,maxJackpotStreak:kt},leaderboard:qt}}),j&&(M(j),B({kind:"case",result:j})),m(null)},650))},Xi=N=>{let j=null;e(U=>{const ie=Math.floor(U.cookies);if(ie<=0)return j=null,U;const ue=Math.max(1e3,Math.floor(U.cookies*.25)),Me=N?ie:$u(ue,1e3,ie);if(Me<=0)return j=null,U;const Ce=N?.44:.47,Re=Math.random()<Ce,nt=Re?U.cookies+Me:U.cookies-Me,yt=nt-U.cookies;let rt=U.gamblingStats.biggestWin,$t=U.leaderboard;const qt=Re&&yt>0;let _n=qt?0:U.gamblingStats.consecutiveLosses+1;const vn=Math.max(U.gamblingStats.maxConsecutiveLosses,_n);let Dt=0;const nn=U.gamblingStats.maxJackpotStreak;let kt=U.gamblingStats.allInLosses;if(N&&!Re&&(kt+=1),qt){rt=Math.max(rt,yt);const We={id:`highroll-${Date.now()}-${Math.random().toString(36).slice(2)}`,playerName:U.playerName||"Invit",amount:yt,date:new Date().toISOString(),source:"highroll"};$t=[...$t,We].sort((Mn,On)=>On.amount-Mn.amount).slice(0,50)}return j={bet:Me,delta:yt,outcome:Re?"win":"lose",allIn:N},{...U,cookies:nt,gamblingStats:{...U.gamblingStats,highRollPlays:U.gamblingStats.highRollPlays+1,allInCount:U.gamblingStats.allInCount+(N?1:0),biggestWin:rt,consecutiveLosses:_n,maxConsecutiveLosses:vn,jackpotStreak:Dt,maxJackpotStreak:nn,allInLosses:kt},leaderboard:$t}}),j&&(k(j),B({kind:"highroll",result:j}))},Do=ae.useMemo(()=>zu.filter(N=>N.check(t,xe)),[t,xe]),Ji=new Set(Do.map(N=>N.id)),Zi=()=>B(null);return w.jsxs("div",{className:Y,children:[w.jsxs("header",{className:"app-header",children:[w.jsxs("div",{className:"app-header-left",children:[w.jsx("div",{className:"app-logo-circle",children:w.jsx("span",{className:"app-logo",children:""})}),w.jsxs("div",{className:"app-title",children:[w.jsx("h1",{children:"IMTMORTELS COOKIE CASINO"}),w.jsx("p",{children:"Clique, upgrade et tente ta chance au casino de cookies. Tout est virtuel, garde a fun et sain. "})]})]}),w.jsxs("div",{className:"app-actions",children:[w.jsxs("div",{className:"player-chip",children:[w.jsx("span",{className:"player-chip-label",children:"Joueur"}),w.jsx("span",{className:"player-chip-name",children:t.playerName||"Invit"}),w.jsx("button",{type:"button",className:"player-chip-edit",onClick:()=>{T(t.playerName||""),I(!0)},children:""})]}),w.jsx("button",{type:"button",className:"ghost-button",onClick:xo,children:t.theme==="dark"?" Mode clair":" Mode sombre"}),w.jsx("button",{type:"button",className:"ghost-button ghost-button--danger",onClick:Ki,children:" Reset"})]})]}),w.jsxs("main",{className:"app-main",children:[w.jsxs("section",{className:"top-layout",children:[w.jsx("section",{className:"top-layout-left",children:w.jsx("div",{className:"cookie-panel",children:w.jsxs("div",{className:"cookie-card",children:[w.jsx("div",{className:"cookie-aura"}),w.jsxs("div",{className:"cookie-main",children:[w.jsx("button",{type:"button",className:`cookie-button ${a?"cookie-button--pressed":""}`,onClick:yn,children:w.jsx("div",{className:"cookie-ring",children:w.jsx("div",{className:"cookie-ring-inner",children:w.jsxs("div",{className:"cookie",children:[w.jsx("div",{className:"cookie-chip cookie-chip--1"}),w.jsx("div",{className:"cookie-chip cookie-chip--2"}),w.jsx("div",{className:"cookie-chip cookie-chip--3"}),w.jsx("div",{className:"cookie-chip cookie-chip--4"}),w.jsx("div",{className:"cookie-gloss"})]})})})}),w.jsxs("div",{className:"cookie-stats",children:[w.jsxs("p",{className:"cookie-main-count",children:[we(t.cookies,1)," ","cookies"]}),w.jsxs("p",{className:"cookie-sub",children:[we(zt,2)," ","par clic "," ",we(xe,2)," ","/ sec"]}),w.jsxs("p",{className:"cookie-sub cookie-sub--secondary",children:["Total gnr :"," ",we(t.totalCookies,1)," ","cookies"]})]}),t.activeBuffs.length>0&&w.jsx("div",{className:"buffs-bar",children:t.activeBuffs.map(N=>w.jsxs("span",{className:"buff-pill",children:[w.jsx("span",{className:"buff-pill-emoji",children:""}),w.jsx("span",{className:"buff-pill-label",children:N.label})]},N.id))})]})]})})}),w.jsx("section",{className:"top-layout-right",children:w.jsxs("section",{className:`info-panel ${g==="leaderboard"?"info-panel--leaderboard":""}`,children:[g!=="leaderboard"&&w.jsxs("div",{className:"info-top3",children:[w.jsxs("div",{className:"info-top3-heading",children:[w.jsx("h2",{className:"info-top3-title",children:"Top 3 joueurs"}),w.jsx("p",{className:"info-top3-subtitle",children:"Bas sur les meilleurs gains en un seul coup de casino."})]}),w.jsx("ol",{className:"top3-list",children:Fe.length===0?w.jsx("li",{className:"top3-empty",children:"Aucun joueur global encore dans le classement. Fonce "}):Fe.map((N,j)=>w.jsxs("li",{className:`top3-item top3-item--${j+1}`,children:[w.jsx("span",{className:"top3-rank",children:j===0?"":j===1?"":""}),w.jsxs("div",{className:"top3-text",children:[w.jsx("span",{className:"top3-name",children:N.name}),w.jsxs("span",{className:"top3-score",children:[we(N.score,1)," ","cookies"]})]})]},N.id))})]}),w.jsxs("div",{className:"info-tabs",children:[w.jsx("button",{type:"button",className:`info-tab ${g==="upgrades"?"info-tab--active":""}`,onClick:()=>v("upgrades"),children:"Amliorations"}),w.jsx("button",{type:"button",className:`info-tab ${g==="achievements"?"info-tab--active":""}`,onClick:()=>v("achievements"),children:"Succs"}),w.jsx("button",{type:"button",className:`info-tab ${g==="leaderboard"?"info-tab--active":""}`,onClick:()=>v("leaderboard"),children:"Classement gnral"})]}),w.jsxs("div",{className:`info-content ${g==="leaderboard"?"info-content--leaderboard":""}`,children:[g==="upgrades"&&w.jsxs("div",{className:"info-upgrades",children:[w.jsx("p",{className:"info-section-intro",children:"Investis tes cookies dans des boosts permanents. Les btiments produisent en continu, les clics deviennent monstrueux."}),w.jsx("div",{className:"upgrade-tabs",children:aA.map(N=>w.jsxs("button",{type:"button",className:`upgrade-tab${z===N.id?" upgrade-tab--active":""}`,onClick:()=>_(N.id),children:[w.jsx("span",{className:"upgrade-tab-label",children:N.label}),w.jsx("span",{className:"upgrade-tab-description",children:N.description})]},N.id))}),w.jsx("div",{className:"shop-list-wrapper",children:Ws[z].some(N=>t.totalCookies>=N.unlockAt)?w.jsx("div",{className:"shop-list",children:Ws[z].filter(N=>t.totalCookies>=N.unlockAt).map(N=>{const j=t.upgrades[N.id]??0,U=N.baseCost*Math.pow(1.15,j),ie=t.cookies>=U;return w.jsxs("button",{type:"button",className:`shop-item${ie?" shop-item--affordable":""}`,onClick:()=>tn(N),disabled:!ie,children:[w.jsxs("div",{className:"shop-item-main",children:[w.jsx("div",{className:"shop-item-icon",children:N.emoji}),w.jsxs("div",{className:"shop-item-text",children:[w.jsx("span",{className:"shop-item-name",children:N.name}),w.jsx("span",{className:"shop-item-description",children:N.description}),w.jsxs("div",{className:"shop-item-effects",children:[N.cps>0&&w.jsxs("span",{children:["+",N.cps," ","/s"]}),N.clickBonus>0&&w.jsxs("span",{children:["+",N.clickBonus," ","par clic"]}),N.cps===0&&N.clickBonus===0&&w.jsx("span",{children:"Cosmtique uniquement "})]})]})]}),w.jsxs("div",{className:"shop-item-meta",children:[w.jsxs("span",{className:"shop-item-cost",children:[we(U,1)," ","cookies"]}),w.jsxs("span",{className:"shop-item-qty",children:["x",j]})]})]},N.id)})}):w.jsx("p",{className:"shop-empty",children:"Clique encore un peu pour dbloquer des amliorations dans cette catgorie. "})})]}),g==="achievements"&&w.jsxs("div",{className:"info-achievements",children:[w.jsxs("div",{className:"info-achievements-header",children:[w.jsx("h3",{children:"Succs"}),w.jsxs("p",{className:"achievements-count",children:[Do.length," /"," ",zu.length," dbloqus"]})]}),w.jsx("p",{className:"info-section-intro",children:"Dbloque des succs en cliquant, investissant et en testant le casino. Rien nest montis, cest juste pour le fun et le challenge."}),w.jsx("div",{className:"achievements-list",children:zu.map(N=>{const j=Ji.has(N.id);return w.jsxs("div",{className:`achievement ${j?"achievement--unlocked":"achievement--locked"}`,children:[w.jsx("span",{className:"achievement-dot"}),w.jsxs("div",{className:"achievement-text",children:[w.jsx("span",{className:"achievement-label",children:N.label}),w.jsx("span",{className:"achievement-description",children:N.description})]})]},N.id)})})]}),g==="leaderboard"&&w.jsxs("div",{className:"info-leaderboard",children:[w.jsxs("div",{className:"leaderboard-top3-block",children:[w.jsx("h3",{className:"leaderboard-title",children:"Classement global du casino"}),w.jsx("p",{className:"leaderboard-subtitle",children:"Bas sur le meilleur gain en un seul coup (roue, lootbox ou high roll)."}),w.jsxs("div",{className:"leaderboard-podium",children:[w.jsx("div",{className:"podium-column podium-column--silver",children:Fe[1]&&w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"podium-rank",children:""}),w.jsx("span",{className:"podium-name",children:Fe[1].name}),w.jsx("span",{className:"podium-score",children:we(Fe[1].score,1)})]})}),w.jsx("div",{className:"podium-column podium-column--gold",children:Fe[0]&&w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"podium-rank",children:""}),w.jsx("span",{className:"podium-name",children:Fe[0].name}),w.jsx("span",{className:"podium-score",children:we(Fe[0].score,1)})]})}),w.jsx("div",{className:"podium-column podium-column--bronze",children:Fe[2]&&w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"podium-rank",children:""}),w.jsx("span",{className:"podium-name",children:Fe[2].name}),w.jsx("span",{className:"podium-score",children:we(Fe[2].score,1)})]})})]})]}),w.jsxs("div",{className:"leaderboard-scroll",children:[w.jsxs("div",{className:"leaderboard-block",children:[w.jsx("h4",{className:"leaderboard-block-title",children:"Suite du classement global"}),ht.length===0?w.jsx("p",{className:"leaderboard-empty",children:"Personne d'autre n'a encore perc le classement global."}):w.jsx("ul",{className:"leaderboard-list",children:ht.map((N,j)=>w.jsxs("li",{className:"leaderboard-row",children:[w.jsxs("span",{className:"leaderboard-rank",children:["#",j+4]}),w.jsx("span",{className:"leaderboard-name",children:N.name}),w.jsx("span",{className:"leaderboard-amount",children:we(N.score,1)})]},N.id))})]}),w.jsxs("div",{className:"leaderboard-block",children:[w.jsx("h4",{className:"leaderboard-block-title",children:"Top gains du jour (local)"}),de.length===0?w.jsx("p",{className:"leaderboard-empty",children:"Aucun gros gain local aujourd'hui.  toi de jouer "}):w.jsx("ul",{className:"leaderboard-list",children:de.map((N,j)=>w.jsxs("li",{className:"leaderboard-row",children:[w.jsxs("span",{className:"leaderboard-rank",children:["#",j+1]}),w.jsx("span",{className:"leaderboard-name",children:N.playerName}),w.jsx("span",{className:"leaderboard-amount",children:we(N.amount,1)}),w.jsx("span",{className:"leaderboard-source",children:N.source==="wheel"?"Roue":N.source==="case"?"Caisse":"High roll"})]},N.id))})]}),w.jsxs("div",{className:"leaderboard-block",children:[w.jsx("h4",{className:"leaderboard-block-title",children:"Records absolus (local)"}),Ee.length===0?w.jsx("p",{className:"leaderboard-empty",children:"Pas encore de record enregistr sur ce navigateur."}):w.jsx("ul",{className:"leaderboard-list",children:Ee.map((N,j)=>w.jsxs("li",{className:"leaderboard-row",children:[w.jsxs("span",{className:"leaderboard-rank",children:["#",j+1]}),w.jsx("span",{className:"leaderboard-name",children:N.playerName}),w.jsx("span",{className:"leaderboard-amount",children:we(N.amount,1)}),w.jsx("span",{className:"leaderboard-source",children:N.source==="wheel"?"Roue":N.source==="case"?"Caisse":"High roll"})]},N.id))}),w.jsx("p",{className:"leaderboard-note",children:"Classement stock uniquement dans ton navigateur."})]})]})]})]})]})})]}),w.jsxs("section",{className:"casino-section",children:[w.jsx("header",{className:"casino-header",children:w.jsxs("div",{children:[w.jsx("h2",{className:"section-title",children:"Casino des cookies"}),w.jsx("p",{className:"section-subtitle",children:"Roue, lootboxes et coups de poker. L'esprance est lgrement contre toi : parie uniquement pour t'amuser."})]})}),w.jsxs("div",{className:"casino-grid",children:[w.jsxs("div",{className:`casino-card casino-card--wheel ${en?"casino-card--neon":""}`,children:[w.jsxs("div",{className:"casino-card-header",children:[w.jsx("h3",{children:"Roue de la chance"}),w.jsxs("p",{className:"casino-helper",children:["Mise min. ",ei," cookies"]})]}),w.jsxs("div",{className:"wheel-controls",children:[w.jsx("input",{type:"number",className:"wheel-input",min:ei,value:E,onChange:N=>A(Math.max(ei,Number(N.target.value)||0))}),w.jsx("button",{type:"button",className:"primary-button",onClick:Vo,disabled:c||t.cookies<ei,children:c?"La roue tourne...":"Spin "})]}),y&&w.jsxs("p",{className:"casino-last-result",children:["Rsultat : ",y.label," "," ",y.delta>=0?"+":"",we(y.delta,1)," ","cookies",y.buffLabel&&w.jsxs(w.Fragment,{children:["  ","Buff :"," ",y.buffLabel]})]})]}),w.jsxs("div",{className:`casino-card casino-card--cases ${en?"casino-card--neon":""}`,children:[w.jsxs("div",{className:"casino-card-header",children:[w.jsx("h3",{children:"Lootboxes"}),w.jsx("p",{className:"casino-helper",children:"Des botes surprises plus ou moins risques."})]}),w.jsx("div",{className:"cases-list",children:lA.map(N=>{const j=t.cookies<N.cost||f===N.id,U=f===N.id;return w.jsxs("button",{type:"button",className:`case-card ${j?"case-card--disabled":""}`,disabled:j,onClick:()=>Yi(N),children:[w.jsxs("div",{className:"case-main",children:[w.jsx("span",{className:"case-emoji",children:N.emoji}),w.jsxs("div",{children:[w.jsx("div",{className:"case-name",children:N.name}),w.jsx("div",{className:"case-desc",children:N.description})]})]}),w.jsxs("div",{className:"case-meta",children:[w.jsxs("span",{children:["Cot :"," ",we(N.cost,0)]}),w.jsxs("span",{children:["Jack :"," ",N.jackpotMultiplier,"x (",Math.round(N.jackpotChance*100),"%)"]})]}),U&&w.jsx("div",{className:"case-opening",children:"Ouverture..."})]},N.id)})}),x&&w.jsxs("p",{className:"casino-last-result",children:["Dernire caisse :"," ",x.caseName," "," ",x.isJackpot?"JACKPOT  ":x.isLoss?"Ae...  ":"",x.reward>=0?"+":"",we(x.reward,1)," ","cookies"]})]}),w.jsxs("div",{className:`casino-card casino-card--highroll ${en?"casino-card--neon":""}`,children:[w.jsxs("div",{className:"casino-card-header",children:[w.jsx("h3",{children:"Coup de poker"}),w.jsx("p",{className:"casino-helper",children:"Mise leve ou ALL-IN. Les chances ne sont pas de ton ct. "})]}),w.jsxs("div",{className:"highroll-actions",children:[w.jsx("button",{type:"button",className:"secondary-button",disabled:t.cookies<1e3,onClick:()=>Xi(!1),children:"Mise forte"}),w.jsx("button",{type:"button",className:"danger-button",disabled:t.cookies<1e3,onClick:()=>Xi(!0),children:"ALL-IN "})]}),L&&w.jsxs("p",{className:"casino-last-result",children:[L.allIn?"ALL-IN":"Mise"," ",":"," ",we(L.bet,1)," ",""," ",L.outcome==="win"?"Victoire ":"Dfaite "," ","(",L.delta>=0?"+":"",we(L.delta,1)," ","cookies)"]})]})]}),w.jsxs("div",{className:"casino-stats",children:[w.jsx("h3",{children:"Stats casino"}),w.jsxs("div",{className:"casino-stats-grid",children:[w.jsxs("div",{className:"casino-stat",children:[w.jsx("span",{children:"Roue joue"}),w.jsxs("strong",{children:[t.gamblingStats.spinsPlayed," fois"]})]}),w.jsxs("div",{className:"casino-stat",children:[w.jsx("span",{children:"Lootboxes ouvertes"}),w.jsx("strong",{children:t.gamblingStats.casesOpened})]}),w.jsxs("div",{className:"casino-stat",children:[w.jsx("span",{children:"High rolls"}),w.jsx("strong",{children:t.gamblingStats.highRollPlays})]}),w.jsxs("div",{className:"casino-stat",children:[w.jsx("span",{children:"All-in tents"}),w.jsx("strong",{children:t.gamblingStats.allInCount})]}),w.jsxs("div",{className:"casino-stat",children:[w.jsx("span",{children:"Srie de pertes max"}),w.jsx("strong",{children:t.gamblingStats.maxConsecutiveLosses})]}),w.jsxs("div",{className:"casino-stat",children:[w.jsx("span",{children:"Meilleur coup"}),w.jsxs("strong",{children:[we(t.gamblingStats.biggestWin,1)," ","cookies"]})]})]})]})]})]}),S&&w.jsx("div",{className:"modal-backdrop",children:w.jsxs("div",{className:"modal-card",children:[w.jsx("h2",{children:"Choisis ton pseudo"}),w.jsx("p",{children:"Il sera utilis pour le classement local et global. Tu pourras le modifier plus tard."}),w.jsx("input",{type:"text",maxLength:16,className:"modal-input",value:R,onChange:N=>T(N.target.value)}),w.jsx("div",{className:"modal-actions",children:w.jsx("button",{type:"button",className:"primary-button",onClick:Wl,children:"Valider"})})]})}),D&&w.jsx("div",{className:"overlay-backdrop",children:w.jsxs("div",{className:"overlay-card",children:[D.kind==="wheel"&&w.jsxs(w.Fragment,{children:[w.jsx("h2",{children:"Rsultat de la roue"}),w.jsxs("p",{className:"overlay-main",children:[D.result.label,"  Mise :"," ",we(D.result.spent,1)," "," Gain net :"," ",D.result.delta>=0?"+":"",we(D.result.delta,1)," ","cookies"]}),D.result.isJackpot&&w.jsx("p",{className:"overlay-sub",children:" JACKPOT de cookies !"}),D.result.buffLabel&&w.jsxs("p",{className:"overlay-sub",children:["Buff obtenu :"," ",D.result.buffLabel]})]}),D.kind==="case"&&w.jsxs(w.Fragment,{children:[w.jsx("h2",{children:"Rsultat de la caisse"}),w.jsxs("p",{className:"overlay-main",children:[D.result.caseName,"  Mise :"," ",we(D.result.spent,1)," "," Rcompense :"," ",we(D.result.reward,1)," ","cookies"]}),D.result.isJackpot&&w.jsx("p",{className:"overlay-sub",children:" JACKPOT dans la lootbox !"}),D.result.isLoss&&w.jsx("p",{className:"overlay-sub",children:"Ae petit rappel des probabilits du casino."})]}),D.kind==="highroll"&&w.jsxs(w.Fragment,{children:[w.jsx("h2",{children:"Coup de poker"}),w.jsxs("p",{className:"overlay-main",children:[D.result.allIn?"ALL-IN":"Mise leve","  ","Mise :"," ",we(D.result.bet,1)," "," Rsultat :"," ",D.result.outcome==="win"?"Victoire ":"Dfaite "," ","(",D.result.delta>=0?"+":"",we(D.result.delta,1)," ","cookies)"]})]}),w.jsx("div",{className:"overlay-actions",children:w.jsx("button",{type:"button",className:"secondary-button",onClick:Zi,children:"Fermer"})})]})})]})}Wu.createRoot(document.getElementById("root")).render(w.jsx(F0.StrictMode,{children:w.jsx(mA,{})}));
